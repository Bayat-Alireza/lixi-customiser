{"version":3,"sources":["redux/action-types/index.ts","components/nav-taps/navTabsStyle.ts","components/vertical-stepper/verticalStepperStyle.ts","components/upload-file/uploadFileStyle.ts","components/upload-file/UploadFile.tsx","redux/reducers/ItemReducer.ts","enums/lixiEnums.ts","redux/reducers/customiserReducer.ts","redux/reducers/schemaReducer.ts","redux/reducers/index.ts","redux/store.ts","util/nameSpaces.ts","redux/action-creators/itemActionCreator.ts","redux/action-creators/customiserActionCreator.ts","redux/action-creators/schemaActionCreator.ts","hooks/useActions.ts","hooks/useTypeSelector.ts","components/vertical-stepper/upload-schema-step/uploadSchemaStepStyle.ts","components/vertical-stepper/upload-schema-step/UploadSchemaStep.tsx","components/vertical-stepper/upload-customisation-instruction/uploadCustomisationInstructionStyle.ts","components/vertical-stepper/upload-customisation-instruction/UploadCustomisationInstruction.tsx","components/vertical-stepper/VerticalStepper.tsx","components/itemXMLViewer/itemXMLViewerSettings.ts","components/itemXMLViewer/itemXMLViewerStyle.ts","components/itemXMLViewer/ItemXMLViewer.tsx","models/Customiser.ts","models/LixiBase.ts","models/ElementCustomiser.ts","components/lixi-list-item-header/lixiListItemHeaderStyle.ts","components/lixi-list-item-header/LixiListItemHeader.tsx","components/tool-tip/lixiItemToolTipStyle.ts","components/tool-tip/LixiItemToolTip.tsx","components/lixi-list-item/lixiListItemStyle.ts","components/formik-mterial-ui/AppCheckBox.tsx","components/confirm-remove-dialog/confirmRemoveItemDialogStyle.ts","components/confirm-remove-dialog/ConfirmRemoveItemDialog.tsx","components/lixi-list-item/LixiListItem.tsx","components/element-sub-items/elementSubItemsStyle.ts","components/element-sub-items/ElementSubItems.tsx","components/formik-mterial-ui/appTextFieldStyle.ts","components/formik-mterial-ui/AppTextField.tsx","components/excerpt-documentation/ExcerptDocumentation.tsx","components/customise-element/customiseElementStyle.ts","components/customise-element/CustomiseElement.tsx","components/customise-element/customiseElementSchema.ts","components/lixi-item/lixiItemStyle.ts","components/customise-attribute/integer-type-attribute/integerTypeAttributeStyle.ts","components/customise-attribute/integer-type-attribute/integerTypeAttributeSchema.ts","models/IntegerTypeAttributeCustomiser.ts","components/customise-attribute/integer-type-attribute/IntegerTypeAttribute.tsx","components/lixi-item/AttributeSwitchType.tsx","components/customise-attribute/string-type-attribute/stringTypeAttributeStyle.ts","components/customise-attribute/string-type-attribute/stringTypeAttributeSchema.ts","components/formik-mterial-ui/AppRadioButton.tsx","components/customise-attribute/string-type-attribute/string-to-pattern/stringToPatternStyle.ts","components/customise-attribute/string-type-attribute/string-to-pattern/StringToPattern.tsx","components/customise-attribute/string-type-attribute/string-to-list-header/stringToListHeaderSchema.ts","components/customise-attribute/string-type-attribute/string-to-list-header/stringToListHeaderStyle.ts","components/customise-attribute/string-type-attribute/string-to-list-header/StringToListHeader.tsx","components/customise-attribute/string-type-attribute/string-to-list-body/stringToListBodyStyle.ts","components/customise-attribute/string-type-attribute/string-to-list-body/StringToListBody.tsx","models/StringTypeAttributeCustomiser.ts","components/customise-attribute/string-type-attribute/StringTypeAttribute.tsx","components/lixi-item/lixi-item-attributes/attributesTransactionsStyle.ts","components/lixi-item/lixi-item-attributes/ItemAttributes.tsx","components/lixi-item/lixi-item-transactions/transactionsStyle.ts","components/lixi-item/lixi-item-transactions/Transactions.tsx","components/lixi-item/lixi-item-label-description/labelDescriptionStyle.ts","components/lixi-item/lixi-item-label-description/LabelDescription.tsx","components/customise-attribute/list-type-attribute/listTypeAttributeStyle.ts","models/ListTypeAttributeCustomiser.ts","components/customise-attribute/list-type-attribute/ListTypeAttribute.tsx","components/customise-simple-type/simple-token-type/simpleTokenTypeStyle.ts","models/TokenTypeCustomiser.ts","components/customise-simple-type/simple-token-type/SimpleTokenType.tsx","components/lixi-item/SimpleTypeSwitchType.tsx","components/lixi-item/LixiItem.tsx","components/breadCrumbs/breadCrumbsStyle.ts","components/breadCrumbs/breadCrumbsComponent.tsx","components/search/listBoxComponent.tsx","components/search/searchPathStyle.ts","components/search/SearchPath.tsx","components/nav-taps/create-instruction/CreateInstruction.tsx","components/nav-taps/NavTabPanel.tsx","components/sub-schema-menu/subSchemaMenuStyle.ts","components/sub-schema-menu/SubSchemaMenu.tsx","components/select-transaction-dialog/selectTransactionDialogStyle.ts","components/select-transaction-dialog/SelectTransactionDialog.tsx","components/nav-taps/NavTabs.tsx","appStyle.ts","App.tsx","reportWebVitals.ts","themes/getThem.ts","themes/light.ts","themes/dark.ts","themeProvider.tsx","index.tsx"],"names":["ItemActionType","CustomizationActionType","SchemaActionType","useStyles","makeStyles","theme","createStyles","root","flexGrow","tabPanelChildren","padding","spacing","breakpoints","down","appBar","backgroundColor","palette","primary","dark","width","margin","stepper","button","marginTop","marginRight","actionsContainer","marginBottom","resetContainer","customisationContainer","input","display","findPageIcon","color","light","loadIcon","main","fileName","getContrastText","borderRadius","cursor","label","alignItems","uploadButton","marginLeft","minWidth","UploadFile","saveFace","classes","description","React","setSelectedFile","style","accept","className","id","type","onChange","target","console","log","files","Grid","wrap","alignContent","container","item","Tooltip","title","htmlFor","IconButton","aria-label","component","fontSize","Typography","variant","noWrap","LixiAttributeEnum","LixiTagEnum","LixiLocalNameEnum","initialState","data","error","loading","markedForDeletionList","undefined","reducer","state","action","SEARCH_ITEM","SEARCH_ITEM_SUCCESS","payload","SEARCH_ITEM_ERROR","REST_ITEM","MARKED_FOR_DELETION","customization","subSchema","transactionType","transactionVersion","metaData","UPLOAD_CUSTOMIZATION","UPLOAD_CUSTOMIZATION_SUCCESS","doc","file","UPLOAD_CUSTOMIZATION_ERROR","CUSTOMIZE_SUB_SCHEMA","RESET_SUB_SCHEMA","UPDATE_CUSTOMISATION","RESET_CUSTOMIZATION","schema","UPLOAD_SCHEMA","UPLOAD_SCHEMA_SUCCESS","UPLOAD_SCHEMA_ERROR","RESET_SCHEMA","reducers","combineReducers","itemReducer","customizer","customiserReducer","SchemaReducer","store","createStore","applyMiddleware","thunk","nameSpaceResolver","prefix","xs","lx","li","XmlUtil","parsedDoc","this","elementsPath","elements","getElementsByTagName","element","Array","prototype","fill","e","push","path","textContent","itemsPath","result","evaluateXpath","iterateNext","getSchemaDetails","getAttribute","transaction","transactions","split","includes","parentElement","children","xpath","contextNode","evaluate","XPathResult","ANY_TYPE","ANY_UNORDERED_NODE_TYPE","singleNodeValue","xpathResult","standard","version","appInfo","map","call","i","localName","searchItem","lixiItem","Promise","resolves","rejects","xmlUtile","getItemByPath","dispatch","getState","a","sch","message","resetItem","markedForDeletion","customizeSubSchema","resetCustomizeSubSchema","resetCustomization","uploadExistingCustomization","parsExistingCustomization","DOMParser","parseFromString","reader","FileReader","onload","onerror","readAsText","existingSchema","toString","existingCustomization","updateCustomisation","customisation","uploadBaseSchema","parsBaseSchema","baseSchema","resetBaseSchema","err","useAction","useDispatch","bindActionCreators","actionCreator","useTypedSelector","useSelector","uploadContainer","maxWidth","justifyContent","height","upload","nextButton","fileDetailHeaderRow","fileDetailHeaderCell","UploadSchemaStep","handelNextClicked","fileSize","useMemo","size","Math","floor","parseFloat","pow","toFixed","Paper","sm","Collapse","in","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","scope","name","lastModified","Date","Button","endIcon","onClick","disabled","flexDirection","UploadCustomisationInstruction","handelBack","activeStep","handelSkip","handelNext","startIcon","VerticalLinearStepper","labelProps","optional","useState","setActiveStep","stepProps","setStepProp","handleNext","prevActiveStep","CssBaseline","Stepper","orientation","Step","StepLabel","StepContent","completed","options","indent","newline","customThemeVsCode","tagColor","attributeKeyColor","textColor","attributeValueColor","separatorColor","position","overflow","maxHeight","header","top","right","left","boxShadow","downloadLink","secondary","textDecoration","ItemXMLViewer","itemXML","role","serializer","XMLSerializer","xmlString","serializeToString","filename","exportFile","resolve","xml","prettifyXml","Customiser","customiseItem","excerpt","documentation","_customiseItemStub","cloneNode","_customisationStub","docStub","createElement","append","ExcludedItem","removeCustomisedItem","setAttribute","excludedPath","removeChild","allPath","from","find","p","existingCustomisedItem","getCustomisedItem","customExcerpt","trim","customDocumentation","filter","startsWith","paths","allCustomisedPaths","forEach","exclude","include","LixiBase","annotated","annotation","length","ownerDocument","referenceTargets","targets","t","attributes","complexType","getLixiComplexType","child","attribute","complex","subElements","firstChild","firstElementChild","sequence","choice","Object","keys","restriction","ElementCustomiser","values","object","fixedList","includeAllElements","excludeAllElements","includeAllAttributes","excludeAllAttributes","heading","newMin","newMax","itemPath","setInLineAttributes","customMaxOccurs","customMinOccurs","customAttributes","customElements","att","idx","customisedEle","customHeading","parseInt","parentCustomised","parentStatus","pathList","pathLeaf","pop","customiser","join","customisedItem","getTouchedItem","customisedObject","included","subItemHeader","zIndex","viewItem","LixiListItemHeader","items","toggle","listName","selectedItemsLength","excluded","exclusion","arrayHelper","value","setValue","includeAll","setIncludeAll","excludeAll","setExcludeAll","useFormikContext","getFieldHelpers","submitForm","useEffect","toggleAll","newCustomisation","leafItem","notExcludeByPath","excludeByPath","copyList","splice","indexOf","StatusText","ListSubheader","ListItemIcon","ListItemSecondaryAction","Switch","checked","inputProps","ListItemText","tooltip","common","white","tooltip2","typography","pxToRem","LixiItemToolTip","placement","Fragment","subItem","AppCheckBox","props","useField","field","meta","FormControl","touched","FormControlLabel","control","Checkbox","paper","alert","ConfirmRemoveItemDialog","open","affected","handleClose","initialValues","agree","validationSchema","Yup","shape","oneOf","enableReinitialize","onSubmit","setSubmitting","resetForm","setTimeout","removeCustomisation","isSubmitting","errors","Dialog","draggable","BackdropProps","PaperProps","elevation2","onClose","aria-labelledby","DialogTitle","Alert","severity","disableRipple","DialogContent","gutterBottom","DialogContentText","Divider","DialogActions","LixiListItem","selectAll","fixedListItem","toggleSelectAll","affectedPath","setAffectedPath","setOpen","Status","status","furtherCustomisation","d","remove","affectedItem","affectedList","affectedDecedents","toggleExclude","ListItem","divider","dense","subEle","edge","paddingTop","ElementSubItems","subItems","setExcludedList","setSelectAll","setTouched","includeAllItem","titleCaseName","replace","RegExp","matched","toUpperCase","excludeAllItem","affected2","excludedFullPath","leaf","deletionList","exc","pre","useCallback","render","helperText","background","borderColor","borderStyle","borderWidth","boxSizing","AppTextField","TextField","FormHelperTextProps","ExcerptDocumentation","multiline","fullWidth","rows","saveMinMax","gap","minMaxContainer","textFieldMinMax","saveButton","customisationTitleContainer","customisationTitle","customisationTitleExclusion","customisationTitleInclusion","customisationTooltip","CustomiseElement","previousValues","useRef","initialValue","setInitialValue","setChecked","itemSubElement","setItemSubElement","itemAttributes","setItemAttributes","excludedList","setFixedListItems","occursMinMax","setOccursMinMax","current","leafAttribs","itemEle","attributesPaths","results","leafEle","elementsPaths","excludeNotIncludedItems","copyAttributes","copyElements","leafItems","removeElementsAndAttributes","instruction","subElement","lixiSubElements","occurrenceMinMax","min","max","deleteInstruction","currentMin","currentMax","moreThan","test","exclusive","params","parent","CustomiseElementSchema","customise","event","copyInitialValues","copyListAttributes","copyListElements","toggleIncludeExclude","marginInline","border","itemLabelDescription","references","typeAttribute","otherAttribute","integerTypeSchema","optionalToMandatory","minInteger","typeError","integer","maxInteger","positive","IntegerTypeAttributeCustomiser","integerMinMax","customisedAttr","getAttributeNames","IntegerTypeAttribute","attCustomiser","JSON","stringify","placeholder","defaultProps","SwitchAttributeType","switchType","regex","transform","definition","enumeratedList","overflowY","customiseAttributeSchema","stringTo","pattern","AppRadioButton","onSelect","Radio","StringToPattern","onExit","FormHelperText","stringToEnumeratedListSchema","required","matches","textField","StringToListHeader","nameAlert","setNameAlert","enumList","val","enumerations","some","valuesCopy","formik","Snackbar","anchorOrigin","horizontal","vertical","autoHideDuration","row","StringToListBody","StringTypeAttributeCustomiser","customPattern","customEnumeration","enumeration","regexDefinition","StringTypeAttribute","table","ItemAttributes","baseRestriction","Transactions","sort","paddingInline","Chip","avatar","Avatar","itemLabel","itemDescription","LabelDescription","Badge","badgeContent","ListTypeAttributeCustomiser","ListTypeAttribute","list","darken","text","hover","selectAllText","TokenTypeCustomiser","tokens","token","tokenEle","SimpleTokenType","enumItem","tokeCustomiser","List","checkedIcon","icon","indeterminateIcon","indeterminate","el","copyOfTokens","enumerationAddRemove","SwitchSimpleType","switchBase","LixiItem","openToCustomise","setOpenToCustomise","setAlert","setLixiItem","setExclude","ele","subheader","r","paddingLeft","borderLeft","link","borderBottom","leafLink","IconBreadcrumbs","Breadcrumbs","separator","pathSections","section","preventDefault","pathArr","index","currentTarget","innerHTML","handleClick","iconClickHandler","renderRow","cloneElement","OuterElementContext","createContext","OuterElementType","forwardRef","ref","outerProps","useContext","ListboxComponent","other","itemData","Children","toArray","useTheme","smUp","useMediaQuery","up","noSsr","itemCount","itemSize","getChildSize","isValidElement","gridRef","resetAfterIndex","useResetCache","Provider","reduce","b","outerElementType","innerElementType","overscanCount","listbox","contrastText","SearchPath","setOptions","showSearchBox","setShowSearchBox","pathsCount","setPathsCount","_loading","newItem","getPathOfAllItemsInATransaction","Slide","mountOnEnter","unmountOnExit","timeout","Autocomplete","option","searchText","disableListWrap","autoComplete","includeInputInList","renderInput","InputProps","endAdornment","CircularProgress","renderOption","CreateInstructionTab","itemInstruction","setItemInstruction","newCustomiser","hidden","TabPanel","menuButton","SubSchemaMenu","transactionList","anchorEl","setAnchorEl","sortedTransactionList","s","innerText","aria-controls","aria-haspopup","Menu","keepMounted","Boolean","MenuItem","SelectTransactionDialog","preSubSchema","setPreSubSchema","a11yProps","NavTabs","trs","getTransactions","AppBar","Toolbar","src","alt","Tabs","centered","newValue","Tab","minHeight","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","themeMap","lightTheme","createMuiTheme","darkTheme","ThemeContext","themeName","ThemeProvider","_setThemeName","getThemeByName","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.92de2e66.chunk.js","sourcesContent":["export enum ItemActionType {\r\n  SEARCH_ITEM = \"search_item\",\r\n  SEARCH_ITEM_SUCCESS = \"search_item_success\",\r\n  SEARCH_ITEM_ERROR = \"search_item_error\",\r\n  REST_ITEM = \"resetItem\",\r\n  MARKED_FOR_DELETION = \"markedForDeletion\",\r\n}\r\n\r\nexport enum CustomizationActionType {\r\n  EXCLUDE = \"exclude\",\r\n  INCLUDE = \"include\",\r\n  CUSTOMISE_ELEMENT = \"customiseElement\",\r\n  UPLOAD_CUSTOMIZATION = \"uploadCustomization\",\r\n  UPLOAD_CUSTOMIZATION_SUCCESS = \"uploadCustomizationSuccess\",\r\n  UPLOAD_CUSTOMIZATION_ERROR = \"uploadCustomizationError\",\r\n  RESET_CUSTOMIZATION = \"resetCustomization\",\r\n  CUSTOMIZE_SUB_SCHEMA = \"customizeSubSchema\",\r\n  RESET_SUB_SCHEMA = \"resetSubSchema\",\r\n  OPTIONAL_TO_MANDATORY = \"optionalToMandatory\",\r\n  CUSTOM_HEADING = \"customHeading\",\r\n  CUSTOM_MAX_OCCURS = \"customMaxOccurs\",\r\n  CUSTOM_MIN_OCCURS = \"customMinOccurs\",\r\n  STRING_TO_LIST = \"stringToList\",\r\n  CUSTOM_DEFINITION = \"definition\",\r\n  STRING_TO_PATTERN = \"stringToPattern\",\r\n  EXCLUDE_SUB_ELEMENTS = \"excludeSubElements\",\r\n  REMOVE_DESCENDENT_CUSTOMISATION = \"removeDescendentCustomisation\",\r\n  UPDATE_CUSTOMISATION = \"updateCustomisation\",\r\n}\r\n\r\n\r\nexport enum SchemaActionType {\r\n  UPLOAD_SCHEMA = \"uploadSchema\",\r\n  UPLOAD_SCHEMA_SUCCESS = \"uploadSchemaSuccess\",\r\n  UPLOAD_SCHEMA_ERROR = \"uploadSchemaError\",\r\n  RESET_SCHEMA = \"reset\",\r\n}\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    tabPanelChildren: {\r\n      padding: theme.spacing(3),\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        padding: theme.spacing(0),\r\n      },\r\n    },\r\n    appBar: {\r\n      backgroundColor: theme.palette.primary.dark,\r\n    },\r\n  })\r\n);\r\n","import { createStyles, makeStyles, Theme } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100%\",\r\n      padding: 0,\r\n      margin: 0,\r\n      // margin: theme.spacing(1),\r\n    },\r\n    stepper:  {\r\n      padding:  \"0.5rem\",\r\n      margin:  \"0.5rem\",\r\n      [theme.breakpoints.down(\"xs\")]:{\r\n        padding:  \"0.2rem\",\r\n        margin:  \"0.2rem\"\r\n      }\r\n    },\r\n    button: {\r\n      marginTop: theme.spacing(1),\r\n      marginRight: theme.spacing(1),\r\n    },\r\n    actionsContainer: {\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    resetContainer: {\r\n      padding: theme.spacing(0, 2, 2),\r\n    },\r\n    customisationContainer: {\r\n      padding: theme.spacing(2, 2, 2),\r\n      margin: theme.spacing(1, 0, 1),\r\n    },\r\n  })\r\n);\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width:\"inherit\",\r\n      \"& > *\": {\r\n        margin: theme.spacing(1),\r\n      },\r\n    },\r\n    input: {\r\n      display: \"none\",\r\n    },\r\n    findPageIcon: {\r\n      color: theme.palette.primary.light,\r\n    },\r\n\r\n    loadIcon:{\r\n      color: theme.palette.primary.main,\r\n\r\n    },\r\n\r\n    fileName: {\r\n      backgroundColor: theme.palette.primary.light,\r\n      width:\"max-content\",\r\n      color: theme.palette.getContrastText(theme.palette.primary.light),\r\n      padding: theme.spacing(0.75),\r\n      borderRadius: \"0.2rem\",\r\n      \"&:hover\": {\r\n        cursor: \"pointer\",\r\n      },\r\n    },\r\n    label:{ \r\n      display: \"flex\", alignItems: \"center\" \r\n    },\r\n    uploadButton:{\r\n      marginLeft: theme.spacing(1), \r\n      minWidth: \"7rem\",\r\n     \r\n    },\r\n   \r\n  })\r\n);\r\n","import * as React from \"react\";\r\nimport { useStyles } from \"./uploadFileStyle\";\r\nimport { IconButton, Tooltip, Typography } from \"@material-ui/core\";\r\nimport PublishTwoToneIcon from '@material-ui/icons/PublishTwoTone';\r\nimport FindInPageTwoToneIcon from '@material-ui/icons/FindInPageTwoTone';\r\nimport Grid from \"@material-ui/core/Grid\";\r\ninterface FormProps {\r\n  description: string;\r\n  saveFace: any; //(fileName:Blob) => Promise<void>, // callback taking a string and then dispatching a store actions\r\n}\r\n\r\nexport const UploadFile: React.FC<FormProps> = ({ saveFace, description }) => {\r\n  const classes = useStyles();\r\n  const [selectedFile, setSelectedFile] = React.useState<File>();\r\n  const handleCapture = ({ target }: any) => {\r\n    console.log(\"file changed\");;\r\n    setSelectedFile(target.files[0]);\r\n    saveFace(target.files[0])\r\n  };\r\n\r\n  // const handleSubmit = React.useCallback(() => {\r\n  //   saveFace(selectedFile);\r\n  // },  [saveFace, selectedFile]);;\r\n\r\n  // React.useEffect(() => {\r\n  //   if (selectedFile?.name) {\r\n  //     console.log(\"loading...\");\r\n  //     saveFace(selectedFile);\r\n  //   }\r\n  // }, [saveFace, selectedFile,selectedFile?.name]);\r\n\r\n  return (\r\n    <div style={{ width: \"100%\" }}>\r\n      <input\r\n        accept=\".xml,.xsd\"\r\n        className={classes.input}\r\n        id=\"document\"\r\n        type=\"file\"\r\n        onChange={handleCapture}\r\n      />\r\n      <Grid\r\n        wrap=\"nowrap\"\r\n        alignContent=\"flex-start\"\r\n        container\r\n        spacing={1}\r\n        alignItems=\"center\"\r\n      >\r\n        <Grid item>\r\n          <Tooltip title=\"\">\r\n            <label className={classes.label} htmlFor=\"document\">\r\n              <IconButton\r\n                className={classes.findPageIcon}\r\n                color=\"primary\"\r\n                aria-label=\"upload picture\"\r\n                component=\"span\"\r\n                title=\"Browse\"\r\n              >\r\n                <FindInPageTwoToneIcon fontSize=\"large\" />\r\n              </IconButton>\r\n              <Typography variant=\"body2\" className={classes.fileName} noWrap>\r\n                Choose the file\r\n              </Typography>\r\n            </label>\r\n          </Tooltip>\r\n        </Grid>\r\n        {/* <Grid item>\r\n          {selectedFile?.name ? (\r\n            <IconButton\r\n              className={classes.loadIcon}\r\n              // onClick={() => handleSubmit()}\r\n              color=\"primary\"\r\n              aria-label=\"upload file\"\r\n              component=\"span\"\r\n              title=\"Load\"\r\n            >\r\n              <PublishTwoToneIcon fontSize=\"large\" />\r\n            </IconButton>\r\n          ) : undefined}\r\n        </Grid> */}\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n","import { ItemActionType } from \"../action-types\";\r\nimport { ItemAction } from \"../actions/item-actions\";\r\n\r\ninterface ItemState {\r\n  error: string | null;\r\n  data: Element | null;\r\n  loading: boolean;\r\n  markedForDeletionList: string[] | undefined;\r\n}\r\n\r\nconst initialState: ItemState = {\r\n  data: null,\r\n  error: null,\r\n  loading: false,\r\n  markedForDeletionList: undefined,\r\n};\r\nconst reducer = (\r\n  state: ItemState = initialState,\r\n  action: ItemAction\r\n): ItemState => {\r\n  switch (action.type) {\r\n    case ItemActionType.SEARCH_ITEM:\r\n      return {\r\n        loading: true,\r\n        error: null,\r\n        data: null,\r\n        markedForDeletionList: undefined,\r\n      };\r\n    case ItemActionType.SEARCH_ITEM_SUCCESS:\r\n      return {\r\n        loading: false,\r\n        error: null,\r\n        data: action.payload,\r\n        markedForDeletionList: undefined,\r\n      };\r\n    case ItemActionType.SEARCH_ITEM_ERROR:\r\n      return {\r\n        loading: false,\r\n        error: action.payload,\r\n        data: null,\r\n        markedForDeletionList: undefined,\r\n      };\r\n    case ItemActionType.REST_ITEM:\r\n      return { loading: false, error: null, data: null,markedForDeletionList:undefined  };\r\n    case ItemActionType.MARKED_FOR_DELETION:\r\n      return { ...state,markedForDeletionList:action.payload  };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","export enum LixiAttributeEnum {\r\n  type = \"type\",\r\n  name = \"name\",\r\n  use = \"use\",\r\n  minOccurs = \"minOccurs\",\r\n  maxOccurs = \"maxOccurs\",\r\n  value = \"value\",\r\n  base = \"base\",\r\n}\r\n\r\nexport enum LixiTagEnum {\r\n  element = \"xs:element\",\r\n  annotation = \"xs:annotation\",\r\n  complexType = \"xs:complexType\",\r\n  choice = \"xs:choice\",\r\n  sequence = \"xs:sequence\",\r\n  attribute = \"xs:attribute\",\r\n  simpleType = \"xs:simpleType\",\r\n  restriction = \"xs:restriction\",\r\n  documentation = \"xs:documentation\",\r\n  path = \"lx:path\",\r\n  label = \"lx:label\",\r\n  transactions = \"li:transactions\",\r\n  enumeration = \"xs:enumeration\",\r\n  target = \"lx:target\",\r\n  references = \"lx:references\",\r\n}\r\n\r\nexport enum LixiLocalNameEnum {\r\n  element = \"element\",\r\n  complexType = \"complexType\",\r\n  choice = \"choice\",\r\n  sequence = \"sequence\",\r\n  attribute = \"attribute\",\r\n  simpleType = \"simpleType\",\r\n  restriction = \"restriction\",\r\n  annotation = \"annotation\",\r\n  documentation = \"documentation\",\r\n  path = \"path\",\r\n  label = \"label\",\r\n  transactions = \"transactions\",\r\n  enumeration = \"enumeration\",\r\n}\r\n","import { CustomizationActionType } from \"../action-types\";\r\nimport { CustomizationAction, SubSchema } from \"../actions/customiser-actions\";\r\n\r\ninterface CustomizationState {\r\n  customization: Element | undefined;\r\n  // customisedItem: Element | undefined;\r\n  loading: boolean;\r\n  error: string | null;\r\n  subSchema: SubSchema | undefined;\r\n  // customHeading?: string | undefined;\r\n  metaData: File | undefined;\r\n}\r\n\r\nconst initialState: CustomizationState = {\r\n  customization: undefined,\r\n  // customisedItem: undefined,\r\n  subSchema: { transactionType: undefined, transactionVersion: undefined },\r\n  error: null,\r\n  loading: false,\r\n  metaData: undefined,\r\n};\r\n\r\nconst reducer = (\r\n  state: CustomizationState = initialState,\r\n  action: CustomizationAction\r\n): CustomizationState => {\r\n  switch (action.type) {\r\n    case CustomizationActionType.UPLOAD_CUSTOMIZATION:\r\n      return {\r\n        ...state,\r\n        customization: undefined,\r\n        // customisedItem: undefined,\r\n        loading: true,\r\n        error: null,\r\n      };\r\n    case CustomizationActionType.UPLOAD_CUSTOMIZATION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        customization: action.payload.doc,\r\n        // customisedItem: undefined,\r\n        metaData: action.payload.file,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n    case CustomizationActionType.UPLOAD_CUSTOMIZATION_ERROR:\r\n      return {\r\n        ...state,\r\n        customization: undefined,\r\n        metaData: undefined,\r\n        // customisedItem: undefined,\r\n        loading: false,\r\n        error: action.payload,\r\n      };\r\n    case CustomizationActionType.CUSTOMIZE_SUB_SCHEMA:\r\n      return { ...state, subSchema: action.payload };\r\n    case CustomizationActionType.RESET_SUB_SCHEMA:\r\n      return {\r\n        ...state,\r\n        // customHeading: undefined,\r\n        subSchema: undefined,\r\n        customization: undefined,\r\n        // customisedItem: undefined,\r\n      };\r\n    case CustomizationActionType.UPDATE_CUSTOMISATION:\r\n      return {\r\n        ...state,\r\n        customization: action.payload,\r\n      };\r\n    case CustomizationActionType.RESET_CUSTOMIZATION:\r\n      return {\r\n        ...state,\r\n        customization: undefined,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { SchemaActionType } from \"../action-types\";\r\nimport { SchemaActions } from \"../actions/schema-actions\";\r\n\r\ninterface SchemaState {\r\n  loading: boolean;\r\n  schema: Document | undefined;\r\n  error: string | null;\r\n  metaData: File | undefined;\r\n}\r\n\r\nconst initialState: SchemaState = {\r\n  error: null,\r\n  loading: false,\r\n  schema: undefined,\r\n  metaData: undefined,\r\n};\r\n\r\nconst reducer = (\r\n  state: SchemaState = initialState,\r\n  action: SchemaActions\r\n): SchemaState => {\r\n  switch (action.type) {\r\n    case SchemaActionType.UPLOAD_SCHEMA:\r\n      return {\r\n        loading: true,\r\n        schema: undefined,\r\n        metaData: undefined,\r\n        error: null,\r\n      };\r\n    case SchemaActionType.UPLOAD_SCHEMA_SUCCESS:\r\n      return {\r\n        loading: false,\r\n        error: null,\r\n        metaData: action.payload.file,\r\n        schema: action.payload.doc,\r\n      };\r\n    case SchemaActionType.UPLOAD_SCHEMA_ERROR:\r\n      return {\r\n        loading: false,\r\n        schema: undefined,\r\n        metaData: undefined,\r\n        error: action.payload,\r\n      };\r\n    case SchemaActionType.RESET_SCHEMA:\r\n      return {\r\n        loading: false,\r\n        schema: undefined,\r\n        metaData: undefined,\r\n        error: null,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { combineReducers } from \"redux\";\r\n\r\nimport itemReducer from \"./ItemReducer\";\r\nimport customiserReducer from \"./customiserReducer\";\r\nimport SchemaReducer from \"./schemaReducer\";\r\n\r\nconst reducers = combineReducers({\r\n  item: itemReducer,\r\n  customizer: customiserReducer,\r\n  schema: SchemaReducer,\r\n});\r\n\r\nexport default reducers;\r\nexport type RootState = ReturnType<typeof reducers>;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"./reducers\";\r\n\r\nexport const store = createStore(reducer, {}, applyMiddleware(thunk));\r\n","import { LixiTagEnum } from \"../enums/lixiEnums\";\r\ntype NameSpace = {\r\n  [ns: string]: string;\r\n};\r\n\r\nexport const nameSpaceResolver: XPathNSResolver = (\r\n  prefix: string | null\r\n): string | null => {\r\n  const ns: NameSpace = {\r\n    xs: \"http://www.w3.org/2001/XMLSchema\",\r\n    lx: \"lixi.org.au/schema/appinfo_elements\",\r\n    li: \"lixi.org.au/schema/appinfo_instructions\",\r\n  };\r\n  return prefix ? ns[prefix] : null;\r\n};\r\n\r\n// const parser = new DOMParser();\r\n// export const parsedXml = parser.parseFromString(master_schema, \"text/xml\");\r\n\r\n// export const path = parsedXml.evaluate(\r\n//   \"//lx:path[1]/text()\",\r\n//   parsedXml,\r\n//   nameSpaceResolver,\r\n//   XPathResult.UNORDERED_NODE_ITERATOR_TYPE,\r\n//   null\r\n// );\r\n\r\n// export const result = parsedXml.evaluate(\r\n//   \"/xs:schema/xs:element\",\r\n//   parsedXml,\r\n//   nameSpaceResolver,\r\n//   XPathResult.ANY_TYPE,\r\n//   null\r\n// );\r\n\r\n// export const packageElement = parsedXml.evaluate(\r\n//   \"/xs:schema/xs:element[@name='Package']\",\r\n//   parsedXml,\r\n//   nameSpaceResolver,\r\n//   XPathResult.ANY_TYPE,\r\n//   null\r\n// );\r\n\r\nexport class XmlUtil {\r\n  private parsedDoc: Document;\r\n  constructor(parsedDoc: Document) {\r\n    this.parsedDoc = parsedDoc;\r\n  }\r\n\r\n  getPathOfAllElements() {\r\n    const elementsPath = [];\r\n    const elements = this.parsedDoc.getElementsByTagName(LixiTagEnum.element);\r\n    for (const e of Array.prototype.fill(elements)) {\r\n      elementsPath.push(\r\n        e.getElementsByTagName(LixiTagEnum.path)[0].textContent\r\n      );\r\n    }\r\n    return elementsPath;\r\n  }\r\n\r\n  getPathOfAllItems() {\r\n    const itemsPath: string[] = [];\r\n    const result = this.evaluateXpath(\r\n      \"//lx:path[text()]/text()\",\r\n      this.parsedDoc\r\n    );\r\n    let path = result?.iterateNext();\r\n    while (path) {\r\n      itemsPath.push(path.textContent as string);\r\n      path = result?.iterateNext();\r\n    }\r\n\r\n    return itemsPath;\r\n  }\r\n\r\n  getPathOfAllItemsInATransaction(subSchema: string) {\r\n    const itemsPath: string[] = [];\r\n    const individualStandard =\r\n      this.getSchemaDetails()?.getAttribute(\"transaction\");\r\n    if (individualStandard) {\r\n      const result = this.evaluateXpath(\"//lx:path\", this.parsedDoc);\r\n      let path = result?.iterateNext();\r\n      while (path) {\r\n        itemsPath.push(path.textContent as string);\r\n        path = result?.iterateNext();\r\n      }\r\n      return itemsPath;\r\n    }\r\n    const result = this.evaluateXpath(\r\n      \"//lx:path/following-sibling::li:transactions\",\r\n      this.parsedDoc\r\n    );\r\n    let transaction = result?.iterateNext();\r\n    while (transaction) {\r\n      const transactions = transaction.textContent?.split(\",\");\r\n      if (transactions && transactions.includes(subSchema)) {\r\n        itemsPath.push(\r\n          transaction.parentElement?.children[0].textContent as string\r\n        );\r\n      }\r\n      transaction = result?.iterateNext();\r\n    }\r\n    return itemsPath;\r\n  }\r\n\r\n  evaluateXpath(xpath: string, contextNode: Node | Document): XPathResult {\r\n    contextNode = !contextNode ? this.parsedDoc : contextNode;\r\n    return this.parsedDoc.evaluate(\r\n      xpath,\r\n      contextNode,\r\n      nameSpaceResolver,\r\n      XPathResult.ANY_TYPE,\r\n      null\r\n    );\r\n  }\r\n\r\n  getItemByPath(path: string): Element | undefined | null {\r\n    const xpathResult = this.parsedDoc.evaluate(\r\n      `//lx:path[text()='${path}'][1]`,\r\n      this.parsedDoc,\r\n      nameSpaceResolver,\r\n      XPathResult.ANY_UNORDERED_NODE_TYPE,\r\n      null\r\n    );\r\n    return xpathResult.singleNodeValue?.parentElement?.parentElement\r\n      ?.parentElement;\r\n  }\r\n  getSchemaDetails(): Element | undefined {\r\n    const xpathResult = this.parsedDoc.evaluate(\r\n      \"//lx:schemadetail\",\r\n      this.parsedDoc,\r\n      nameSpaceResolver,\r\n      XPathResult.ANY_UNORDERED_NODE_TYPE,\r\n      null\r\n    );\r\n    if (xpathResult.singleNodeValue) {\r\n      return xpathResult.singleNodeValue as Element;\r\n    }\r\n    // return xpathResult.singleNodeValue?.parentElement?.children[0];\r\n  }\r\n\r\n  getTransactions() {\r\n    const transaction: {\r\n      transactionType: string;\r\n      transactionVersion: string;\r\n    }[] = [];\r\n    const standard = this.getSchemaDetails()?.getAttribute(\"transaction\");\r\n    const version = this.getSchemaDetails()?.getAttribute(\"version\");\r\n\r\n    if (standard && version) {\r\n      transaction.push({\r\n        transactionType: standard,\r\n        transactionVersion: version,\r\n      });\r\n      return transaction;\r\n    }\r\n    const appInfo = this.getSchemaDetails()?.parentElement?.children;\r\n    Array.prototype.map.call(appInfo, (i: Element) => {\r\n      if (i.localName === \"subschema\") {\r\n        transaction?.push({\r\n          transactionType: i.getAttribute(\"transactiontype\") as string,\r\n          transactionVersion: i.getAttribute(\"version\") as string,\r\n        });\r\n      }\r\n    });\r\n    return transaction;\r\n  }\r\n}\r\n","import { ItemActionType } from \"../action-types\";\r\n// import { master_schema } from \"../../assets/LIXI-Master-Schema\";\r\n// import * as JsSearch from \"js-search\";\r\nimport { Dispatch } from \"redux\";\r\nimport { \r\n  // parsedXml, \r\n  XmlUtil \r\n} from \"../../util/nameSpaces\";\r\nimport { ItemAction } from \"../actions/item-actions\";\r\nimport { RootState } from \"../reducers\";\r\n\r\nexport const searchItem = (item: string) => {\r\n  const lixiItem = (schema: Document): Promise<Element | undefined | null> => {\r\n    return new Promise((resolves, rejects) => {\r\n      const xmlUtile = new XmlUtil(schema);\r\n      if (item) {\r\n        resolves(xmlUtile.getItemByPath(item));\r\n      }\r\n    });\r\n  };\r\n  return async (dispatch: Dispatch<ItemAction>, getState: () => RootState) => {\r\n    \r\n    dispatch({\r\n      type: ItemActionType.SEARCH_ITEM,\r\n    });\r\n    try {\r\n      const sch = getState().schema.schema;;\r\n      if (!sch)  return;;\r\n      const element = (await lixiItem(sch)) as Element;\r\n      dispatch({\r\n        type: ItemActionType.SEARCH_ITEM_SUCCESS,\r\n        payload: element,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: ItemActionType.SEARCH_ITEM_ERROR,\r\n        payload: err.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const resetItem = () => {\r\n  return (dispatch: Dispatch<ItemAction>) => {\r\n    dispatch({\r\n      type: ItemActionType.REST_ITEM,\r\n    });\r\n  };\r\n};\r\n\r\nexport const markedForDeletion = (markedForDeletionList: string[]) => {\r\n  return (dispatch: Dispatch<ItemAction>) => {\r\n    dispatch({\r\n      type: ItemActionType.MARKED_FOR_DELETION,\r\n      payload: [...markedForDeletionList],\r\n    });\r\n  };\r\n};\r\n","import { CustomizationActionType } from \"../action-types\";\r\nimport { CustomizationAction, SubSchema } from \"../actions/customiser-actions\";\r\nimport { Dispatch } from \"redux\";\r\nimport { RootState } from \"..\";\r\n\r\n\r\nexport const customizeSubSchema = (subSchema: SubSchema) => {\r\n  return (\r\n    dispatch: Dispatch<CustomizationAction>,\r\n    getState: () => RootState\r\n  ) => {\r\n    dispatch({\r\n      type: CustomizationActionType.CUSTOMIZE_SUB_SCHEMA,\r\n      payload: subSchema,\r\n    });\r\n  };\r\n};\r\n\r\nexport const resetCustomizeSubSchema = () => {\r\n  return (\r\n    dispatch: Dispatch<CustomizationAction>,\r\n    getState: () => RootState\r\n  ) => {\r\n    dispatch({\r\n      type: CustomizationActionType.RESET_SUB_SCHEMA,\r\n    });\r\n  };\r\n};\r\nexport const resetCustomization = () => {\r\n  return (\r\n    dispatch: Dispatch<CustomizationAction>,\r\n    getState: () => RootState\r\n  ) => {\r\n    dispatch({\r\n      type: CustomizationActionType.RESET_CUSTOMIZATION,\r\n    });\r\n  };\r\n};\r\n\r\nexport const uploadExistingCustomization = (file: File) => {\r\n  const readExistingCustomization = (): Promise<ArrayBuffer | string | null> => {\r\n    return new Promise((resolves, rejects) => {\r\n      let reader = new FileReader();\r\n      reader.onload = () => {\r\n        resolves(reader.result);\r\n      };\r\n      reader.onerror = rejects;\r\n      reader.readAsText(file);\r\n    });\r\n  };\r\n\r\n  const parsExistingCustomization = (customization: string): Promise<Document> => {\r\n    return new Promise((resolves, rejects) => {\r\n      const parser = new DOMParser();\r\n      const parsedCustomization = parser.parseFromString(\r\n        customization,\r\n        \"text/xml\"\r\n      );\r\n      resolves(parsedCustomization);\r\n    });\r\n  };\r\n\r\n  return async (dispatch: Dispatch<CustomizationAction>) => {\r\n    dispatch({\r\n      type: CustomizationActionType.UPLOAD_CUSTOMIZATION,\r\n    });\r\n    try {\r\n      const existingSchema = await readExistingCustomization();\r\n      if (existingSchema) {\r\n        const existingCustomization = await parsExistingCustomization(existingSchema?.toString());\r\n        dispatch({\r\n          type: CustomizationActionType.UPLOAD_CUSTOMIZATION_SUCCESS,\r\n          payload: {\r\n            doc: existingCustomization.getElementsByTagName(\r\n              \"Customisations\"\r\n            )[0],\r\n            file: file,\r\n          },\r\n        });\r\n      }\r\n    } catch (err) {\r\n      dispatch({\r\n        type: CustomizationActionType.UPLOAD_CUSTOMIZATION_ERROR,\r\n        payload: err.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const updateCustomisation = (customisation: Element) => {\r\n  return (dispatch: Dispatch<CustomizationAction>) => {\r\n    dispatch({\r\n      type: CustomizationActionType.UPDATE_CUSTOMISATION,\r\n      payload: customisation,\r\n    });\r\n  };\r\n};","import { SchemaActionType } from \"../action-types\";\r\n// import { master_schema } from \"../../assets/LIXI-Master-Schema\";\r\n// import * as JsSearch from \"js-search\";\r\nimport { Dispatch } from \"redux\";\r\n// import { parsedXml, XmlUtil } from \"../../util/nameSpaces\";\r\nimport { SchemaActions } from \"../actions/schema-actions\";\r\nimport { RootState } from \"../reducers\";\r\n// import { render } from \"@testing-library/react\";\r\n\r\nexport const uploadBaseSchema = (file: File) => {\r\n  const readBaseSchema = (): Promise<ArrayBuffer | string | null> => {\r\n    return new Promise((resolves, rejects) => {\r\n      let reader = new FileReader();\r\n      reader.onload = () => {\r\n        resolves(reader.result);\r\n      };\r\n      reader.onerror = rejects;\r\n      reader.readAsText(file);\r\n    });\r\n  };\r\n\r\n  const parsBaseSchema = (baseSchema: string): Promise<Document> => {\r\n    return new Promise((resolves, rejects) => {\r\n      const parser = new DOMParser();\r\n      const parsedBaseSchema = parser.parseFromString(baseSchema, \"text/xml\");\r\n      resolves(parsedBaseSchema);\r\n    });\r\n  };\r\n\r\n  return async (\r\n    dispatch: Dispatch<SchemaActions>,\r\n    getState: () => RootState\r\n  ) => {\r\n    dispatch({\r\n      type: SchemaActionType.UPLOAD_SCHEMA,\r\n    });\r\n    try {\r\n      const baseSchema = await readBaseSchema();\r\n      if (baseSchema) {\r\n        const schema = await parsBaseSchema(baseSchema?.toString());\r\n        dispatch({\r\n          type: SchemaActionType.UPLOAD_SCHEMA_SUCCESS,\r\n          payload: { doc: schema, file: file },\r\n        });\r\n      }\r\n    } catch (err) {\r\n      dispatch({\r\n        type: SchemaActionType.UPLOAD_SCHEMA_ERROR,\r\n        payload: err.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const resetBaseSchema = () => {\r\n  return (dispatch: Dispatch<SchemaActions>) => {\r\n    try {\r\n      dispatch({\r\n        type: SchemaActionType.RESET_SCHEMA,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: SchemaActionType.UPLOAD_SCHEMA_ERROR,\r\n        payload: err.message,\r\n      });\r\n    }\r\n  };\r\n};\r\n","import { useDispatch } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { actionCreator } from \"../redux\";\r\n\r\nexport const useAction = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  return bindActionCreators(actionCreator, dispatch);\r\n};\r\n","import { useSelector, TypedUseSelectorHook } from \"react-redux\";\r\nimport { RootState } from \"../redux\";\r\n\r\nexport const useTypedSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    uploadContainer: {\r\n      maxWidth: \"75ch\",\r\n      minWidth: \"15rem\",\r\n      alignItems: \"center\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      marginTop: \"1rem\",\r\n      padding: \"0.2rem 0.5rem\",\r\n      height: \"max-content\",\r\n      backgroundColor: \"#fffde7\",\r\n    },\r\n    upload: {\r\n      alignItems: \"center\",\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      width: \"80%\",\r\n      backgroundColor: \"#fffde7\",\r\n    },\r\n    actionsContainer: {\r\n      margin: theme.spacing(1, 0, 1, 0),\r\n    },\r\n    nextButton: {\r\n      marginLeft: \"0.5rem\",\r\n    },\r\n    fileDetailHeaderRow:{\r\n      backgroundColor:theme.palette.primary.main,\r\n    },\r\n    fileDetailHeaderCell:{\r\n      \r\n      color:theme.palette.getContrastText(theme.palette.primary.main)\r\n    }\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography/Typography\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport Box from \"@material-ui/core/Box\";\r\n// import { SubSchemaMenu } from \"../../sub-schema-menu/SubSchemaMenu\";\r\nimport { UploadFile } from \"../../upload-file/UploadFile\";\r\nimport { useAction } from \"../../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../../hooks/useTypeSelector\";\r\n\r\nimport { useStyles } from \"./uploadSchemaStepStyle\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\n\r\ninterface IUploadSchemaStep {\r\n  handelNextClicked: () => void;\r\n}\r\n\r\nexport const UploadSchemaStep: React.FC<IUploadSchemaStep> = ({\r\n  handelNextClicked,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { uploadBaseSchema } = useAction();\r\n  const { schema,metaData } = useTypedSelector((state) => state.schema);\r\n\r\n  const fileSize = React.useMemo(()=>{\r\n    if (!metaData?.size) return\r\n    if (metaData?.size === 0) return '0 Bytes';\r\n\r\n    const k = 1024;\r\n    \r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n    const i = Math.floor(Math.log(metaData?.size) / Math.log(k));\r\n\r\n    return parseFloat((metaData?.size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  },[metaData?.size])\r\n\r\n  return (\r\n    <>\r\n      <Box maxWidth=\"75ch\">\r\n        <Typography>\r\n          LIXI base schema must be uploaded.\r\n        </Typography>\r\n      </Box>\r\n      <Paper className={classes.uploadContainer}>\r\n       \r\n          <Grid container alignItems=\"center\">\r\n            <Grid item xs={12} sm={12}>\r\n              <UploadFile\r\n                saveFace={(file: File) => uploadBaseSchema(file)}\r\n                description={\"Click to upload LIXI Base/Transaction Schema\"}\r\n              />\r\n            </Grid>\r\n            \r\n          <Collapse in={!!metaData}>\r\n            <Grid item xs={12}>\r\n              <TableContainer component={Paper}>\r\n              <Table  aria-label=\"file table\" size=\"small\">\r\n                <caption>File Details</caption>\r\n                  <TableHead className={classes.fileDetailHeaderRow}>\r\n                    <TableRow  >\r\n                      <TableCell className={classes.fileDetailHeaderCell} variant=\"head\" align=\"left\" >Name</TableCell>\r\n                      <TableCell className={classes.fileDetailHeaderCell} align=\"left\">Last Modified</TableCell>\r\n                      <TableCell className={classes.fileDetailHeaderCell} align=\"center\">Size</TableCell>\r\n                      <TableCell className={classes.fileDetailHeaderCell} align=\"center\">Type</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow >\r\n                      <TableCell scope=\"row\" align=\"left\">{metaData?.name}</TableCell>\r\n                      <TableCell scope=\"row\" align=\"left\">{metaData?.lastModified?new Date(metaData?.lastModified).toString():undefined}</TableCell>\r\n                      <TableCell scope=\"row\" align=\"center\">{fileSize}</TableCell>\r\n                      <TableCell scope=\"row\" align=\"center\">{metaData?.type}</TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n            </Grid>\r\n            <Grid item xs={12} sm={2}>\r\n                <div className={classes.actionsContainer}>\r\n                  <Button\r\n                    size=\"small\"\r\n                    endIcon={<ArrowForwardIosIcon />}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={handelNextClicked}\r\n                    disabled={schema ? false : true}\r\n                    className={classes.nextButton}\r\n                  >\r\n                    Next\r\n                  </Button>\r\n                </div>\r\n              </Grid>\r\n          </Collapse>\r\n            </Grid>\r\n        \r\n      </Paper>\r\n    </>\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    uploadContainer: {\r\n      maxWidth: \"75ch\",\r\n      minWidth: \"15rem\",\r\n      alignItems: \"center\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      marginTop: \"1rem\",\r\n      padding: \"0.2rem 0.5rem\",\r\n      height: \"max-content\",\r\n      backgroundColor: \"#fffde7\",\r\n    },\r\n    upload: {\r\n      alignItems: \"center\",\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      width: \"80%\",\r\n      backgroundColor: \"#fffde7\",\r\n    },\r\n    actionsContainer: {\r\n      display:\"flex\",\r\n      margin: theme.spacing(1, 0, 1, 0),\r\n      [theme.breakpoints.down(\"xs\")]:{\r\n        margin: theme.spacing(1, 1, 1, 1),\r\n        flexDirection:\"column\",\r\n      }\r\n      \r\n      // width: \"max-content\",\r\n    },\r\n    button: {\r\n      marginLeft: \"0.1rem\",\r\n      [theme.breakpoints.down(\"xs\")]:{\r\n        marginTop: \"0.1rem\",\r\n\r\n      }\r\n    },\r\n    fileDetailHeaderRow:{\r\n      backgroundColor:theme.palette.primary.main,\r\n    },\r\n    fileDetailHeaderCell:{\r\n      \r\n      color:theme.palette.getContrastText(theme.palette.primary.main)\r\n    }\r\n    \r\n  })\r\n);\r\n","import React from \"react\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ArrowBackIosIcon from \"@material-ui/icons/ArrowBackIos\";\r\n// import ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport { useAction } from \"../../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../../hooks/useTypeSelector\";\r\nimport { UploadFile } from \"../../upload-file/UploadFile\";\r\nimport { useStyles } from \"./uploadCustomisationInstructionStyle\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Grid from \"@material-ui/core/Grid/Grid\";\r\n// import ButtonGroup from \"@material-ui/core/ButtonGroup\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\n\r\ninterface IUploadCustomisationInstruction {\r\n  handelBack: () => void;\r\n  handelSkip: () => void;\r\n  handelNext: () => void;\r\n  activeStep: number;\r\n}\r\n\r\nexport const UploadCustomisationInstruction: React.FC<IUploadCustomisationInstruction> = ({\r\n  handelBack,\r\n  handelSkip,\r\n  handelNext,\r\n  activeStep,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { uploadExistingCustomization } = useAction();\r\n  const { metaData } = useTypedSelector((state) => state.customizer);\r\n\r\n  const fileSize = React.useMemo(()=>{\r\n    if (!metaData?.size) return\r\n    if (metaData?.size === 0) return '0 Bytes';\r\n\r\n    const k = 1024;\r\n    \r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n    const i = Math.floor(Math.log(metaData?.size) / Math.log(k));\r\n\r\n    return parseFloat((metaData?.size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  },[metaData?.size])\r\n  return (\r\n    <>\r\n      <Box maxWidth=\"75ch\">\r\n        <Typography>\r\n          If you already have an existing customisation instruction file you can\r\n          upload it here, otherwise a new customisation instruction file will be\r\n          created.\r\n        </Typography>\r\n      </Box>\r\n      <Paper className={classes.uploadContainer}>\r\n        \r\n          <Grid container alignItems=\"center\">\r\n            <Grid item xs={12} sm={12}>\r\n              <UploadFile\r\n                saveFace={(file: File) => uploadExistingCustomization(file)}\r\n                description={\"Click to upload an existing customisation file\"}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n            <Collapse in={!!metaData}>\r\n            <TableContainer component={Paper}>\r\n            <Table  aria-label=\"file table\" size=\"small\">\r\n              <caption>File Details</caption>\r\n                <TableHead className={classes.fileDetailHeaderRow}>\r\n                  <TableRow  >\r\n                    <TableCell className={classes.fileDetailHeaderCell} variant=\"head\" align=\"left\" >Name</TableCell>\r\n                    <TableCell className={classes.fileDetailHeaderCell} align=\"left\">Last Modified</TableCell>\r\n                    <TableCell className={classes.fileDetailHeaderCell} align=\"center\">Size</TableCell>\r\n                    <TableCell className={classes.fileDetailHeaderCell} align=\"center\">Type</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  <TableRow >\r\n                    <TableCell scope=\"row\" align=\"left\">{metaData?.name}</TableCell>\r\n                    <TableCell scope=\"row\" align=\"left\">{metaData?.lastModified?new Date(metaData?.lastModified).toString():undefined}</TableCell>\r\n                    <TableCell scope=\"row\" align=\"center\">{fileSize}</TableCell>\r\n                    <TableCell scope=\"row\" align=\"center\">{metaData?.type}</TableCell>\r\n                  </TableRow>\r\n                </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n                </Collapse>\r\n          </Grid>\r\n            <Grid item>\r\n                  <div className={classes.actionsContainer}>\r\n                    <Button\r\n                      startIcon={<ArrowBackIosIcon />}\r\n                      size=\"small\"\r\n                      disabled={activeStep === 0}\r\n                      onClick={handelBack}\r\n                      className={classes.button}\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                    >\r\n                      Back\r\n                    </Button>\r\n                  </div>\r\n                </Grid>\r\n          </Grid>\r\n        \r\n      </Paper>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Stepper from \"@material-ui/core/Stepper\";\r\nimport Step from \"@material-ui/core/Step\";\r\nimport StepLabel from \"@material-ui/core/StepLabel\";\r\nimport StepContent from \"@material-ui/core/StepContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useStyles } from \"./verticalStepperStyle\";\r\n// import { useAction } from \"../../hooks/useActions\";\r\nimport { UploadSchemaStep } from \"./upload-schema-step/UploadSchemaStep\";\r\nimport { UploadCustomisationInstruction } from \"./upload-customisation-instruction/UploadCustomisationInstruction\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nexport const VerticalLinearStepper: React.FC = () => {\r\n  const labelProps: { optional?: React.ReactNode } = {\r\n    optional: <Typography variant=\"caption\">Optional</Typography>,\r\n  };\r\n \r\n\r\n  // const {\r\n  //   resetBaseSchema,\r\n  //   resetItem,\r\n  //   resetCustomizeSubSchema,\r\n  // } = useAction();\r\n\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const [stepProps, setStepProp] = React.useState<{ completed: boolean } | {}>(\r\n    {}\r\n  );\r\n  const classes = useStyles();\r\n  const handleNext = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  // const handleReset = () => {\r\n  //   setActiveStep(0);\r\n  //   setStepProp({});\r\n  //   resetBaseSchema();\r\n  //   resetItem();\r\n  //   resetCustomizeSubSchema();\r\n  // };\r\n\r\n  const handleSkip = () => {\r\n    setStepProp({ completed: false });\r\n    handleNext();\r\n  };\r\n  \r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline/>\r\n      <Stepper className={classes.stepper} activeStep={activeStep} orientation=\"vertical\">\r\n        <Step>\r\n        <StepLabel>{\"Upload LIXI Base Schema\"}</StepLabel>\r\n        <StepContent>\r\n            <UploadSchemaStep handelNextClicked={handleNext}  />\r\n        </StepContent>\r\n        </Step>\r\n        <Step {...stepProps}>\r\n          <StepLabel {...labelProps}>\r\n            <Typography variant=\"caption\">\r\n              Upload an existing customisation file\r\n            </Typography>\r\n          </StepLabel>\r\n          <StepContent>\r\n            <UploadCustomisationInstruction \r\n              handelBack={handleBack} \r\n              activeStep={activeStep} \r\n              handelSkip={handleSkip} \r\n              handelNext={handleNext}\r\n            />\r\n           \r\n          </StepContent>\r\n        </Step>\r\n      </Stepper>\r\n    </div>\r\n  );\r\n};\r\n","export const options = { indent: 4, newline: \"\\n\" };\r\nexport const customTheme = {\r\n  tagColor: \"Orange\",\r\n  textColor: \"#FFFFFF\",\r\n  separatorColor: \"Orange\",\r\n};\r\nexport const customThemeVsCode = {\r\n  tagColor: \"#03a9f4\",\r\n  attributeKeyColor: \"#fdd835\",\r\n  textColor: \"#FFFFFF\",\r\n  attributeValueColor: \"#8bc34a\",\r\n  separatorColor: \"#03a9f4\",\r\n};\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      position: \"relative\",\r\n      overflow: \"scroll\",\r\n      backgroundColor: \"#444\",\r\n      maxHeight: \"100vh\",\r\n      marginTop: \"0.5rem\",\r\n      borderRadius: \"0.1rem\",\r\n    },\r\n    header: {\r\n      position: \"sticky\",\r\n      top: \"0\",\r\n      right: \"0\",\r\n      left: \"0\",\r\n      padding: \"0.5rem 1rem\",\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      backgroundColor: \"#333\",\r\n      marginBottom: \"1rem\",\r\n      borderRadius: \"0.1rem\",\r\n      width: \"inherit\",\r\n      boxShadow: \"0.3rem 0.4rem #555\",\r\n      color: theme.palette.getContrastText(\"#333\"),\r\n    },\r\n    downloadLink: {\r\n      color: theme.palette.secondary.light,\r\n      textDecoration: \"none\",\r\n    },\r\n  })\r\n);\r\n","import { Button, Typography } from \"@material-ui/core\";\r\nimport prettifyXml from \"prettify-xml\";\r\nimport React, { Fragment } from \"react\";\r\nimport XMLViewer from \"react-xml-viewer\";\r\nimport { customThemeVsCode, options } from \"./itemXMLViewerSettings\";\r\nimport DownloadLink from \"react-download-link\";\r\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\r\nimport { useStyles } from \"./itemXMLViewerStyle\";\r\n\r\ninterface IItemXMLViewer {\r\n  itemXML: Element | null | undefined;\r\n  role?: \"download\" | \"view\";\r\n}\r\n\r\nexport const ItemXMLViewer: React.FC<IItemXMLViewer> = ({ itemXML, role }) => {\r\n  const classes = useStyles();\r\n  const serializer = new XMLSerializer();\r\n  if (itemXML) {\r\n    const xmlString = serializer.serializeToString(itemXML);\r\n    return (\r\n      <div className={classes.container}>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h5\">\r\n            {(!role || role ===   \"download\")?\"Customisation Instructions\":\"Item Instruction\"}\r\n          </Typography>\r\n          {(!role || role ===   \"download\") && (\r\n          (\r\n          (\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"secondary\"\r\n                  startIcon={<GetAppIcon />}\r\n                >\r\n                  <div>\r\n                    <DownloadLink\r\n                      label=\"Download\"\r\n                      filename=\"customisation.xml\"\r\n                      exportFile={() => Promise.resolve(xmlString)}\r\n                      style={{ color: \"pink\", textDecoration: \"none\" }}\r\n                    />\r\n                  </div>\r\n                </Button>\r\n          )\r\n          )\r\n          )}\r\n        </div>\r\n\r\n        <div style={{ margin: \"1rem\" }}>\r\n          <XMLViewer\r\n            xml={prettifyXml(xmlString, options)}\r\n            theme={customThemeVsCode}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return <Fragment></Fragment>;\r\n  }\r\n};\r\n","export class Customiser {\r\n  customisation: Element;\r\n  path: string | undefined = undefined;\r\n  customiseItem: Element;\r\n  excerpt: string = \"\";\r\n  documentation: string = \"\";\r\n  constructor(customisation: Element | undefined = undefined, path?: string) {\r\n    this.customiseItem = this._customiseItemStub();\r\n    if (path) {\r\n      this.path = path;\r\n    }\r\n    if (customisation) {\r\n      this.customisation = customisation.cloneNode(true) as Element;\r\n    } else {\r\n      this.customisation = this._customisationStub();\r\n    }\r\n  }\r\n\r\n  itemPath() {\r\n    if (this.path) {\r\n      const doc = Customiser.docStub();\r\n      const path = doc.createElement(\"Path\");\r\n      path.textContent = this.path;\r\n      this.customiseItem.append(path);\r\n    }\r\n  }\r\n\r\n  exclude() {\r\n    if (this.ExcludedItem() || !this.path) return;\r\n    this.removeCustomisedItem();\r\n    const doc = Customiser.docStub();\r\n    const customiseItem = this._customiseItemStub();\r\n    customiseItem.setAttribute(\"Exclude\", \"Yes\");\r\n    const path = doc.createElement(\"Path\");\r\n    path.textContent = this.path;\r\n\r\n    customiseItem.append(path);\r\n    this.customisation.append(customiseItem);\r\n    return this.customiseItem;\r\n  }\r\n  include() {\r\n    const excludedPath: Element = this.ExcludedItem();\r\n    if (excludedPath && excludedPath.parentElement) {\r\n      this.customisation.removeChild(excludedPath.parentElement);\r\n    }\r\n  }\r\n\r\n  ExcludedItem(): Element {\r\n    const allPath = Array.from(\r\n      this.customisation?.getElementsByTagName(\"Path\")\r\n    );\r\n    const excludedPath: Element = Array.prototype.find.call(\r\n      allPath,\r\n      (p: Element) => {\r\n        if (p.parentElement?.getAttribute(\"Exclude\") === \"Yes\") {\r\n          return p.textContent === this.path;\r\n        }\r\n      }\r\n    );\r\n    return excludedPath;\r\n  }\r\n\r\n  _customiseItemStub(): Element {\r\n    const doc = Customiser.docStub();\r\n    return doc.createElement(\"CustomiseItem\");\r\n  }\r\n\r\n  _customisationStub(): Element {\r\n    const parser = new DOMParser();\r\n    const customisationStub = `\r\n    <Customisations \r\n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \r\n        xsi:noNamespaceSchemaLocation=\"LIXI-Customisation-By-Restriction.xsd\" \r\n        LIXICode=\"LIXI\" CustomisationCode=\"\" \r\n        LIXITransactionType=\"\" \r\n        customHeading=\"Custom Heading for All Customised Items\">\r\n    </Customisations>`;\r\n    const parsedXML = parser.parseFromString(customisationStub, \"text/xml\");\r\n    return parsedXML.getElementsByTagName(\"Customisations\")[0];\r\n  }\r\n\r\n  getCustomisedItem() {\r\n    const allPath = Array.from(this.customisation.getElementsByTagName(\"Path\"));\r\n    const excludedPath: Element = Array.prototype.find.call(\r\n      allPath,\r\n      (p: Element) => {\r\n        if (!p.parentElement?.getAttribute(\"Exclude\")) {\r\n          return p.textContent === this.path;\r\n        }\r\n      }\r\n    );\r\n    return excludedPath;\r\n  }\r\n\r\n  getTouchedItem() {\r\n    const allPath = Array.from(this.customisation.getElementsByTagName(\"Path\"));\r\n    const excludedPath: Element = Array.prototype.find.call(\r\n      allPath,\r\n      (p: Element) => {\r\n        return p.textContent === this.path;\r\n      }\r\n    );\r\n    return excludedPath;\r\n  }\r\n  removeCustomisedItem() {\r\n    const existingCustomisedItem = this.getCustomisedItem()?.parentElement;\r\n    if (existingCustomisedItem) {\r\n      this.customisation.removeChild(existingCustomisedItem);\r\n      return existingCustomisedItem;\r\n    }\r\n  }\r\n\r\n  static docStub(): Document {\r\n    const parser = new DOMParser();\r\n    return parser.parseFromString(\"<root></root>\", \"text/xml\");\r\n  }\r\n\r\n  customExcerpt() {\r\n    if (!this.excerpt) return;\r\n    const doc = Customiser.docStub();\r\n    const customExcerpt = doc.createElement(\"CustomExcerpt\");\r\n    customExcerpt.textContent = this.excerpt.trim();\r\n    this.customiseItem.append(customExcerpt);\r\n  }\r\n  customDocumentation() {\r\n    if (!this.documentation) return;\r\n    const doc = Customiser.docStub();\r\n    const customDocumentation: Element = doc.createElement(\r\n      \"CustomDocumentation\"\r\n    );\r\n    customDocumentation.textContent = this.documentation.trim();\r\n    this.customiseItem.append(customDocumentation);\r\n  }\r\n\r\n  affectedDecedents() {\r\n    if (!this?.path) return;\r\n    const path = this.path;\r\n    const allPath = Array.from(\r\n      this.customisation?.getElementsByTagName(\"Path\")\r\n    );\r\n    const affectedItems: Element[] = Array.prototype.filter.call(\r\n      allPath,\r\n      (p: Element) => {\r\n        return p.textContent?.startsWith(path || \"\");\r\n      }\r\n    );\r\n\r\n    return affectedItems;\r\n  }\r\n  removeCustomisation(paths: string[]) {\r\n    const allCustomisedPaths = Array.from(\r\n      this.customisation.getElementsByTagName(\"Path\")\r\n    );\r\n\r\n    Array.prototype.forEach.call(allCustomisedPaths, (p: Element) => {\r\n      if (p) {\r\n        if (p?.textContent && paths.includes(p?.textContent)) {\r\n          if (p.parentElement) {\r\n            this.customisation.removeChild(p?.parentElement);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n  excludeByPath(path: string) {\r\n    this.path = path;\r\n    this.exclude();\r\n  }\r\n  notExcludeByPath(path: string) {\r\n    this.path = path;\r\n    this.include();\r\n  }\r\n}\r\n","import { LixiLocalNameEnum, LixiTagEnum } from \"../enums/lixiEnums\";\r\ninterface ILixiBase {\r\n  element: Element;\r\n  annotated: boolean;\r\n}\r\nexport class LixiBase implements ILixiBase {\r\n  readonly element: Element;\r\n  readonly annotated: boolean;\r\n  constructor(element: Element) {\r\n    this.element = element.cloneNode(true) as Element;\r\n    this.annotated =\r\n      this.element.children[0].localName === LixiLocalNameEnum.annotation;\r\n  }\r\n\r\n  get transactions() {\r\n    if (this.annotated) {\r\n      const annotation = this.element.children[0];\r\n      const transactions = annotation?.getElementsByTagName(\r\n        LixiTagEnum.transactions\r\n      );\r\n      if (transactions.length) {\r\n        return transactions[0].textContent?.split(\",\");\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n\r\n  get path() {\r\n    if (this.annotated) {\r\n      return this.element.children[0].getElementsByTagName(LixiTagEnum.path)[0]\r\n        .textContent;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  get label() {\r\n    if (this.annotated) {\r\n      return this.element.children[0].getElementsByTagName(LixiTagEnum.label)[0]\r\n        .textContent;\r\n    }\r\n    return undefined;\r\n  }\r\n  get documentation() {\r\n    if (this.annotated) {\r\n      return this.element.children[0].getElementsByTagName(\r\n        LixiTagEnum.documentation\r\n      )[0].textContent;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  rootDocument() {\r\n    return this.element.ownerDocument;\r\n  }\r\n\r\n  get references() {\r\n    const referenceTargets: string[] = [];\r\n    if (\r\n      !this.annotated ||\r\n      this.element.localName !== \"attribute\" ||\r\n      this.element.getAttribute(\"type\") !== \"referenceType\"\r\n    ) {\r\n      return undefined;\r\n    }\r\n    const targets = this.element.children[0].getElementsByTagName(\r\n      LixiTagEnum.target\r\n    );\r\n    Array.prototype.map.call(targets, (t) => {\r\n      referenceTargets.push(t.textContent);\r\n    });\r\n    return referenceTargets;\r\n  }\r\n\r\n  get baseRestriction() {\r\n    if (this.element.localName === \"simpleType\") {\r\n      const restriction = this.element.children[1];\r\n      return restriction.getAttribute(\"base\");\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  get attributes() {\r\n    const attributes: Array<Element> = [];\r\n    const complexType = this.getLixiComplexType();\r\n    if (complexType) {\r\n      Array.from(complexType.children).forEach((child) => {\r\n        if (child.localName === LixiLocalNameEnum.attribute) {\r\n          attributes.push(child);\r\n        }\r\n      });\r\n    }\r\n\r\n    return attributes;\r\n  }\r\n\r\n  getLixiComplexType() {\r\n    const complex: Element[] = [];\r\n    Array.from(this.element.children).forEach((child) => {\r\n      if (child.localName === LixiLocalNameEnum.complexType) {\r\n        complex.push(child);\r\n      }\r\n    });\r\n    return complex[0];\r\n  }\r\n\r\n  get lixiSubElements() {\r\n    const complexType = this.getLixiComplexType();\r\n    const subElements: { [key: string]: Element[] } = {};\r\n    const firstChild = complexType?.firstElementChild;\r\n\r\n    if (firstChild?.localName === LixiLocalNameEnum.sequence) {\r\n      subElements[LixiLocalNameEnum.sequence] = [\r\n        ...Array.from(firstChild.children),\r\n      ];\r\n    } else if (firstChild?.localName === LixiLocalNameEnum.choice) {\r\n      subElements[LixiLocalNameEnum.choice] = [\r\n        ...Array.from(firstChild.children),\r\n      ];\r\n    }\r\n    if (Object.keys(subElements).length > 0) {\r\n      return subElements;\r\n    }\r\n    return subElements;\r\n  }\r\n\r\n  get enumeration() {\r\n    if (this.element.localName === \"simpleType\") {\r\n      const restriction = this.element.children[1];\r\n      if (restriction.getAttribute(\"base\") === \"xs:token\") {\r\n        return [...Array.from(restriction.children)];\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n","import { Customiser } from \"./Customiser\";\r\nimport { CustomisedElementType } from \"./customisationTypes\";\r\n\r\nexport class ElementCustomiser extends Customiser {\r\n  object = {} as CustomisedElementType;\r\n  fixedList: boolean;\r\n  constructor(\r\n    customisation: Element | undefined = undefined,\r\n    path?: string,\r\n    values?: CustomisedElementType\r\n  ) {\r\n    super(customisation, path);\r\n    this.fixedList = !!(values?.elements.length || values?.attributes.length);\r\n    this.object = values || {\r\n      includeAllElements: true,\r\n      excludeAllElements: false,\r\n      includeAllAttributes: true,\r\n      excludeAllAttributes: false,\r\n      elements: [],\r\n      attributes: [],\r\n      heading: \"\",\r\n      excerpt: \"\",\r\n      documentation: \"\",\r\n      newMin: \"\",\r\n      newMax: \"\",\r\n    };\r\n  }\r\n\r\n  customise() {\r\n    const {\r\n      includeAllAttributes,\r\n      attributes,\r\n      includeAllElements,\r\n      elements,\r\n      newMin,\r\n      newMax,\r\n      documentation,\r\n      excerpt,\r\n      heading,\r\n    } = this.object;\r\n    if (\r\n      !includeAllAttributes &&\r\n      !attributes.length &&\r\n      !includeAllElements &&\r\n      !elements.length &&\r\n      !newMax &&\r\n      !newMin &&\r\n      !documentation &&\r\n      !heading &&\r\n      !excerpt\r\n    ) {\r\n      this.removeCustomisedItem();\r\n      return;\r\n    }\r\n\r\n    this.excerpt = excerpt ? excerpt : \"\";\r\n    this.documentation = documentation ? documentation : \"\";\r\n    this.removeCustomisedItem();\r\n    this.itemPath();\r\n    this.setInLineAttributes();\r\n    this.customMaxOccurs();\r\n    this.customMinOccurs();\r\n    this.customAttributes();\r\n    this.customElements();\r\n    this.customExcerpt();\r\n    this.customDocumentation();\r\n    this.customisation.append(this.customiseItem);\r\n  }\r\n\r\n  customMinOccurs() {\r\n    if (this.object.newMin) {\r\n      this.customiseItem.setAttribute(\"CustomMinOccurs\", \"Yes\");\r\n      const doc = Customiser.docStub();\r\n      const customMinOccurs = doc.createElement(\"CustomMinOccurs\");\r\n      customMinOccurs.textContent = this.object.newMin.toString();\r\n      this.customiseItem.append(customMinOccurs);\r\n    }\r\n  }\r\n  customMaxOccurs() {\r\n    if (this.object.newMax) {\r\n      this.customiseItem.setAttribute(\"CustomMaxOccurs\", \"Yes\");\r\n      const doc = Customiser.docStub();\r\n      const customMaxOccurs = doc.createElement(\"CustomMaxOccurs\");\r\n      customMaxOccurs.textContent = this.object.newMax.toString();\r\n      this.customiseItem.append(customMaxOccurs);\r\n    }\r\n  }\r\n\r\n  customAttributes() {\r\n    if (!this.object.attributes.length) return;\r\n    const doc = Customiser.docStub();\r\n    this.object.attributes.forEach((att, idx) => {\r\n      const attribute = doc.createElement(\"Attribute\");\r\n      attribute.textContent = att;\r\n      this.customiseItem.append(attribute);\r\n    });\r\n  }\r\n  customElements() {\r\n    if (!this.object.elements.length) return;\r\n    const doc = Customiser.docStub();\r\n    this.object.elements.forEach((att, idx) => {\r\n      const element = doc.createElement(\"Element\");\r\n      element.textContent = att;\r\n      this.customiseItem.append(element);\r\n    });\r\n  }\r\n\r\n  setInLineAttributes() {\r\n    if (this.object.heading) {\r\n      this.customiseItem.setAttribute(\"customHeading\", this.object.heading);\r\n    }\r\n    if (this.object.elements.length || this.object.attributes.length) {\r\n      this.customiseItem.setAttribute(\"Include\", \"Yes\");\r\n    }\r\n    if (this.object.elements.length) {\r\n      // this.customiseItem.setAttribute(\"ExcludeAllElements\", \"No\");\r\n    }\r\n    if (this.object.attributes.length) {\r\n      // this.customiseItem.setAttribute(\"ExcludeAllAttributes\", \"No\");\r\n    }\r\n    if (this.object.includeAllAttributes) {\r\n      // this.customiseItem.setAttribute(\"IncludeAllAttributes\", \"Yes\");\r\n    } else if (!this.object.attributes.length && this.object.elements.length) {\r\n      this.customiseItem.setAttribute(\"ExcludeAllAttributes\", \"Yes\");\r\n    }\r\n    if (this.object.includeAllElements) {\r\n      // this.customiseItem.setAttribute(\"IncludeAllElements\", \"Yes\");\r\n    } else if (!this.object.elements.length && this.object.attributes.length) {\r\n      this.customiseItem.setAttribute(\"ExcludeAllElements\", \"Yes\");\r\n    }\r\n    if (\r\n      !this.object.elements.length &&\r\n      this.object.includeAllElements &&\r\n      !this.object.attributes.length &&\r\n      this.object.includeAllAttributes\r\n    ) {\r\n      return;\r\n    }\r\n    if (\r\n      !this.object.elements.length &&\r\n      !this.object.includeAllElements &&\r\n      !this.object.attributes.length &&\r\n      !this.object.includeAllAttributes &&\r\n      !this.object.heading &&\r\n      !this.object.documentation &&\r\n      !this.object.excerpt\r\n    ) {\r\n      return this.exclude();\r\n    }\r\n  }\r\n\r\n  // Remove a customsed element, while switching from \r\n  // customisation by inclusion to customisation by exclusion \r\n  removeElementsAndAttributes() {\r\n    const customisedEle = this.getCustomisedItem()?.parentElement;\r\n    if (!customisedEle) return;\r\n    const customHeading = customisedEle.getAttribute(\"customHeading\");\r\n    const result = Array.prototype.find.call(\r\n      customisedEle.children,\r\n      (child: Element) => {\r\n        return [\"CustomDocumentation\", \"CustomExcerpt\"].includes(\r\n          child.localName\r\n        );\r\n      }\r\n    );\r\n    if (!result && !customHeading) {\r\n      customisedEle.parentElement?.removeChild(customisedEle);\r\n      return;\r\n    }\r\n    Array.prototype.forEach.call(customisedEle.children, (child: Element) => {\r\n      switch (child.localName) {\r\n        case \"Element\":\r\n          customisedEle.removeChild(child);\r\n          break;\r\n        case \"Attribute\":\r\n          customisedEle.removeChild(child);\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n  }\r\n  customisedObject() {\r\n    const customisedEle = this.getCustomisedItem()?.parentElement;\r\n    if (!customisedEle) return this.object;\r\n    this.object.excludeAllAttributes =\r\n      customisedEle.getAttribute(\"ExcludeAllAttributes\") === \"Yes\";\r\n    this.object.excludeAllElements =\r\n      customisedEle.getAttribute(\"ExcludeAllElements\") === \"Yes\";\r\n    this.fixedList = !!customisedEle.getAttribute(\"Include\");\r\n    const heading = customisedEle.getAttribute(\"customHeading\");\r\n    this.object.heading = heading ? heading : undefined;\r\n    // this.object.includeAllAttributes = !this.object.excludeAllAttributes;\r\n    // this.object.includeAllElements = !this.object.excludeAllElements;\r\n\r\n    Array.prototype.forEach.call(customisedEle.children, (child: Element) => {\r\n      switch (child.localName) {\r\n        case \"CustomMaxOccurs\":\r\n          const newMax = child.textContent;\r\n          this.object.newMax = newMax ? parseInt(newMax) : \"\";\r\n          break;\r\n        case \"CustomMinOccurs\":\r\n          const newMin = child.textContent;\r\n          this.object.newMin = newMin ? parseInt(newMin) : \"\";\r\n          break;\r\n        case \"Attribute\":\r\n          const attribute = child.textContent;\r\n          if (!attribute) break;\r\n          this.object.attributes?.push(attribute);\r\n          break;\r\n        case \"Element\":\r\n          const element = child.textContent;\r\n          if (!element) break;\r\n          this.object.elements?.push(element);\r\n          break;\r\n        case \"CustomExcerpt\":\r\n          const excerpt = child.textContent;\r\n          this.object.excerpt = excerpt ? excerpt : \"\";\r\n          break;\r\n        case \"CustomDocumentation\":\r\n          const documentation = child.textContent;\r\n          this.object.documentation = documentation ? documentation : \"\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    return this.object;\r\n  }\r\n  static parentCustomised = (\r\n    path: string,\r\n    customisation: Element,\r\n    type: string\r\n  ): { included: boolean; path: string } | undefined => {\r\n    const parentStatus = {} as { included: boolean; path: string };\r\n\r\n    const pathList = path.split(\".\");\r\n    const pathLeaf = pathList.pop();\r\n    const customiser = new ElementCustomiser(customisation, pathList.join(\".\"));\r\n    const customisedItem = customiser.getTouchedItem()?.parentElement;\r\n    customiser.customisedObject();\r\n    if (customisedItem) {\r\n      if (customisedItem.getAttribute(\"Exclude\")) {\r\n        parentStatus.included = false;\r\n        parentStatus.path = pathList.join(\".\");\r\n        return parentStatus;\r\n      }\r\n      if (!customisedItem.getAttribute(\"Include\")) {\r\n        parentStatus.included = true;\r\n        parentStatus.path = pathList.join(\".\");\r\n        return parentStatus;\r\n      }\r\n      if (type === \"element\") {\r\n        if (customisedItem.getAttribute(\"ExcludeAllElements\")) {\r\n          parentStatus.included = false;\r\n          parentStatus.path = pathList.join(\".\");\r\n          return parentStatus;\r\n        } else {\r\n          if (pathLeaf && customiser.object.elements.includes(pathLeaf)) {\r\n            parentStatus.included = true;\r\n            parentStatus.path = pathList.join(\".\");\r\n            return parentStatus;\r\n          } else {\r\n            parentStatus.included = false;\r\n            parentStatus.path = pathList.join(\".\");\r\n            return parentStatus;\r\n          }\r\n        }\r\n      } else if (type === \"attribute\") {\r\n        if (customisedItem.getAttribute(\"ExcludeAllAttributes\")) {\r\n          parentStatus.included = false;\r\n          parentStatus.path = pathList.join(\".\");\r\n          return parentStatus;\r\n        } else {\r\n          if (pathLeaf && customiser.object.attributes.includes(pathLeaf)) {\r\n            parentStatus.included = true;\r\n            parentStatus.path = pathList.join(\".\");\r\n            return parentStatus;\r\n          } else {\r\n            parentStatus.included = false;\r\n            parentStatus.path = pathList.join(\".\");\r\n            return parentStatus;\r\n          }\r\n        }\r\n      }\r\n      pathList.pop();\r\n    }\r\n    while (pathList.length) {\r\n      const pathLeaf = pathList.pop();\r\n      const customiser = new ElementCustomiser(\r\n        customisation,\r\n        pathList.join(\".\")\r\n      );\r\n      const customisedItem = customiser.getTouchedItem()?.parentElement;\r\n      customiser.customisedObject();\r\n      if (customisedItem) {\r\n        if (customisedItem.getAttribute(\"Exclude\")) {\r\n          parentStatus.included = false;\r\n          parentStatus.path = pathList.join(\".\");\r\n          return parentStatus;\r\n        }\r\n\r\n        if (!customisedItem.getAttribute(\"Include\")) {\r\n          parentStatus.included = true;\r\n          parentStatus.path = pathList.join(\".\");\r\n          return parentStatus;\r\n        }\r\n        if (customisedItem.getAttribute(\"ExcludeAllElements\")) {\r\n          parentStatus.included = false;\r\n          parentStatus.path = pathList.join(\".\");\r\n          return parentStatus;\r\n        } else if (pathLeaf && customiser.object.elements.includes(pathLeaf)) {\r\n          parentStatus.included = true;\r\n          parentStatus.path = pathList.join(\".\");\r\n          return parentStatus;\r\n        }\r\n      }\r\n    }\r\n    return;\r\n  };\r\n}\r\n\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    subItemHeader: {\r\n      zIndex: 2,\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      backgroundColor: \"#fff8e1\",\r\n      // marginBottom: \"0.2rem\",\r\n      borderRadius: \"0.2rem\",\r\n      maxHeight: \"5rem\",\r\n      color: theme.palette.primary.main,\r\n    },\r\n\r\n    viewItem: {\r\n      \"&:hover\": {\r\n        color: \"#3f51b5\",\r\n      },\r\n    },\r\n  })\r\n);\r\n","import ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\r\nimport React from \"react\";\r\nimport IndeterminateCheckBoxTwoToneIcon from \"@material-ui/icons/IndeterminateCheckBoxTwoTone\";\r\nimport CloseOutlinedIcon from \"@material-ui/icons/CloseOutlined\";\r\nimport { useStyles } from \"./lixiListItemHeaderStyle\";\r\nimport { CustomisedElementType } from \"../../models/customisationTypes\";\r\nimport { LixiBase } from \"../../models/LixiBase\";\r\nimport { FieldArrayRenderProps, useFormikContext } from \"formik\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport CheckRoundedIcon from '@material-ui/icons/CheckRounded';\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport { Customiser } from \"../../models/Customiser\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\nimport { useAction } from \"../../hooks/useActions\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\n\r\ninterface IHeaderLixiItem {\r\n  name: \"includeAllElements\" | \"includeAllAttributes\";\r\n  header: string;\r\n  items: (LixiBase | null | undefined)[];\r\n  selectedItemsLength: number;\r\n  toggle: (value:string) => void;\r\n  arrayHelper:FieldArrayRenderProps\r\n  listName:\"elements\" | \"attributes\"\r\n  excluded:string[]\r\n  included:string[]\r\n  exclusion:boolean\r\n}\r\n\r\nexport const LixiListItemHeader: React.FC<IHeaderLixiItem> = ({\r\n  name,\r\n  toggle,\r\n  items,\r\n  listName,\r\n  selectedItemsLength,\r\n  header,\r\n  excluded,\r\n  included,\r\n  arrayHelper:FieldArrayRenderProps,\r\n  exclusion\r\n}) => {\r\n  const classes = useStyles();\r\n  const [value,setValue]=React.useState<string>(\"\")\r\n  const [includeAll, setIncludeAll]= React.useState(true)\r\n  const [excludeAll, setExcludeAll]= React.useState(false)\r\n  const {updateCustomisation} = useAction()\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n\r\n  const {values,getFieldHelpers,submitForm} = useFormikContext<CustomisedElementType>()\r\n\r\n  React.useEffect(()=>{\r\n    if(selectedItemsLength === items.length ){\r\n      setValue(name)\r\n      getFieldHelpers(name).setValue(true)\r\n      return\r\n    }\r\n    getFieldHelpers(name).setValue(false)\r\n    setValue(\"\")\r\n    \r\n  },[getFieldHelpers, items.length, name, selectedItemsLength, value, values])\r\n\r\n  const toggleAll = ()=>{\r\n    \r\n    if(!exclusion){\r\n      const copyList = [...values[listName]]\r\n      setIncludeAll(!includeAll)\r\n      if(!includeAll){\r\n        items.forEach((item,idx)=>{\r\n          const leafItem = item?.path?.split(\".\").pop() \r\n          if(leafItem && !copyList.includes(leafItem) ){\r\n            copyList.push(leafItem) \r\n          }\r\n        })\r\n        getFieldHelpers(listName).setValue(copyList)\r\n        \r\n        submitForm()\r\n        return \r\n      }\r\n      items.forEach((item,idx)=>{\r\n        const leafItem = item?.path?.split(\".\").pop() \r\n        if(leafItem && copyList.includes(leafItem) && !included.includes(leafItem) ){\r\n          copyList.splice(copyList.indexOf(leafItem),1) \r\n        }\r\n        getFieldHelpers(listName).setValue(copyList)\r\n      })\r\n      // setIncludeAll(true)\r\n      submitForm()\r\n    }\r\n    else{\r\n      const newCustomisation = new Customiser(customization);\r\n      setExcludeAll(!excludeAll)\r\n      items.forEach((item,idx)=>{\r\n        const path = item?.path\r\n        const leafItem = path?.split(\".\").pop() \r\n        if(!excludeAll){\r\n          if (\r\n            path &&\r\n            leafItem &&\r\n            !included.includes(leafItem) &&\r\n            !excluded.includes(leafItem) &&\r\n            !included.includes(leafItem)\r\n          ) {\r\n            newCustomisation.excludeByPath(path);\r\n          }\r\n      }else{\r\n        if (path && leafItem && excluded.includes(leafItem)) {\r\n          newCustomisation.notExcludeByPath(path);\r\n        }\r\n      }\r\n      })\r\n      updateCustomisation(newCustomisation.customisation)\r\n    }\r\n  }\r\n\r\n  // React.useEffect(()=>{\r\n  //   if(items.length === excluded.length){\r\n  //     setExcludeAll(true)\r\n  //     return\r\n  //   }\r\n  //   setExcludeAll(false)\r\n  // },[excluded.length, items.length])\r\n  React.useEffect(()=>{\r\n    if(items.length === selectedItemsLength){\r\n      setIncludeAll(true)\r\n      return\r\n    }\r\n    setIncludeAll(false)\r\n  },[items.length, selectedItemsLength, setIncludeAll])\r\n\r\n  const StatusText = ()=>{\r\n    if (exclusion && excludeAll && !included.length) {\r\n      return (\r\n        <Typography color=\"secondary\" variant=\"button\">\r\n          <strong>{\" - \"}All Excluded</strong>\r\n        </Typography>\r\n      );\r\n    }\r\n    if(!exclusion && includeAll ){\r\n      return <Typography color=\"primary\" variant=\"button\"><strong style={{color:\"green\"}}>{\" - \"}All Included</strong></Typography>\r\n    }\r\n    return <></>\r\n  }\r\n\r\n  return (\r\n    <Paper>\r\n      <div \r\n        onClick={()   =>   toggleAll()} \r\n        style={{cursor:\"pointer\"}}>\r\n      <ListSubheader\r\n        key={name}\r\n        style={{ marginTop: \"0\", alignItems: \"center\" }}\r\n        className={classes.subItemHeader}\r\n      >\r\n        \r\n         {!exclusion &&( <ListItemIcon>\r\n          \r\n           {(selectedItemsLength > 0 && selectedItemsLength < items.length)\r\n            ? <IndeterminateCheckBoxTwoToneIcon color=\"primary\" />\r\n            : includeAll\r\n            ? <CheckRoundedIcon style={{ color: \"green\" }} fontSize=\"default\" />\r\n            :<CloseOutlinedIcon fontSize=\"small\" style={{ color: \"red\" }}/>}\r\n          \r\n          </ListItemIcon>)}\r\n          <ListItemSecondaryAction>\r\n          {exclusion && <Switch size=\"small\"\r\n              checked={excludeAll}\r\n              onChange={(e) => toggleAll()}\r\n              inputProps={{ \"aria-label\": \"controlled\" }}\r\n            />}\r\n          </ListItemSecondaryAction>\r\n          <ListItemText primary={<>{header}<StatusText/></>} />\r\n      </ListSubheader>\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    viewItem: {\r\n      \"&:hover\": {\r\n        color: \"#3f51b5\",\r\n      },\r\n    },\r\n    tooltip: {\r\n      backgroundColor: theme.palette.common.white,\r\n      color: \"rgba(0, 0, 0, 0.87)\",\r\n      // boxShadow: theme.shadows[1],\r\n      fontSize: 16,\r\n    },\r\n    tooltip2: {\r\n      backgroundColor: \"#fff\",\r\n      color: \"rgba(0, 0, 0, 0.87)\",\r\n      maxWidth: 220,\r\n      fontSize: theme.typography.pxToRem(16),\r\n    },\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InfoTwoToneIcon from \"@material-ui/icons/InfoTwoTone\";\r\nimport { useStyles } from \"./lixiItemToolTipStyle\";\r\nimport { LixiBase } from \"../../models/LixiBase\";\r\n\r\ninterface IToolTip {\r\n  lixiItem: LixiBase;\r\n  placement:\r\n    | \"top-start\"\r\n    | \"top\"\r\n    | \"top-end\"\r\n    | \"left-start\"\r\n    | \"left\"\r\n    | \"left-end\"\r\n    | \"right-start\"\r\n    | \"right\"\r\n    | \"right-end\"\r\n    | \"bottom-start\"\r\n    | \"bottom\"\r\n    | \"bottom-end\";\r\n}\r\n\r\nexport const LixiItemToolTip: React.FC<IToolTip> = ({\r\n  lixiItem,\r\n  placement,\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Tooltip\r\n      placement={placement}\r\n      className={classes.tooltip2}\r\n      title={\r\n        <React.Fragment>\r\n          <Typography color=\"inherit\">{lixiItem.label}</Typography>\r\n          {lixiItem.documentation}\r\n        </React.Fragment>\r\n      }\r\n    >\r\n      <InfoTwoToneIcon className={classes.viewItem} fontSize=\"small\" />\r\n    </Tooltip>\r\n  );\r\n};\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    subItem: {\r\n      height: \"16rem\",\r\n      // maxHeight: \"12rem\",\r\n      overflow: \"scroll\",\r\n    },\r\n    viewItem: {\r\n      \"&:hover\": {\r\n        color: \"#3f51b5\",\r\n      },\r\n    },\r\n  })\r\n);\r\n","import Checkbox, { CheckboxProps } from \"@material-ui/core/Checkbox\";\r\nimport React from \"react\";\r\nimport { useField, FieldAttributes } from \"formik\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\n\r\ntype AppTextFieldProps = { label?: string } & CheckboxProps &\r\n  FieldAttributes<{}>;\r\n\r\nexport const AppCheckBox: React.FC<AppTextFieldProps> = ({\r\n  checked,\r\n  label,\r\n  ...props\r\n}) => {\r\n  const [field,meta] = useField<{}>(props);\r\n  if (label)  {\r\n    return (\r\n      <FormControl error={meta.touched && meta.error?true:false }>\r\n        {/* <FormHelperText>{meta.touched && meta.error? meta.error:undefined}</FormHelperText> */}\r\n        <FormControlLabel\r\n          \r\n          style={{ padding: 0,color:meta.touched && meta.error?\"red\":\"inherit\" }}\r\n          control={<Checkbox checked={checked} {...field} {...props} />}\r\n          label={label}\r\n        />\r\n      \r\n      </FormControl>\r\n      \r\n    );\r\n  }  else  {\r\n    return <Checkbox checked={checked} {...field} {...props} />;;\r\n  }\r\n};\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      backgroundColor: \"transparent\",\r\n    },\r\n\r\n    paper: {\r\n      // backgroundColor: \"transparent\",\r\n      boxShadow: \"1px 1px 3px #BDBDBD\",\r\n      overflow: \"hidden\",\r\n      padding: theme.spacing(0),\r\n    },\r\n    alert: {\r\n      color: \"#c43e00\",\r\n      \"&:hover\": {\r\n        color: \"#ff8f00\",\r\n      },\r\n    },\r\n    button: {\r\n      color: \"orange\",\r\n      backgroundColor: \"#333\",\r\n      \"&:hover\": {\r\n        color: \"#333\",\r\n        backgroundColor: \"orange\",\r\n      },\r\n    },\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport { AppCheckBox } from \"../formik-mterial-ui/AppCheckBox\";\r\nimport CancelPresentationTwoToneIcon from \"@material-ui/icons/CancelPresentationTwoTone\";\r\n// import {CssBaseline} from \"@material-ui/core\"\r\nimport { Formik, Form } from \"formik\";\r\nimport { useStyles } from \"./confirmRemoveItemDialogStyle\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline/CssBaseline\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport * as Yup from \"yup\";\r\nimport { useAction } from \"../../hooks/useActions\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\nimport { Customiser } from \"../../models/Customiser\";\r\n\r\ninterface IConfirmRemoveItem {\r\n  open: boolean;\r\n  handleClose: () => void;\r\n  affected: { path: string; items: string[] } | undefined;\r\n}\r\n\r\nexport const ConfirmRemoveItemDialog: React.FC<IConfirmRemoveItem> = ({\r\n  open,\r\n  affected,\r\n  handleClose,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { updateCustomisation } = useAction();\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n  \r\n  return (\r\n    <Formik\r\n      initialValues={{ agree: false, ...affected }}\r\n      validationSchema={Yup.object().shape({\r\n        agree: Yup.boolean().oneOf([true]),\r\n      })}\r\n      enableReinitialize\r\n      onSubmit={(values, { setSubmitting, resetForm }) => {\r\n        setTimeout(() => {\r\n          setSubmitting(true);\r\n          const newCustomisation = new Customiser(\r\n            customization,\r\n            affected?.path\r\n          );\r\n          newCustomisation.removeCustomisation([...(values.items || [])]);\r\n          updateCustomisation(newCustomisation.customisation);\r\n          setSubmitting(false);\r\n          resetForm();\r\n          handleClose();\r\n        }, 400);\r\n      }}\r\n    >\r\n      {({ isSubmitting, values, errors, touched, resetForm }) => (\r\n        <div>\r\n          <Dialog\r\n            draggable\r\n            BackdropProps={{ classes: { root: classes.root } }}\r\n            PaperProps={{ classes: { root: classes.paper, elevation2: \"5\" } }}\r\n            style={{ boxShadow: \"none\" }}\r\n            open={open}\r\n            onClose={resetForm}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <CssBaseline />\r\n            <DialogTitle\r\n              style={{\r\n                backgroundColor: \"cornsilk\",\r\n                padding: 0,\r\n                boxShadow: \"1px 1px 1px orange\",\r\n              }}\r\n              id=\"form-dialog-title\"\r\n            >\r\n              <Alert\r\n                style={{ width: \"100%\" }}\r\n                variant=\"standard\"\r\n                severity=\"warning\"\r\n                action={\r\n                  <Tooltip title=\"Cancel\" placement=\"top\">\r\n                    <IconButton\r\n                      onClick={handleClose}\r\n                      aria-label=\"delete\"\r\n                      className={classes.alert}\r\n                      size=\"small\"\r\n                      disableRipple\r\n                    >\r\n                      <CancelPresentationTwoToneIcon fontSize=\"default\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                }\r\n              >\r\n                <em>\r\n                  <strong>{affected?.path.split(\".\").pop()}</strong>{' '}\r\n                  Has Customised Descendant(s)!\r\n                </em>\r\n                \r\n              </Alert>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <Typography gutterBottom variant=\"subtitle1\">\r\n                Before excluding/not including{\" \"}<strong>{affected?.path.split(\".\").pop()}</strong>\r\n                , following customisation must be deleted to avoid conflicting instructions.\r\n              </Typography>\r\n\r\n              {affected?.items.map((i, idx) => {\r\n                return <li key={i}>{`${i}`}</li>;\r\n              })}\r\n              <DialogContentText></DialogContentText>\r\n            </DialogContent>\r\n            <Divider />\r\n            <Form>\r\n              <DialogActions\r\n                style={{\r\n                  justifyContent: \"space-between\",\r\n                  padding: \"0.2rem 1rem\",\r\n                }}\r\n              >\r\n                <AppCheckBox\r\n                  checked={values.agree}\r\n                  name=\"agree\"\r\n                  label=\"I know what I'm doing\"\r\n                  onClick={() => (values.agree = !values.agree)}\r\n                  value={`${values?.agree}`}\r\n                />\r\n                {/* <Checkbox value={values.agree} name=\"agree\" /> */}\r\n                <Button\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                  className={classes.button}\r\n                  disabled={isSubmitting}\r\n                  size=\"small\"\r\n                  // onClick={handleClose}\r\n                  color=\"primary\"\r\n                >\r\n                  Proceed\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          </Dialog>\r\n        </div>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n","import IconButton from \"@material-ui/core/IconButton\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React, { Fragment } from \"react\";\r\nimport { LixiItemToolTip } from \"../tool-tip/LixiItemToolTip\";\r\nimport CloseOutlinedIcon from \"@material-ui/icons/CloseOutlined\";\r\nimport DoneOutlinedIcon from \"@material-ui/icons/DoneOutlined\";\r\nimport LaunchIcon from \"@material-ui/icons/Launch\";\r\nimport { useAction } from \"../../hooks/useActions\";\r\nimport { LixiBase } from \"../../models/LixiBase\";\r\nimport { CustomisedElementType } from \"../../models/customisationTypes\";\r\nimport { FieldArrayRenderProps, useFormikContext } from \"formik\";\r\n\r\nimport { useStyles } from \"./lixiListItemStyle\";\r\nimport { Customiser } from \"../../models/Customiser\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\nimport { ConfirmRemoveItemDialog } from \"../confirm-remove-dialog/ConfirmRemoveItemDialog\";\r\ninterface IListLixiItem {\r\n  listName: \"elements\" | \"attributes\";\r\n  element: LixiBase;\r\n  included: string[];\r\n  excluded: string[];\r\n  selectAll: boolean | \"disable\";\r\n  fixedListItem: string[];\r\n  touched: boolean;\r\n  arrayHelper: FieldArrayRenderProps;\r\n  toggleSelectAll: (value: string) => void;\r\n  includeAll: \"includeAllElements\" | \"includeAllAttributes\";\r\n  excludeAll:\"excludeAllElements\" | \"excludeAllAttributes\";\r\n  exclusion:boolean\r\n}\r\nexport const LixiListItem: React.FC<IListLixiItem> = ({\r\n  listName,\r\n  element,\r\n  included,\r\n  excluded,\r\n  touched,\r\n  fixedListItem,\r\n  selectAll,\r\n  arrayHelper,\r\n  toggleSelectAll,\r\n  includeAll,\r\n  excludeAll,\r\n  exclusion\r\n}) => {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState<string>(\"\");\r\n  // const [neutral, setNeutral] = React.useState<string[]>([]);\r\n  const { markedForDeletionList } = useTypedSelector((state) => state.item);\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n  const { searchItem,  updateCustomisation } = useAction();\r\n  const { values,submitForm } = useFormikContext<CustomisedElementType>();\r\n\r\n  const [affectedPath, setAffectedPath] = React.useState<{\r\n    path: string;\r\n    items: string[];\r\n  }>();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const Status = ()=>{\r\n    let status = ''\r\n    if(exclusion){\r\n      status = included.includes(leafItem || \"\")\r\n      ? \"customised\"\r\n      : excluded.includes(leafItem||\"\")\r\n      ? \"excluded\"\r\n      : \"not excluded\"\r\n      \r\n    }\r\n    if (!exclusion){\r\n      status = included.includes(leafItem || \"\")\r\n      ? \"customised\"\r\n      : values[listName].includes(leafItem||\"\")\r\n      ?\"included\"\r\n      : \"not included\"\r\n    }\r\n     if (status === \"excluded\"){\r\n       return <Typography variant=\"caption\" color=\"secondary\">{status}</Typography>\r\n     }\r\n     if (status === \"customised\"){\r\n       return (\r\n       \r\n           <Typography variant=\"button\" color=\"primary\">\r\n             <strong>{status}</strong>\r\n           </Typography>\r\n     \r\n       );\r\n     }\r\n     return <em>{status}</em>\r\n   \r\n\r\n  }\r\n  const leafItem = React.useMemo(() => {\r\n    return element.path?.split(\".\").pop();\r\n  }, [element.path]);\r\n\r\n  const furtherCustomisation = React.useMemo(() => {\r\n    const path = element?.path;\r\n    if (!path) return;\r\n    return markedForDeletionList?.find((d) => {\r\n      return d.startsWith(path);\r\n    });\r\n  }, [element?.path, markedForDeletionList]);\r\n\r\n\r\n  // React.useEffect(() => {\r\n  //   if (!leafItem) return;\r\n  //   if (\r\n  //     (included.includes(leafItem) || excluded.includes(leafItem)) &&\r\n  //     neutral.includes(leafItem)\r\n  //   ) {\r\n  //     setNeutral([]);\r\n  //   }\r\n  //   if (\r\n  //     !(included.includes(leafItem) || excluded.includes(leafItem)) &&\r\n  //     !neutral.includes(leafItem)\r\n  //   ) {\r\n  //     setNeutral([leafItem]);\r\n  //   }\r\n  // }, [excluded, included, leafItem, neutral]);\r\n\r\n  // React.useEffect(() => {\r\n  //   if (!leafItem) return;\r\n  //   if (values[excludeAll]) {\r\n  //     setValue(\"\");\r\n  //     return;\r\n  //   }\r\n\r\n  //   if (furtherCustomisation && values[listName].includes(leafItem)) {\r\n  //     setValue(leafItem);\r\n  //     return;\r\n  //   }\r\n  //   if (furtherCustomisation && !values[listName].includes(leafItem)) {\r\n  //     setValue(\"\");\r\n  //     return;\r\n  //   }\r\n  //   if (included.includes(leafItem) || values[listName].includes(leafItem)) {\r\n  //     // if  (!values[includeAll])  return;;\r\n  //     setValue(leafItem);\r\n  //     return;\r\n  //   }\r\n  //   if (excluded.includes(leafItem) || !values[listName].includes(leafItem)) {\r\n  //     setValue(\"\");\r\n  //     return;\r\n  //   }\r\n  // }, [\r\n  //   excludeAll,\r\n  //   excluded,\r\n  //   furtherCustomisation,\r\n  //   includeAll,\r\n  //   included,\r\n  //   leafItem,\r\n  //   listName,\r\n  //   values,\r\n  // ]);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  // React.useEffect(() => {\r\n  //   if (!leafItem) return;\r\n  //   if (values[excludeAll]) {\r\n  //     setValue(\"\");\r\n  //     return;\r\n  //   }\r\n  //   if (values[listName].includes(leafItem)) return;\r\n  //   if (fixedListItem.length && !fixedListItem.includes(leafItem) && !touched)\r\n  //     return;\r\n  //   if (selectAll === \"disable\") return;\r\n\r\n  //   if (selectAll && !excluded.includes(leafItem)) {\r\n  //     arrayHelper.push(leafItem);\r\n\r\n  //     return;\r\n  //   }\r\n  // }, [\r\n  //   arrayHelper,\r\n  //   excludeAll,\r\n  //   excluded,\r\n  //   fixedListItem,\r\n  //   leafItem,\r\n  //   listName,\r\n  //   selectAll,\r\n  //   touched,\r\n  //   values,\r\n  // ]);\r\n\r\n  React.useEffect(() => {\r\n    if (!leafItem) return;\r\n    if (values[excludeAll]) {\r\n      setValue(\"\");\r\n      return;\r\n    }\r\n    if (selectAll === \"disable\") return;\r\n    if (\r\n      !selectAll &&\r\n      (furtherCustomisation ||\r\n        (!excluded.includes(leafItem) && !included.includes(leafItem))) &&\r\n      values[listName].includes(leafItem)\r\n    ) {\r\n      arrayHelper.remove(values[listName].indexOf(leafItem));\r\n      return;\r\n    }\r\n  }, [\r\n    arrayHelper,\r\n    excludeAll,\r\n    excluded,\r\n    furtherCustomisation,\r\n    included,\r\n    leafItem,\r\n    listName,\r\n    selectAll,\r\n    values,\r\n  ]);\r\n\r\n  const affected = React.useMemo(():\r\n    | { path: string; items: string[] }\r\n    | undefined => {\r\n    const affectedItem = {} as { path: string; items: string[] };\r\n    if (element && element.path) {\r\n      const customiser = new Customiser(customization, element.path);\r\n      const affectedList = customiser.affectedDecedents();\r\n      if (affectedList?.length) {\r\n        affectedItem.path = element.path;\r\n        affectedItem.items = [];\r\n        affectedList.forEach((i) => {\r\n          if (i.textContent) {\r\n            affectedItem.items.push(i.textContent);\r\n          }\r\n        });\r\n        if (affectedItem.items.length) {\r\n          return affectedItem;\r\n        }\r\n      }\r\n    }\r\n  }, [customization, element]);\r\n\r\n  const handelAddItem = (subEle: string | undefined) => {\r\n    if (!subEle) return;\r\n    if (affected && !furtherCustomisation) {\r\n      setAffectedPath(affected);\r\n      if (leafItem && !excluded.includes(leafItem)) {\r\n        setOpen(true);\r\n        return;\r\n      }\r\n    }\r\n    if (selectAll !== \"disable\") {\r\n      toggleSelectAll(\"disable\");\r\n    }\r\n    if (!values[listName].includes(subEle) && !exclusion) {\r\n      setValue(subEle);\r\n      arrayHelper.push(subEle);\r\n    } else {\r\n      setValue(\"\");\r\n      arrayHelper.remove(values[listName].indexOf(subEle));\r\n    }\r\n    if(!exclusion){\r\n      submitForm()\r\n    }else{\r\n      toggleExclude()\r\n    }\r\n  };\r\n\r\n  const toggleExclude = () => {\r\n    if (!element.path) return;\r\n    const newCustomisation = new Customiser(customization, element?.path);\r\n    if (!!newCustomisation.ExcludedItem()) {\r\n      console.log(\"excluding:\", element.path)\r\n      newCustomisation.include();\r\n      updateCustomisation(newCustomisation.customisation);\r\n      return;\r\n    }\r\n    console.log(\"including:\", element.path)\r\n    newCustomisation.exclude();\r\n    updateCustomisation(newCustomisation.customisation);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <ConfirmRemoveItemDialog\r\n        affected={affectedPath}\r\n        open={open}\r\n        handleClose={handleClose}\r\n      />\r\n      <ListItem divider dense button onClick={() => handelAddItem(leafItem)}>\r\n        {!exclusion && (\r\n          <ListItemIcon>\r\n            {leafItem && values[listName].includes(leafItem) ? (\r\n              <DoneOutlinedIcon style={{ color: \"green\" }} fontSize=\"small\" />\r\n            ) : (\r\n              <CloseOutlinedIcon fontSize=\"small\" style={{ color: \"red\" }} />\r\n            )}\r\n          </ListItemIcon>\r\n        )}\r\n        <ListItemText\r\n          style={{ cursor: \"pointer\" }}\r\n          id={`${element?.path?.split(\".\").pop()}`}\r\n          primary={\r\n            <div>\r\n              <Typography\r\n                style={{ alignItems: \"center\" }}\r\n                component=\"span\"\r\n                variant=\"body2\"\r\n                color={\r\n                  excluded.includes(leafItem || \"\")\r\n                    ? \"textPrimary\"\r\n                    : \"textSecondary\"\r\n                }\r\n              >\r\n                {leafItem}\r\n              </Typography>\r\n              \r\n              <Typography variant=\"caption\" color=\"textSecondary\">\r\n                &nbsp;\r\n                  <Status />\r\n                <LixiItemToolTip lixiItem={element} placement=\"top-start\" />\r\n              </Typography>\r\n               \r\n            </div>\r\n          }\r\n        />\r\n\r\n        <ListItemSecondaryAction>\r\n          {/* {exclusion && <Switch size=\"small\"\r\n              checked={!!(leafItem && excluded.includes(leafItem))}\r\n              inputProps={{ \"aria-label\": \"controlled\" }}\r\n            />} */}\r\n          <IconButton\r\n            edge=\"end\"\r\n            aria-label=\"comments\"\r\n            className={classes.viewItem}\r\n            value={element?.path?.split(\".\").pop()}\r\n            onClick={(e) => searchItem(element?.path || \"\")}\r\n          >\r\n            <LaunchIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n    </Fragment>\r\n  );\r\n};\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    subItemHeader: {\r\n      zIndex: 2,\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      backgroundColor: \"#fff8e1\",\r\n      // marginBottom: \"0.2rem\",\r\n      borderRadius: \"0.2rem\",\r\n      maxHeight: \"5rem\",\r\n      color: theme.palette.primary.main,\r\n    },\r\n    subItem: {\r\n      height: \"35rem\",\r\n      // maxHeight: \"12rem\",\r\n      overflow: \"scroll\",\r\n      paddingTop:  \"0\"\r\n    },\r\n    viewItem: {\r\n      \"&:hover\": {\r\n        color: \"#3f51b5\",\r\n      },\r\n    },\r\n  })\r\n);\r\n","import List from \"@material-ui/core/List/List\";\r\nimport { FieldArray, useFormikContext } from \"formik\";\r\nimport React from \"react\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\nimport { CustomisedElementType } from \"../../models/customisationTypes\";\r\nimport { Customiser } from \"../../models/Customiser\";\r\nimport { LixiBase } from \"../../models/LixiBase\";\r\nimport { LixiListItemHeader } from \"../lixi-list-item-header/LixiListItemHeader\";\r\nimport { LixiListItem } from \"../lixi-list-item/LixiListItem\";\r\nimport { useStyles } from \"./elementSubItemsStyle\";\r\n\r\ninterface SubItems {\r\n  subItems: (LixiBase | null | undefined)[];\r\n  header: string;\r\n  name: \"elements\"|\"attributes\";\r\n  value:string[];\r\n  fixedListItem:string[]\r\n  setExcludedList:React.Dispatch<React.SetStateAction<{\r\n    elements: string[];\r\n    attributes: string[];\r\n} >>\r\nexclusion:boolean\r\n}\r\n\r\nexport const ElementSubItems: React.FC<SubItems> = ({\r\n  subItems,\r\n  header,\r\n  name,\r\n  fixedListItem,\r\n  setExcludedList,\r\n  value,\r\n  exclusion\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selectAll, setSelectAll] = React.useState<{elements:boolean|\"disable\",attributes:boolean|\"disable\",touched:boolean}>({\r\n    elements:true,attributes:true,touched:false\r\n  })\r\n  const [touched, setTouched] = React.useState<{elements:boolean,attributes:boolean}>({\r\n    elements:false,attributes:false\r\n  })\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n  const { markedForDeletionList } = useTypedSelector((state) => state.item);\r\n  // const { markedForDeletion } = useAction();\r\n  const { values } = useFormikContext<CustomisedElementType>();\r\n  \r\n  const includeAllItem = React.useMemo(()=>{\r\n    const titleCaseName = name.replace(new RegExp(\"^[a-z]\"),(matched) => {\r\n    return matched.toUpperCase();\r\n    }) \r\n    return `includeAll${titleCaseName}`\r\n  },[name]) as  \"includeAllElements\"|\"includeAllAttributes\"\r\n  \r\n  const excludeAllItem = React.useMemo(() => {\r\n    const titleCaseName = name.replace(new RegExp(\"^[a-z]\"), (matched) => {\r\n      return matched.toUpperCase();\r\n    });\r\n    return `excludeAll${titleCaseName}`;\r\n  }, [name]) as \"excludeAllElements\" | \"excludeAllAttributes\";\r\n\r\n  const affected2 = React.useMemo(()=>{\r\n    if (!customization)return\r\n    const excluded:string[] = []\r\n    const excludedFullPath:string[]=[]\r\n    const included:string[] = []\r\n    subItems?.forEach((item:LixiBase|null|undefined)=>{\r\n      const path = item?.path as string\r\n      const leaf = path.split(\".\").pop() as string\r\n      const customiser = new Customiser(customization, path);\r\n      const affectedList = customiser.affectedDecedents();\r\n      affectedList?.forEach((affected)=>{\r\n        if (affected.textContent?.split(\".\").pop() === leaf){\r\n          if(!!affected?.parentElement?.getAttribute(\"Exclude\") && !excluded.includes(leaf)){\r\n              excluded.push(leaf)\r\n              excludedFullPath.push(affected.textContent)\r\n          }else if(!included.includes(leaf)){\r\n              included.push(leaf)\r\n          }\r\n        } else if(!included.includes(leaf)){\r\n            included.push(leaf)\r\n        }\r\n      })\r\n    })\r\n    return {included:[...included],excluded:[...excluded],excludedFullPath:[...excludedFullPath]}\r\n  },[customization, subItems])\r\n\r\n\r\n  React.useEffect(()=>{\r\n    if (!affected2?.excludedFullPath) return;\r\n    const {excludedFullPath} = affected2\r\n    const deletionList:string[] = []\r\n    excludedFullPath.forEach((exc)=>{\r\n      if(!markedForDeletionList?.includes(exc)){\r\n        deletionList.push(exc)\r\n      }\r\n    })\r\n    setExcludedList((pre)=>({...pre,[name]:[...deletionList]}))\r\n  },[affected2, markedForDeletionList, name, setExcludedList])\r\n  \r\n\r\n  const toggleExclude = React.useCallback((value:string) => {\r\n    if (values[excludeAllItem]) {\r\n      values[excludeAllItem] = false;\r\n    }\r\n    if(!touched[name]){\r\n      setTouched({...touched,[name]:true})\r\n    }\r\n    if (value === \"disable\"){\r\n        setSelectAll({...selectAll,elements:\"disable\",attributes:\"disable\"})\r\n        return \r\n      }\r\n    if(value===\"enable\"){\r\n      return\r\n    }\r\n    setSelectAll({...selectAll,[name]:!selectAll[name]})\r\n  },[excludeAllItem, name, selectAll, touched, values]);\r\n \r\n  return (\r\n    <>\r\n      <List className={classes.subItem}>\r\n        <FieldArray\r\n          name={name}\r\n          render={(arrayHelper) => (\r\n            <div>\r\n              <LixiListItemHeader\r\n                name={includeAllItem}\r\n                exclusion={exclusion}\r\n                header={header}\r\n                excluded={affected2?.excluded || []}\r\n                included={affected2?.included || []}\r\n                items={subItems}\r\n                arrayHelper={arrayHelper}\r\n                selectedItemsLength={values[name].length}\r\n                listName={name}\r\n                toggle={toggleExclude}\r\n              />\r\n              {subItems?.map((subEle, idx) => {\r\n                if (!subEle?.path) {\r\n                  return <p></p>;\r\n                }\r\n                return (\r\n                  <LixiListItem\r\n                    key={`${idx}-${subEle.path}`}\r\n                    exclusion={exclusion}\r\n                    fixedListItem={fixedListItem}\r\n                    includeAll={includeAllItem}\r\n                    excludeAll={excludeAllItem}\r\n                    listName={name}\r\n                    element={subEle}\r\n                    selectAll={selectAll[name]}\r\n                    touched={touched[name]}\r\n                    toggleSelectAll={toggleExclude}\r\n                    excluded={affected2?.excluded || []}\r\n                    included={affected2?.included || []}\r\n                    arrayHelper={arrayHelper}\r\n                  />\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        />\r\n      </List>\r\n    </>\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {},\r\n\r\n    helperText: {\r\n      width: \"100%\",\r\n      padding: \"0.5rem 0.2rem\",\r\n      position: \"absolute\",\r\n      background: \"#fff8e1\",\r\n      borderColor: theme.palette.error.main,\r\n      borderStyle: \"solid\",\r\n      borderWidth: \"0.1rem\",\r\n      borderRadius: \"0.2rem\",\r\n      zIndex: 20,\r\n      boxSizing: \"border-box\",\r\n      marginTop: \"2.7rem\",\r\n    },\r\n  })\r\n);\r\n","import TextField, { TextFieldProps } from \"@material-ui/core/TextField\";\r\nimport React from \"react\";\r\nimport { useField, FieldAttributes } from \"formik\";\r\nimport { useStyles } from \"./appTextFieldStyle\";\r\n\r\ntype AppTextFieldProps = TextFieldProps & FieldAttributes<{}>;\r\n\r\nexport const AppTextField: React.FC<AppTextFieldProps> = ({ ...props }) => {\r\n  const [field, meta] = useField<{}>(props);\r\n  const classes = useStyles();\r\n  return (\r\n    <TextField\r\n      FormHelperTextProps={{\r\n        className: classes.helperText,\r\n      }}\r\n      {...field}\r\n      {...props}\r\n      error={!!(meta.touched && meta.error)}\r\n      helperText={meta.error && meta.touched ? meta.error : undefined}\r\n    />\r\n  );\r\n};\r\n","import Grid from \"@material-ui/core/Grid\";\r\nimport React from \"react\";\r\nimport { AppTextField } from \"../formik-mterial-ui/AppTextField\";\r\nimport { useFormikContext } from \"formik\";\r\n\r\nexport const ExcerptDocumentation: React.FC = ({ children }) => {\r\n  const excerptTooltip = `\r\n  A short description - explaining the item usage.\r\n  `;\r\n  const documentationTooltip = `\r\n  An alternative description - explaining the item usage.\r\n  `;\r\n  const customHeadingTooltip = `A custom heading for the documentation`;\r\n  const { values } = useFormikContext<{\r\n    excerpt: string;\r\n    documentation: string;\r\n    heading: string;\r\n  }>();\r\n\r\n  return (\r\n    <Grid container spacing={2}>\r\n      \r\n      <Grid item xs={12} sm={children?6:12}>\r\n        <AppTextField\r\n          title={customHeadingTooltip}\r\n          variant=\"outlined\"\r\n          multiline\r\n          fullWidth\r\n          rows={1}\r\n          name=\"heading\"\r\n          value={values.heading}\r\n          label=\"Custom Heading\"\r\n        />\r\n      </Grid>\r\n      {children}\r\n      <Grid item xs={12} sm={6}>\r\n        <AppTextField\r\n          title={excerptTooltip}\r\n          variant=\"outlined\"\r\n          multiline\r\n          fullWidth\r\n          rows={4}\r\n          name=\"excerpt\"\r\n          value={values.excerpt}\r\n          label=\"Custom Excerpt\"\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12} sm={6}>\r\n        <AppTextField\r\n          title={documentationTooltip}\r\n          variant=\"outlined\"\r\n          multiline\r\n          fullWidth\r\n          rows={4}\r\n          name=\"documentation\"\r\n          value={values.documentation}\r\n          label=\"Custom Documentation\"\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    subItemHeader: {\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      backgroundColor: \"#fff8e1\",\r\n      marginBottom: \"0.2rem\",\r\n      borderRadius: \"0.2rem\",\r\n      maxHeight: \"5rem\",\r\n      color: theme.palette.primary.main,\r\n    },\r\n    subItem: {\r\n      height: \"12rem\",\r\n      maxHeight: \"12rem\",\r\n      overflow: \"scroll\",\r\n    },\r\n    saveMinMax: {\r\n      width:\"100%\",\r\n      margin:\"auto\",\r\n      // padding: \"0.5rem 0\",\r\n      // display: \"flex\",\r\n      gap: \"0.5rem\",\r\n      // justifyContent: \"space-between\",\r\n      alignItems: \"center\",\r\n    },\r\n    minMaxContainer: {\r\n      // width:\"50%\",\r\n      margin:\"auto\",\r\n      display: \"flex\",\r\n\r\n      justifyContent: \"space-between\",\r\n      gap: \"0.5rem\",\r\n    },\r\n    textFieldMinMax: {\r\n      // width: \"10rem\",\r\n    },\r\n    saveButton: {\r\n      // width: \"100%\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-end\",\r\n    },\r\n    customisationTitleContainer: {\r\n      display: \"flex\",\r\n      justifyContent:  \"space-between\",\r\n      padding: \"0.5rem\",\r\n      backgroundColor: theme.palette.primary.main,\r\n      // color: theme.palette.text.primary,\r\n    },\r\n    customisationTitle: {\r\n      color: theme.palette.getContrastText(theme.palette.primary.main),\r\n    },\r\n    customisationTitleExclusion: {\r\n      color: theme.palette.secondary.main,\r\n    },\r\n    customisationTitleInclusion: {\r\n      color: theme.palette.getContrastText(theme.palette.primary.main),\r\n    },\r\n\r\n    customisationTooltip: {\r\n      // backgroundColor: \"#f5f5f9\",\r\n      // color: \"rgba(0, 0, 0, 0.87)\",\r\n      // maxWidth: 220,\r\n      // fontSize: theme.typography.pxToRem(12),\r\n      // border: \"1px solid #dadde9\",\r\n    },\r\n  })\r\n);\r\n","import Button from \"@material-ui/core/Button\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport { Form, Formik } from \"formik\";\r\nimport React from \"react\";\r\nimport { useAction } from \"../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\nimport { CustomisedElementType } from \"../../models/customisationTypes\";\r\nimport { Customiser } from \"../../models/Customiser\";\r\nimport { ElementCustomiser } from \"../../models/ElementCustomiser\";\r\nimport { LixiBase } from \"../../models/LixiBase\";\r\nimport { ElementSubItems } from \"../element-sub-items/ElementSubItems\";\r\nimport { ExcerptDocumentation } from \"../excerpt-documentation/ExcerptDocumentation\";\r\nimport { AppTextField } from \"../formik-mterial-ui/AppTextField\";\r\nimport { CustomiseElementSchema } from \"./customiseElementSchema\";\r\nimport { useStyles } from \"./customiseElementStyle\";\r\nimport DoneOutlinedIcon from \"@material-ui/icons/DoneOutlined\";\r\n\r\ninterface ICustomiseElement {\r\n  lixiItem: LixiBase | undefined;\r\n}\r\ntype SubElement = { [key: string]: Element[] };\r\n\r\nexport const CustomiseElement: React.FC<ICustomiseElement> = ({ lixiItem }) => {\r\n  const classes = useStyles();\r\n  const previousValues = React.useRef<CustomisedElementType>()\r\n  const { updateCustomisation } = useAction();\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n  const { markedForDeletionList } = useTypedSelector((state) => state.item);\r\n  const [initialValue, setInitialValue] = React.useState<CustomisedElementType>(\r\n    {\r\n      newMin: \"\",\r\n      newMax: \"\",\r\n      includeAllElements: true,\r\n      excludeAllElements: false,\r\n      includeAllAttributes: true,\r\n      excludeAllAttributes: false,\r\n      elements: [],\r\n      attributes: [],\r\n      excerpt: \"\",\r\n      documentation: \"\",\r\n      heading: \"\",\r\n    }\r\n  );\r\n\r\n  const [checked, setChecked] = React.useState(true);\r\n  const [itemSubElement, setItemSubElement] = React.useState<SubElement>({});\r\n  const [itemAttributes, setItemAttributes] = React.useState<Element[]>([]);\r\n  const [excludedList, setExcludedList] = React.useState<{\r\n    elements: string[];\r\n    attributes: string[];\r\n  }>({ elements: [], attributes: [] });\r\n  const [fixedListItem, setFixedListItems] = React.useState<{\r\n    elements: string[];\r\n    attributes: string[];\r\n  }>({ elements: [], attributes: [] });\r\n\r\n  const [occursMinMax, setOccursMinMax] = React.useState<\r\n    | {\r\n        min: string | null | undefined;\r\n        max: string | null | undefined;\r\n      }\r\n    | undefined\r\n  >();\r\n  \r\n  React.useEffect(()=>{\r\n    previousValues.current = {\r\n      ...initialValue,\r\n      elements:[...initialValue.elements],\r\n      attributes:[...initialValue.attributes]\r\n    }\r\n  },[initialValue])\r\n\r\n  const leafAttribs = React.useMemo(() => {\r\n    return itemAttributes?.map((item, idx) => {\r\n      const itemEle = new LixiBase(item);\r\n      if (itemEle) {\r\n        return itemEle;\r\n      }\r\n      return undefined;\r\n    });\r\n  }, [itemAttributes]);\r\n  const attributesPaths = React.useMemo(()=>{\r\n    const results:string[] = []\r\n    leafAttribs?.forEach((att,idx)=>{\r\n      if(att?.path){\r\n        results.push(att.path)\r\n      }\r\n    })\r\n    return results\r\n  },[leafAttribs])\r\n \r\n  const leafEle = React.useMemo(() => {\r\n    return (itemSubElement[\"choice\"] || itemSubElement[\"sequence\"])?.map(\r\n      (item, idx) => {\r\n        const itemEle = new LixiBase(item);\r\n        return itemEle;\r\n      }\r\n    );\r\n  }, [itemSubElement]);\r\n\r\n  const elementsPaths = React.useMemo(()=>{\r\n    const results:string[] = []\r\n    leafEle?.forEach((att,idx)=>{\r\n      if(att?.path){\r\n        results.push(att.path)\r\n      }\r\n    })\r\n    return results\r\n  },[leafEle])\r\n  \r\n  const excludeNotIncludedItems = React.useCallback(()=>{\r\n    const paths = [...elementsPaths,...attributesPaths]\r\n    const copyAttributes = [...(previousValues.current?.attributes||[])]\r\n    const copyElements = [...(previousValues.current?.elements||[])]\r\n    const leafItems = [...copyAttributes,...copyElements]\r\n    if (!(lixiItem && lixiItem?.path))return\r\n      const newCustomisation = new ElementCustomiser(customization,lixiItem?.path)\r\n      newCustomisation.removeElementsAndAttributes()\r\n      paths.forEach((path,idx)=>{\r\n        const leafItem = path?.split(\".\").pop()\r\n        if( leafItem && !leafItems.includes(leafItem)){\r\n          newCustomisation.excludeByPath(path)\r\n        }\r\n      })\r\n      updateCustomisation(newCustomisation.customisation);\r\n  },[attributesPaths, customization, elementsPaths, lixiItem, updateCustomisation])\r\n\r\n  React.useEffect(() => {\r\n    if (!lixiItem?.path) return;\r\n    const newCustomisation = new ElementCustomiser(\r\n      customization,\r\n      lixiItem?.path\r\n    );\r\n    const instruction = newCustomisation.customisedObject();\r\n    if (\r\n      (instruction.attributes.length ||\r\n      instruction.elements.length) \r\n     ){\r\n        setChecked(false)\r\n      }else{\r\n      \r\n      }\r\n    \r\n    setInitialValue(instruction);\r\n    if (!instruction.elements.length && !instruction.attributes.length) return;\r\n    setFixedListItems({\r\n      elements: [...instruction.elements],\r\n      attributes: [...instruction.attributes],\r\n    });\r\n  }, [ customization, lixiItem?.path]);\r\n\r\n  \r\n\r\n  const toggleIncludeExclude = (\r\n    event: React.ChangeEvent<HTMLInputElement>,\r\n    submitForm:(() => Promise<void>) & (() => Promise<any>),\r\n    values:CustomisedElementType) => {\r\n      const copyInitialValues = {...values,elements:[...values['elements']],attributes:[...values[\"attributes\"]]}\r\n      \r\n    setInitialValue({...copyInitialValues, elements:[],attributes:[]})\r\n    if (event.target.checked){\r\n      excludeNotIncludedItems()\r\n      setInitialValue({...copyInitialValues, elements:[],attributes:[]})\r\n      setChecked(event.target.checked);\r\n      return \r\n    }\r\n   \r\n    if(!event.target.checked){\r\n      const copyListAttributes = [...values[\"attributes\"]]\r\n      attributesPaths.forEach((path,idx)=>{\r\n          const leafItem =path.split(\".\").pop() \r\n          if(leafItem && !copyListAttributes.includes(leafItem) && !excludedList.attributes.includes(path) ){\r\n            copyListAttributes.push(leafItem) \r\n          }\r\n        })\r\n        \r\n        copyInitialValues[\"attributes\"] = [...copyListAttributes]\r\n\r\n      const copyListElements = [...values[\"elements\"]]\r\n      elementsPaths.forEach((path,idx)=>{\r\n          const leafItem =path.split(\".\").pop() \r\n          if(leafItem && !copyListElements.includes(leafItem) && !excludedList.elements.includes(path) ){\r\n            copyListElements.push(leafItem) \r\n          }\r\n        })\r\n       \r\n        copyInitialValues[\"elements\"] = [...copyListElements]\r\n        \r\n        setInitialValue(copyInitialValues)\r\n    }\r\n    submitForm()\r\n    setChecked(event.target.checked);\r\n  };\r\n\r\n\r\n  React.useEffect(() => {\r\n    const subElement = lixiItem?.lixiSubElements;\r\n    const attributes = lixiItem?.attributes;\r\n    if (subElement) {\r\n      setItemSubElement(subElement);\r\n    }\r\n    if (attributes?.length) {\r\n      setItemAttributes(attributes);\r\n    }\r\n  }, [lixiItem]);\r\n\r\n  React.useEffect(() => {\r\n    const occurrenceMinMax = {\r\n      min: lixiItem?.element.getAttribute(\"minOccurs\"),\r\n      max: lixiItem?.element.getAttribute(\"maxOccurs\"),\r\n    };\r\n    setOccursMinMax(occurrenceMinMax);\r\n  }, [lixiItem?.element]);\r\n\r\n  const deleteInstruction = () => {\r\n    if (!lixiItem?.path) return;\r\n    const newCustomisation = new ElementCustomiser(\r\n      customization,\r\n      lixiItem?.path\r\n    );\r\n    const removedItem = newCustomisation.removeCustomisedItem();\r\n    if (removedItem) {\r\n      updateCustomisation(newCustomisation.customisation);\r\n    }\r\n    setInitialValue(newCustomisation.customisedObject())\r\n    setFixedListItems({\r\n      elements: [],\r\n      attributes: [],\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Formik\r\n      enableReinitialize\r\n      initialValues={initialValue}\r\n      validationSchema={() =>\r\n        CustomiseElementSchema(occursMinMax?.min, occursMinMax?.max)\r\n      }\r\n      onSubmit={(values, { setSubmitting }) => {\r\n        setSubmitting(true);\r\n        if (!lixiItem?.path) return;\r\n\r\n        // alert(JSON.stringify(values, null, 2));\r\n        const newCustomisation = new ElementCustomiser(\r\n          customization,\r\n          lixiItem?.path,\r\n          values\r\n        );\r\n        const { elements, attributes } = excludedList;\r\n        if (markedForDeletionList) {\r\n          newCustomisation.removeCustomisation([...markedForDeletionList]);\r\n        }\r\n        if (elements.length) {\r\n          newCustomisation.removeCustomisation([...elements]);\r\n        }\r\n        if (attributes.length) {\r\n          newCustomisation.removeCustomisation([...attributes]);\r\n        }\r\n        newCustomisation.customise();\r\n        updateCustomisation(newCustomisation.customisation);\r\n\r\n        setSubmitting(false);\r\n        // searchItem(lixiItem.path);\r\n        // setTimeout(() => {\r\n        // }, 400);\r\n      }}\r\n    >\r\n      {({ isSubmitting, values, errors, touched, submitForm }) => (\r\n        <Form>\r\n          <Paper style={{ padding: \"0.5rem\" }}>\r\n            <Grid container spacing={1}>\r\n              <Grid item xs={12}>\r\n                <Paper className={classes.customisationTitleContainer}>\r\n                  <div>\r\n                    <Switch\r\n                      checked={checked}\r\n                      onChange={(e) =>\r\n                        toggleIncludeExclude(e, submitForm, values)\r\n                      }\r\n                      inputProps={{ \"aria-label\": \"controlled\" }}\r\n                    />\r\n                    <Typography\r\n                      variant=\"button\"\r\n                      className={classes.customisationTitle}\r\n                    >\r\n                      {\" \"}\r\n                      Customisation by&nbsp;\r\n                    </Typography>\r\n                    {checked && (\r\n                      <Tooltip\r\n                        title={\r\n                          <div\r\n                            style={{\r\n                              backgroundColor: \"#fff\",\r\n                              margin: 0,\r\n                              color: \"#333\",\r\n                              padding: \"0.5rem\",\r\n                            }}\r\n                          >\r\n                            <Typography color=\"primary\" variant=\"h6\">\r\n                              <u>Exclusion Mode</u>\r\n                            </Typography>\r\n                            <Typography component=\"div\" color=\"textPrimary\">\r\n                              The&nbsp;\r\n                              <Typography variant=\"caption\" color=\"secondary\">\r\n                                excluded\r\n                              </Typography>\r\n                              &nbsp;item(s) will not appear in the customised\r\n                              schema\r\n                            </Typography>\r\n                          </div>\r\n                        }\r\n                      >\r\n                        <Typography\r\n                          variant=\"button\"\r\n                          className={classes.customisationTitleExclusion}\r\n                        >\r\n                          <u>\r\n                            <em>Exclusion</em>\r\n                          </u>\r\n                        </Typography>\r\n                      </Tooltip>\r\n                    )}\r\n                    {!checked && (\r\n                      <Tooltip\r\n                        title={\r\n                          <div\r\n                            style={{\r\n                              backgroundColor: \"#fff\",\r\n                              margin: 0,\r\n                              color: \"#333\",\r\n                              padding: \"0.5rem\",\r\n                            }}\r\n                          >\r\n                            <Typography color=\"primary\" variant=\"h6\">\r\n                              <u>Inclusion Mode</u>\r\n                            </Typography>\r\n                            <Typography color=\"textPrimary\">\r\n                              ONLY the included item(s)&nbsp;\r\n                              <DoneOutlinedIcon\r\n                                style={{ color: \"green\" }}\r\n                                fontSize=\"small\"\r\n                              />\r\n                              of the parent element will appear in the\r\n                              customised schema.\r\n                            </Typography>\r\n                          </div>\r\n                        }\r\n                      >\r\n                        <Typography\r\n                          variant=\"button\"\r\n                          className={classes.customisationTitleInclusion}\r\n                        >\r\n                          <u>\r\n                            <em>Inclusion</em>\r\n                          </u>\r\n                        </Typography>\r\n                      </Tooltip>\r\n                    )}\r\n                  </div>\r\n                  <div className={classes.saveButton}>\r\n                    <Button\r\n                      size=\"small\"\r\n                      style={{ marginInline: \"0.5rem\" }}\r\n                      onClick={deleteInstruction}\r\n                      variant=\"text\"\r\n                      color=\"secondary\"\r\n                      startIcon={<SaveIcon fontSize=\"large\" />}\r\n                    >\r\n                      Delete\r\n                    </Button>\r\n                    <Button\r\n                      size=\"small\"\r\n                      type=\"submit\"\r\n                      variant=\"text\"\r\n                      color=\"secondary\"\r\n                      startIcon={<SaveIcon fontSize=\"large\" />}\r\n                    >\r\n                      Save\r\n                    </Button>\r\n                  </div>\r\n                </Paper>\r\n              </Grid>\r\n\r\n              {leafEle?.length ? (\r\n                <Grid item xs={12} sm={itemAttributes?.length ? 6 : 12}>\r\n                  <ElementSubItems\r\n                    setExcludedList={setExcludedList}\r\n                    fixedListItem={fixedListItem[\"elements\"]}\r\n                    exclusion={checked}\r\n                    key={\"element\"}\r\n                    value={values.elements}\r\n                    header={`Sub-Elements ${\r\n                      itemSubElement[\"choice\"] ? \"CHOICE\" : \"(SEQUENCE)\"\r\n                    }`}\r\n                    subItems={leafEle}\r\n                    name=\"elements\"\r\n                  />\r\n                </Grid>\r\n              ) : undefined}\r\n              {leafAttribs?.length ? (\r\n                <Grid item xs={12} sm={leafEle?.length ? 6 : 12}>\r\n                  <ElementSubItems\r\n                    setExcludedList={setExcludedList}\r\n                    fixedListItem={fixedListItem[\"attributes\"]}\r\n                    exclusion={checked}\r\n                    key=\"attribute\"\r\n                    value={values.attributes}\r\n                    header=\"Attributes\"\r\n                    subItems={leafAttribs}\r\n                    name=\"attributes\"\r\n                  />\r\n                </Grid>\r\n              ) : undefined}\r\n\r\n              <Grid item xs={12}>\r\n                <ExcerptDocumentation>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <div className={classes.saveMinMax}>\r\n                      <div className={classes.minMaxContainer}>\r\n                        <AppTextField\r\n                          // className={classes.textFieldMinMax}\r\n                          name=\"newMin\"\r\n                          size=\"medium\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          label=\"New Min Occurs\"\r\n                          disabled={\r\n                            occursMinMax?.min === \"1\" &&\r\n                            occursMinMax?.max === \"1\"\r\n                          }\r\n                          value={values?.newMin}\r\n                        />\r\n\r\n                        <AppTextField\r\n                          // className={classes.textFieldMinMax}\r\n                          name=\"newMax\"\r\n                          size=\"medium\"\r\n                          fullWidth\r\n                          variant=\"outlined\"\r\n                          label=\"New Max Occurs\"\r\n                          disabled={occursMinMax?.max === \"1\"}\r\n                          value={values?.newMax}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </Grid>\r\n                </ExcerptDocumentation>\r\n              </Grid>\r\n            </Grid>\r\n          </Paper>\r\n          {/* <pre>{JSON.stringify(values, null, 2)}</pre> */}\r\n          {/* <pre>{JSON.stringify(markedForDeletionList, null, 2)}</pre> */}\r\n          {/* <pre>{JSON.stringify(excludedList[\"attributes\"], null, 2)}</pre> */}\r\n          {/* <pre>{JSON.stringify(excludedList[\"elements\"], null, 2)}</pre> */}\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n","import * as Yup from \"yup\";\r\n\r\nexport const CustomiseElementSchema = (\r\n  currentMin: string | null | undefined,\r\n  currentMax: string | null | undefined\r\n) => {\r\n  const min = currentMin ? parseInt(currentMin) : 0;\r\n  const max = currentMax && parseInt(currentMax) ? parseInt(currentMax) : 99999;\r\n\r\n  return Yup.object().shape(\r\n    {\r\n      newMin: Yup.number().moreThan(min).max(max),\r\n      newMax: Yup.number()\r\n        .max(max - 1)\r\n        .test({\r\n          name: \"min\",\r\n          exclusive: false,\r\n          message: \"Must be greater than new min occurs\",\r\n          params: {},\r\n          test: function (value) {\r\n            if (value && this.parent.newMin) {\r\n              return value > this.parent.newMin;\r\n            }\r\n            return true;\r\n          },\r\n        }),\r\n\r\n      excerpt: Yup.string().max(100),\r\n      documentation: Yup.string().max(100),\r\n    },\r\n    [[\"newMin\", \"newMax\"]]\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      marginTop: \"1rem\",\r\n      backgroundColor: \"##fafafa\",\r\n      border: \"solid #333 0.1rem\",\r\n      borderRadius: \"0.3rem\",\r\n    },\r\n    header: {\r\n      display: \"flex\",\r\n      padding: \"0.5rem\",\r\n      justifyContent: \"space-between\",\r\n      backgroundColor: \"#fff8e1\",\r\n      marginBottom: \"0.2rem\",\r\n      borderRadius: \"0.1rem\",\r\n      alignItems: \"center\",\r\n    },\r\n    subItemHeader: {\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      backgroundColor: \"#fff8e1\",\r\n      marginBottom: \"0.2rem\",\r\n      borderRadius: \"0.2rem\",\r\n      maxHeight: \"5rem\",\r\n      color: theme.palette.primary.main,\r\n    },\r\n    subItem: {\r\n      height: \"12rem\",\r\n      maxHeight: \"12rem\",\r\n      overflow: \"scroll\",\r\n    },\r\n\r\n    itemLabelDescription: {\r\n      padding: \"0.1rem\",\r\n      margin: \"0.5rem\",\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      alignItems: \"center\",\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        display: \"inline-block\",\r\n      },\r\n    },\r\n    attributes: {\r\n      margin: theme.spacing(1.5, 0, 0, 0),\r\n      padding: \"0.1rem 1rem\",\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        display: \"inline-block\",\r\n      },\r\n    },\r\n    references: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n    },\r\n    alert: {\r\n      color: \"orange\",\r\n      backgroundColor: \"#333\",\r\n      \"&:hover\": {\r\n        color: \"#333\",\r\n        backgroundColor: \"orange\",\r\n      },\r\n    },\r\n    typeAttribute: {\r\n      cursor: \"pointer\",\r\n\r\n      \"&:hover\": {\r\n        color: theme.palette.primary.main,\r\n      },\r\n    },\r\n    otherAttribute: {\r\n      cursor: \"not-allowed\",\r\n    },\r\n  })\r\n);\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"center\",\r\n      marginBottom: \"0.5rem\",\r\n      gap: \"0.5rem\",\r\n    },\r\n    paper: {\r\n      padding: \"0.5rem\",\r\n      margin: \"0.5rem 0.2rem\",\r\n    },\r\n    saveButton: {\r\n      width: \"max-content\",\r\n      height: \"max-content\",\r\n    },\r\n  })\r\n);\r\n","import * as Yup from \"yup\";\r\n\r\nexport const integerTypeSchema = Yup.object().shape({\r\n  optionalToMandatory: Yup.boolean(),\r\n  minInteger: Yup.number()\r\n    .min(0, \"Value must be grater than or equal to zero\")\r\n    .typeError(\"Only an integer value allowed\")\r\n    .integer(\"Only an integer value allowed\"),\r\n  maxInteger: Yup.number()\r\n    .positive(\"Value must be grater than zero\")\r\n    .typeError(\"Only an integer value allowed\")\r\n    .integer(\"Only an integer value allowed\")\r\n    .test({\r\n      name: \"minInteger\",\r\n      exclusive: false,\r\n      message: \"Value must be grater than the minimum value\",\r\n      params: {},\r\n      test: function (value) {\r\n        if (value && this.parent.minInteger) {\r\n          return value > this.parent.minInteger;\r\n        }\r\n        return true;\r\n      },\r\n    }),\r\n});\r\n","import { Customiser } from \"./Customiser\";\r\nimport { IntegerTypeAttributeType } from \"./customisationTypes\";\r\n\r\nexport class IntegerTypeAttributeCustomiser extends Customiser {\r\n  object = {} as IntegerTypeAttributeType;\r\n\r\n  constructor(\r\n    customisation: Element | undefined = undefined,\r\n    path?: string,\r\n    values?: IntegerTypeAttributeType\r\n  ) {\r\n    super(customisation, path);\r\n    this.object = values || {\r\n      optionalToMandatory: false,\r\n      excerpt: \"\",\r\n      heading: \"\",\r\n      documentation: \"\",\r\n      minInteger: \"\",\r\n      maxInteger: \"\",\r\n    };\r\n  }\r\n\r\n  customise() {\r\n    const {\r\n      optionalToMandatory,\r\n      documentation,\r\n      excerpt,\r\n      minInteger,\r\n      maxInteger,\r\n    } = this.object;\r\n    if (\r\n      !optionalToMandatory &&\r\n      !minInteger &&\r\n      !maxInteger &&\r\n      !documentation &&\r\n      !excerpt\r\n    ) {\r\n      this.removeCustomisedItem();\r\n      return;\r\n    }\r\n    this.excerpt = excerpt ? excerpt : \"\";\r\n    this.documentation = documentation ? documentation : \"\";\r\n    this.removeCustomisedItem();\r\n    this.itemPath();\r\n    this.setInLineAttributes();\r\n    this.integerMinMax();\r\n    this.customExcerpt();\r\n    this.customDocumentation();\r\n\r\n    this.customisation.append(this.customiseItem);\r\n  }\r\n\r\n  integerMinMax() {\r\n    if (!this.object.minInteger && !this.object.maxInteger) return;\r\n    if (this.object.minInteger) {\r\n      const doc = Customiser.docStub();\r\n      const minInteger = doc.createElement(\"MinInteger\");\r\n      minInteger.textContent = this.object.minInteger.toString().trim();\r\n      this.customiseItem.append(minInteger);\r\n    }\r\n    if (this.object.maxInteger) {\r\n      const doc = Customiser.docStub();\r\n      const maxInteger = doc.createElement(\"MaxInteger\");\r\n      maxInteger.textContent = this.object.maxInteger.toString().trim();\r\n      this.customiseItem.append(maxInteger);\r\n    }\r\n  }\r\n\r\n  setInLineAttributes() {\r\n    const {\r\n      optionalToMandatory,\r\n      heading,\r\n      minInteger,\r\n      maxInteger,\r\n    } = this.object;\r\n    if (heading) {\r\n      this.customiseItem.setAttribute(\"customHeading\", heading);\r\n    }\r\n    if (optionalToMandatory) {\r\n      this.customiseItem.setAttribute(\"OptionalToMandatory\", \"Yes\");\r\n    }\r\n    if (minInteger || maxInteger) {\r\n      this.customiseItem.setAttribute(\"CustomIntegerRange\", \"Yes\");\r\n      return;\r\n    }\r\n  }\r\n\r\n  customisedObject() {\r\n    const customisedAttr = this.getCustomisedItem()?.parentElement;\r\n    if (!customisedAttr) return this.object;\r\n    customisedAttr.getAttributeNames().forEach((att, idx) => {\r\n      switch (att) {\r\n        case \"customHeading\": {\r\n          this.object.heading =\r\n            customisedAttr.getAttribute(\"customHeading\") || \"\";\r\n          break;\r\n        }\r\n        case \"OptionalToMandatory\": {\r\n          this.object.optionalToMandatory = true;\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n\r\n    Array.prototype.forEach.call(customisedAttr.children, (child: Element) => {\r\n      switch (child.localName) {\r\n        case \"CustomExcerpt\":\r\n          const excerpt = child.textContent?.trim();\r\n          this.object.excerpt = excerpt ? excerpt : \"\";\r\n          break;\r\n        case \"CustomDocumentation\":\r\n          const documentation = child.textContent?.trim();\r\n          this.object.documentation = documentation ? documentation : \"\";\r\n          break;\r\n        case \"MinInteger\":\r\n          const minInteger = child.textContent?.trim();\r\n          if (!minInteger) return;\r\n          try {\r\n            // this.object.minInteger = parseInt(minInteger) ? parseInt(minInteger) : undefined;\r\n            this.object.minInteger = minInteger ? minInteger : undefined;\r\n          } catch (error) {}\r\n          break;\r\n        case \"MaxInteger\":\r\n          const maxInteger = child.textContent?.trim();\r\n          if (!maxInteger) return;\r\n          try {\r\n            // this.object.maxInteger = parseInt(maxInteger) ? parseInt(maxInteger) : undefined;\r\n            this.object.maxInteger = maxInteger ? maxInteger : undefined;\r\n          } catch (error) {}\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    return this.object;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { LixiBase } from \"../../../models/LixiBase\";\r\nimport { useStyles } from \"./integerTypeAttributeStyle\";\r\nimport { useAction } from \"../../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../../hooks/useTypeSelector\";\r\nimport { ExcerptDocumentation } from \"../../excerpt-documentation/ExcerptDocumentation\";\r\nimport { AppTextField } from \"../../formik-mterial-ui/AppTextField\";\r\nimport { AppCheckBox } from \"../../formik-mterial-ui/AppCheckBox\";\r\nimport { integerTypeSchema } from \"./integerTypeAttributeSchema\";\r\nimport { IntegerTypeAttributeType } from \"../../../models/customisationTypes\";\r\nimport { IntegerTypeAttributeCustomiser } from \"../../../models/IntegerTypeAttributeCustomiser\";\r\nimport { Form, Formik } from \"formik\";\r\n\r\ninterface ICustomiseIntegerTypeAttribute {\r\n  lixiItem: LixiBase | undefined;\r\n  type?: \"integerType\";\r\n}\r\n\r\nexport const IntegerTypeAttribute: React.FC<ICustomiseIntegerTypeAttribute> = ({\r\n  lixiItem,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { updateCustomisation } = useAction();\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n  const [\r\n    initialValue,\r\n    setInitialValue,\r\n  ] = React.useState<IntegerTypeAttributeType>({\r\n    optionalToMandatory: false,\r\n    excerpt: \"\",\r\n    documentation: \"\",\r\n    heading: \"\",\r\n    minInteger: \"\",\r\n    maxInteger: \"\",\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (!lixiItem?.path) return;\r\n    const newCustomisation = new IntegerTypeAttributeCustomiser(\r\n      customization,\r\n      lixiItem?.path\r\n    );\r\n    const instruction = newCustomisation.customisedObject();\r\n    setInitialValue(instruction);\r\n  }, [customization, lixiItem?.path]);\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={initialValue}\r\n      enableReinitialize\r\n      validationSchema={integerTypeSchema}\r\n      onSubmit={(values, { setSubmitting }) => {\r\n        if (!lixiItem?.path) return;\r\n        setSubmitting(true);\r\n        const attCustomiser = new IntegerTypeAttributeCustomiser(\r\n          customization,\r\n          lixiItem?.path,\r\n          values\r\n        );\r\n        attCustomiser.customise();\r\n        // console.log(\"ci\", attCustomiser.customisation);\r\n        updateCustomisation(attCustomiser.customisation);\r\n        setTimeout(() => {\r\n          alert(JSON.stringify(values, null, 2));\r\n          setSubmitting(false);\r\n        }, 400);\r\n      }}\r\n    >\r\n      {({ isSubmitting, values, errors, touched, resetForm }) => (\r\n        <Form>\r\n          <Paper style={{ padding: \"0.5rem\" }}>\r\n            <FormControl style={{ width: \"100%\" }}>\r\n              <Paper style={{ padding: \"0.5rem\", margin: \"0.5rem 0.2rem\" }}>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    alignItems: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                  }}\r\n                >\r\n                  <AppCheckBox\r\n                    name=\"optionalToMandatory\"\r\n                    color=\"primary\"\r\n                    size=\"medium\"\r\n                    label=\"Optional To Mandatory\"\r\n                    checked={values?.optionalToMandatory}\r\n                  />\r\n                  <Button\r\n                    className={classes.saveButton}\r\n                    size=\"small\"\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<SaveIcon fontSize=\"large\" />}\r\n                  >\r\n                    Save\r\n                  </Button>\r\n                </div>\r\n              </Paper>\r\n            </FormControl>\r\n            <Divider />\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"flex-start\",\r\n                width: \"100%\",\r\n              }}\r\n            >\r\n              <FormControl style={{ width: \"100%\" }}>\r\n                <Paper className={classes.paper}>\r\n                  <div className={classes.container}>\r\n                    <AppTextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      label=\"Minimum\"\r\n                      name=\"minInteger\"\r\n                      placeholder=\"Minimum\"\r\n                      // value={values.minInteger}\r\n                    />\r\n                    <AppTextField\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      label=\"Maximum\"\r\n                      name=\"maxInteger\"\r\n                      placeholder=\"Maximum\"\r\n                      // value={values.maxInteger}\r\n                    />\r\n                  </div>\r\n                </Paper>\r\n              </FormControl>\r\n            </div>\r\n            <ExcerptDocumentation />\r\n          </Paper>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nIntegerTypeAttribute.defaultProps = {\r\n  type: \"integerType\",\r\n};\r\n","import React from \"react\";\r\n\r\ninterface ISwitchAttributeType {\r\n  switchType: string;\r\n  children: React.ReactElement<{\r\n    type:\r\n      | \"stringType\"\r\n      | \"integerType\"\r\n      | \"decimalType\"\r\n      | \"currencyType\"\r\n      | \"listType\";\r\n  }>[];\r\n}\r\nexport const SwitchAttributeType: React.FC<ISwitchAttributeType> = ({\r\n  children,\r\n  switchType,\r\n}) => {\r\n  const regex = /^[a-zA-Z]+List$/;\r\n  const child = children.find(({ props }) => {\r\n    const { type } = props;\r\n\r\n    if (regex.test(switchType)) {\r\n      return type === \"listType\";\r\n    }\r\n    return switchType === type;\r\n  });\r\n  return child || <></>;\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {},\r\n    name: {\r\n      display: \"inline-block\",\r\n      margin: \"0 2px\",\r\n      transform: \"scale(0.8)\",\r\n    },\r\n    definition: {\r\n      marginBottom: 12,\r\n      marginLeft: \"2.7rem\",\r\n      width: \"75ch\",\r\n    },\r\n    saveButton: {\r\n      width: \"max-content\",\r\n      height: \"max-content\",\r\n    },\r\n    enumeratedList: {\r\n      maxHeight: \"15rem\",\r\n      width: \"100%\",\r\n      overflowY: \"scroll\",\r\n    },\r\n  })\r\n);\r\n","import * as Yup from \"yup\";\r\n\r\nexport const customiseAttributeSchema = Yup.object().shape({\r\n  optionalToMandatory: Yup.boolean(),\r\n  stringTo: Yup.string().oneOf([\"list\", \"pattern\"]),\r\n  minInteger: Yup.number()\r\n    .min(0, \"Value must be grater than or equal to zero\")\r\n    .typeError(\"Only an integer value allowed\")\r\n    .integer(\"Only an integer value allowed\"),\r\n  maxInteger: Yup.number()\r\n    .positive(\"Value must be grater than zero\")\r\n    .typeError(\"Only an integer value allowed\")\r\n    .integer(\"Only an integer value allowed\")\r\n    .test({\r\n      name: \"minInteger\",\r\n      exclusive: false,\r\n      message: \"Value must be grater than the minimum value\",\r\n      params: {},\r\n      test: function (value) {\r\n        if (value && this.parent.minInteger) {\r\n          return value > this.parent.minInteger;\r\n        }\r\n        return true;\r\n      },\r\n    }),\r\n  // pattern: Yup.string().test({\r\n  //   name: \"stringTo\",\r\n  //   exclusive: false,\r\n  //   message: \"Must provide a regular expression for the pattern\",\r\n  //   params: {},\r\n  //   test: function (value) {\r\n  //     if (this.parent.stringTo === \"pattern\") {\r\n  //       return !!value;\r\n  //     }\r\n  //     return true;\r\n  //   },\r\n  // }),\r\n\r\n  // \"pattern.regex\": Yup.string().test({\r\n  //   name: \"stringTo\",\r\n  //   exclusive: false,\r\n  //   message: \"Must provide a regular expression for the pattern\",\r\n  //   params: {},\r\n  //   test: function (value) {\r\n  //     if (this.parent.stringTo === \"pattern\") {\r\n  //       console.log(\"value@\", value);\r\n  //       return !!value;\r\n  //     }\r\n  //     return true;\r\n  //   },\r\n  // }),\r\n\r\n  pattern: Yup.object({\r\n    regex: Yup.string(),\r\n    definition: Yup.string(),\r\n  }).test({\r\n    name: \"stringTo\",\r\n    exclusive: false,\r\n    message: \"Must provide a valid regular expression for the pattern\",\r\n    params: {},\r\n    test: function (value) {\r\n      if (this.parent.stringTo === \"pattern\") {\r\n        console.log(\"value\", value);\r\n        if (!value.regex) return false;\r\n        try {\r\n          return !!new RegExp(value.regex);\r\n        } catch (error) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n  }),\r\n});\r\n","import React from \"react\";\r\nimport Radio, { RadioProps } from \"@material-ui/core/Radio\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport { FieldAttributes, useField } from \"formik\";\r\n\r\ntype AppRadioButtonType = { label: string } & RadioProps & FieldAttributes<{}>;\r\n\r\nexport const AppRadioButton: React.FC<AppRadioButtonType> = ({\r\n  label,\r\n  onSelect,\r\n  ...props\r\n}) => {\r\n  const [field] = useField<{}>(props);\r\n  return (\r\n    <FormControlLabel\r\n      {...field}\r\n      control={<Radio onSelect={onSelect} color=\"primary\" />}\r\n      label={label}\r\n    />\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"center\",\r\n      marginBottom: \"0.5rem\",\r\n      width: \"100%\",\r\n    },\r\n    helperText: {\r\n      width: \"20rem\",\r\n      padding: \"0.5rem 0.2rem\",\r\n      position: \"absolute\",\r\n      background: \"#fff8e1\",\r\n      borderColor: theme.palette.error.main,\r\n      borderStyle: \"solid\",\r\n      borderWidth: \"0.1rem\",\r\n      borderRadius: \"0.2rem\",\r\n      zIndex: 20,\r\n      boxSizing: \"border-box\",\r\n      // marginTop: \"2.7rem\",\r\n    },\r\n  })\r\n);\r\n","import Collapse from \"@material-ui/core/Collapse\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { FormikState, useFormikContext } from \"formik\";\r\nimport React from \"react\";\r\nimport { StringTypeAttributeType } from \"../../../../models/customisationTypes\";\r\nimport { AppRadioButton } from \"../../../formik-mterial-ui/AppRadioButton\";\r\nimport { AppTextField } from \"../../../formik-mterial-ui/AppTextField\";\r\n\r\nimport { useStyles } from \"./stringToPatternStyle\";\r\n\r\ninterface IStringToPattern {\r\n  resetForm: (\r\n    nextState?: Partial<FormikState<StringTypeAttributeType>> | undefined\r\n  ) => void;\r\n}\r\n\r\nexport const StringToPattern: React.FC<IStringToPattern> = ({ resetForm }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    values,\r\n    errors,\r\n    touched,\r\n  } = useFormikContext<StringTypeAttributeType>();\r\n  return (\r\n    <Paper style={{ padding: \"0.5rem\", margin: \"0.5rem 0.2rem\" }}>\r\n      <div className={classes.container}>\r\n        <AppRadioButton\r\n          name=\"stringTo\"\r\n          type=\"radio\"\r\n          value=\"pattern\"\r\n          label=\"String To Pattern\"\r\n        />\r\n        <Collapse\r\n          style={{ width: \"100%\", marginTop: \"0.5rem\" }}\r\n          onExit={() =>\r\n            resetForm({\r\n              values: {\r\n                ...values,\r\n                pattern: { ...values.pattern, regex: \"\", definition: \"\" },\r\n              },\r\n            })\r\n          }\r\n          in={values.stringTo === \"pattern\"}\r\n        >\r\n          {/* <FormHelperText error={!!errors.pattern}>\r\n            {errors.pattern}\r\n          </FormHelperText> */}\r\n          <div>\r\n            <AppTextField\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              label=\"Regex Expression\"\r\n              name=\"pattern.regex\"\r\n              placeholder=\"Regex Expression\"\r\n              // value={values.pattern?.regex}\r\n            />\r\n\r\n            {touched.pattern && errors.pattern ? (\r\n              <FormHelperText\r\n                className={classes.helperText}\r\n                error={!!errors.pattern}\r\n              >\r\n                {errors.pattern}\r\n              </FormHelperText>\r\n            ) : null}\r\n          </div>\r\n          <div style={{ marginTop: \"0.5rem\" }}>\r\n            <AppTextField\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              label=\"Regex Definition\"\r\n              name=\"pattern.definition\"\r\n              placeholder=\"Regex Definition\"\r\n              // value={values.pattern?.definition}\r\n            />\r\n          </div>\r\n        </Collapse>\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n","import * as Yup from \"yup\";\r\n\r\nexport const stringToEnumeratedListSchema = Yup.object().shape({\r\n  definition: Yup.string()\r\n    .required()\r\n    .matches(/^[a-zA-Z0-9 '\"%]*$/, {\r\n      message: \"Only alphanumerical values, % and quotes are allowed\",\r\n    })\r\n    .min(3),\r\n  name: Yup.string()\r\n    .required()\r\n    .matches(/^[a-zA-Z0-9 '\"%]*$/, {\r\n      message: \"Only alphanumerical values, % and quotes are allowed\",\r\n    })\r\n    .min(3),\r\n});\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      error: {\r\n        position: \"fixed\",\r\n      },\r\n    },\r\n    header: {\r\n      display: \"flex\",\r\n      padding: theme.spacing(0.5, 1, 1.5),\r\n      justifyContent: \"space-between\",\r\n      backgroundColor: \"#fff8e1\",\r\n      marginBottom: \"0.2rem\",\r\n      borderRadius: \"0.1rem\",\r\n      alignItems: \"center\",\r\n    },\r\n    textField: {\r\n      backgroundColor: \"#fff\",\r\n    },\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport { Formik, useFormikContext } from \"formik\";\r\nimport { stringToEnumeratedListSchema } from \"./stringToListHeaderSchema\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { AppTextField } from \"../../../formik-mterial-ui/AppTextField\";\r\nimport ControlPointRoundedIcon from \"@material-ui/icons/ControlPointRounded\";\r\nimport IconButton from \"@material-ui/core/IconButton/IconButton\";\r\nimport { useStyles } from \"./stringToListHeaderStyle\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\ninterface ITypeFormikValue {\r\n  optionalToMandatory: boolean;\r\n  stringTo: string;\r\n  enumerations: { definition: string; name: string }[];\r\n}\r\n\r\nexport const StringToListHeader: React.FC = () => {\r\n  const classes = useStyles();\r\n  const [nameAlert, setNameAlert] = React.useState(false);\r\n  const { getFieldHelpers, values } = useFormikContext<ITypeFormikValue>();\r\n  return (\r\n    <Formik\r\n      initialValues={{ definition: \"\", name: \"\", enumList: [] }}\r\n      onSubmit={(val, { resetForm }) => {\r\n        if (values.enumerations.some((e) => e.name === val.name)) {\r\n          setNameAlert(true);\r\n          return;\r\n        }\r\n\r\n        const valuesCopy = [...values.enumerations];\r\n        valuesCopy.push(val);\r\n        getFieldHelpers(\"enumerations\").setValue(valuesCopy);\r\n        resetForm();\r\n      }}\r\n      validationSchema={stringToEnumeratedListSchema}\r\n    >\r\n      {(formik) => (\r\n        <Paper className={classes.header}>\r\n          <Grid container alignItems=\"center\" spacing={3}>\r\n            <Grid item xs={12} sm={5}>\r\n              <AppTextField\r\n                className={classes.textField}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"name\"\r\n                placeholder=\"Name\"\r\n                label=\"Name\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={5}>\r\n              <AppTextField\r\n                className={classes.textField}\r\n                size=\"small\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                name=\"definition\"\r\n                placeholder=\"Definition\"\r\n                label=\"Definition\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={2}>\r\n              <IconButton\r\n                onClick={formik.submitForm}\r\n                color=\"primary\"\r\n                aria-label=\"delete\"\r\n              >\r\n                <ControlPointRoundedIcon fontSize=\"large\" />\r\n              </IconButton>\r\n            </Grid>\r\n            <Snackbar\r\n              anchorOrigin={{ horizontal: \"right\", vertical: \"bottom\" }}\r\n              open={nameAlert}\r\n              autoHideDuration={2000}\r\n              onClose={() => setNameAlert(false)}\r\n            >\r\n              <Alert onClose={() => setNameAlert(false)} severity=\"error\">\r\n                <strong>Duplicated Name</strong>\r\n                <em>{`\"${formik.values.name}\"`}</em>\r\n                already exist!\r\n              </Alert>\r\n            </Snackbar>\r\n          </Grid>\r\n        </Paper>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    name: {\r\n      display: \"inline-block\",\r\n      margin: \"0 2px\",\r\n      transform: \"scale(0.8)\",\r\n    },\r\n    definition: {\r\n      marginBottom: 12,\r\n      marginLeft: \"2.7rem\",\r\n      width: \"75ch\",\r\n    },\r\n    root: {\r\n      width: \"100%\",\r\n    },\r\n    row: {\r\n      display: \"flex\",\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"center\",\r\n    },\r\n  })\r\n);\r\n","import Divider from \"@material-ui/core/Divider\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport RemoveCircleOutlineRoundedIcon from \"@material-ui/icons/RemoveCircleOutlineRounded\";\r\nimport React from \"react\";\r\nimport { useStyles } from \"./stringToListBodyStyle\";\r\n\r\ninterface IStringToListBody {\r\n  idx: number;\r\n  remove: (idx: number) => void;\r\n  name: string;\r\n  definition: string;\r\n}\r\n\r\nexport const StringToListBody: React.FC<IStringToListBody> = ({\r\n  idx,\r\n  remove,\r\n  name,\r\n  definition,\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.row}>\r\n        <IconButton\r\n          onClick={() => remove(idx)}\r\n          color=\"secondary\"\r\n          aria-label=\"delete\"\r\n        >\r\n          <RemoveCircleOutlineRoundedIcon fontSize=\"default\" />\r\n        </IconButton>\r\n\r\n        <Typography variant=\"h5\" component=\"h2\">\r\n          {name}\r\n        </Typography>\r\n      </div>\r\n\r\n      <div>\r\n        <Typography className={classes.definition} color=\"textSecondary\">\r\n          {definition}\r\n        </Typography>\r\n      </div>\r\n      <Divider />\r\n    </div>\r\n  );\r\n};\r\n","import { Customiser } from \"./Customiser\";\r\nimport { StringTypeAttributeType } from \"./customisationTypes\";\r\n\r\nexport class StringTypeAttributeCustomiser extends Customiser {\r\n  object = {} as StringTypeAttributeType;\r\n  constructor(\r\n    customisation: Element | undefined = undefined,\r\n    path?: string,\r\n    values?: StringTypeAttributeType\r\n  ) {\r\n    super(customisation, path);\r\n    this.object = values || {\r\n      optionalToMandatory: false,\r\n      pattern: { regex: \"\", definition: \"\" },\r\n      stringTo: \"\",\r\n      excerpt: \"\",\r\n      heading: \"\",\r\n      documentation: \"\",\r\n      enumerations: [],\r\n    };\r\n  }\r\n\r\n  customise() {\r\n    const {\r\n      enumerations,\r\n      optionalToMandatory,\r\n      pattern,\r\n      stringTo,\r\n      documentation,\r\n      excerpt,\r\n    } = this.object;\r\n\r\n    if (\r\n      !enumerations.length &&\r\n      !pattern &&\r\n      !optionalToMandatory &&\r\n      !stringTo &&\r\n      !documentation &&\r\n      !excerpt\r\n    ) {\r\n      this.removeCustomisedItem();\r\n      return;\r\n    }\r\n    this.excerpt = excerpt ? excerpt : \"\";\r\n    this.documentation = documentation ? documentation : \"\";\r\n    this.removeCustomisedItem();\r\n    this.itemPath();\r\n    this.customPattern();\r\n    this.setInLineAttributes();\r\n    this.customExcerpt();\r\n    this.customDocumentation();\r\n    this.customEnumeration();\r\n    this.customisation.append(this.customiseItem);\r\n  }\r\n\r\n  customEnumeration() {\r\n    if (!this.object.enumerations.length) return;\r\n    const doc = Customiser.docStub();\r\n    this.object.enumerations.forEach(({ definition, name }, idx) => {\r\n      const enumeration = doc.createElement(\"Enumeration\");\r\n      enumeration.textContent = name.trim();\r\n      enumeration.setAttribute(\"Definition\", definition);\r\n      this.customiseItem.append(enumeration);\r\n    });\r\n  }\r\n  customPattern() {\r\n    if (this.object.stringTo !== \"pattern\") return;\r\n    const doc = Customiser.docStub();\r\n    const pattern = doc.createElement(\"Pattern\");\r\n    if (this.object.pattern) {\r\n      const { regex, definition } = this.object.pattern;\r\n      if (regex) {\r\n        pattern.textContent = regex?.toString();\r\n      }\r\n      if (definition) {\r\n        pattern.setAttribute(\"Definition\", definition);\r\n      }\r\n    }\r\n    this.customiseItem.append(pattern);\r\n  }\r\n\r\n  setInLineAttributes() {\r\n    const {\r\n      optionalToMandatory,\r\n      stringTo,\r\n      enumerations,\r\n      heading,\r\n    } = this.object;\r\n    if (heading) {\r\n      this.customiseItem.setAttribute(\"customHeading\", heading);\r\n    }\r\n    if (optionalToMandatory) {\r\n      this.customiseItem.setAttribute(\"OptionalToMandatory\", \"Yes\");\r\n    }\r\n    if (stringTo === \"pattern\") {\r\n      this.customiseItem.setAttribute(\"StringToPattern\", \"Yes\");\r\n      return;\r\n    }\r\n    if (stringTo === \"list\" && enumerations.length) {\r\n      this.customiseItem.setAttribute(\"StringToList\", \"Yes\");\r\n      return;\r\n    }\r\n  }\r\n\r\n  customisedObject() {\r\n    const customisedAttr = this.getCustomisedItem()?.parentElement;\r\n    if (!customisedAttr) return this.object;\r\n    customisedAttr.getAttributeNames().forEach((att, idx) => {\r\n      switch (att) {\r\n        case \"customHeading\": {\r\n          this.object.heading =\r\n            customisedAttr.getAttribute(\"customHeading\") || \"\";\r\n          break;\r\n        }\r\n        case \"OptionalToMandatory\": {\r\n          this.object.optionalToMandatory = true;\r\n          break;\r\n        }\r\n        case \"StringToPattern\": {\r\n          this.object.stringTo = \"pattern\";\r\n          break;\r\n        }\r\n        case \"StringToList\": {\r\n          this.object.stringTo = \"list\";\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    Array.prototype.forEach.call(customisedAttr.children, (child: Element) => {\r\n      switch (child.localName) {\r\n        case \"Enumeration\":\r\n          const name = child.textContent?.trim();\r\n          const definition = child.getAttribute(\"Definition\");\r\n          if (!name || !definition) return;\r\n          this.object.enumerations.push({ name, definition });\r\n          break;\r\n        case \"CustomExcerpt\":\r\n          const excerpt = child.textContent?.trim();\r\n          this.object.excerpt = excerpt ? excerpt : \"\";\r\n          break;\r\n        case \"CustomDocumentation\":\r\n          const documentation = child.textContent?.trim();\r\n          this.object.documentation = documentation ? documentation : \"\";\r\n          break;\r\n        case \"Pattern\":\r\n          const pattern = child.textContent?.trim();\r\n          const regexDefinition = child.getAttribute(\"Definition\") || \"\";\r\n          this.object.pattern = {\r\n            regex: pattern ? pattern : \"\",\r\n            definition: regexDefinition,\r\n          };\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    return this.object;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { useStyles } from \"./stringTypeAttributeStyle\";\r\nimport { FieldArray, Form, Formik } from \"formik\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport { customiseAttributeSchema } from \"./stringTypeAttributeSchema\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\n\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\n// import { AppTextField } from \"../formik-mterial-ui/AppTextField\";\r\n\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport { LixiBase } from \"../../../models/LixiBase\";\r\nimport { useAction } from \"../../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../../hooks/useTypeSelector\";\r\nimport { StringTypeAttributeType } from \"../../../models/customisationTypes\";\r\nimport { AppCheckBox } from \"../../formik-mterial-ui/AppCheckBox\";\r\nimport { StringToPattern } from \"./string-to-pattern/StringToPattern\";\r\nimport { AppRadioButton } from \"../../formik-mterial-ui/AppRadioButton\";\r\nimport { StringToListHeader } from \"./string-to-list-header/StringToListHeader\";\r\nimport { StringToListBody } from \"./string-to-list-body/StringToListBody\";\r\nimport { ExcerptDocumentation } from \"../../excerpt-documentation/ExcerptDocumentation\";\r\nimport { StringTypeAttributeCustomiser } from \"../../../models/StringTypeAttributeCustomiser\";\r\n\r\n// import { CustomIntegerRange } from \"./custom-integer-range/CustomIntegerRange\";\r\n\r\ninterface ICustomiseAttribute {\r\n  lixiItem: LixiBase | undefined;\r\n  type?: \"stringType\";\r\n}\r\n\r\nexport const StringTypeAttribute: React.FC<ICustomiseAttribute> = ({\r\n  lixiItem,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { updateCustomisation } = useAction();\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n  const [\r\n    initialValue,\r\n    setInitialValue,\r\n  ] = React.useState<StringTypeAttributeType>({\r\n    optionalToMandatory: false,\r\n    pattern: { regex: \"\", definition: \"\" },\r\n    stringTo: \"\",\r\n    excerpt: \"\",\r\n    documentation: \"\",\r\n    heading: \"\",\r\n    enumerations: [],\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (!lixiItem?.path) return;\r\n    const newCustomisation = new StringTypeAttributeCustomiser(\r\n      customization,\r\n      lixiItem?.path\r\n    );\r\n    const instruction = newCustomisation.customisedObject();\r\n    setInitialValue(instruction);\r\n  }, [customization, lixiItem?.path]);\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={initialValue}\r\n      enableReinitialize\r\n      validationSchema={customiseAttributeSchema}\r\n      onSubmit={(values, { setSubmitting }) => {\r\n        console.log(\"values\", values);\r\n        if (!lixiItem?.path) return;\r\n        setSubmitting(true);\r\n        const attCustomiser = new StringTypeAttributeCustomiser(\r\n          customization,\r\n          lixiItem?.path,\r\n          values\r\n        );\r\n        attCustomiser.customise();\r\n        updateCustomisation(attCustomiser.customisation);\r\n        setTimeout(() => {\r\n          alert(JSON.stringify(values, null, 2));\r\n          setSubmitting(false);\r\n        }, 400);\r\n      }}\r\n    >\r\n      {({ isSubmitting, values, errors, touched, resetForm }) => (\r\n        <Form>\r\n          <Paper style={{ padding: \"0.5rem\" }}>\r\n            <FormControl style={{ width: \"100%\" }}>\r\n              <Paper style={{ padding: \"0.5rem\", margin: \"0.5rem 0.2rem\" }}>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    alignItems: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                  }}\r\n                >\r\n                  <AppCheckBox\r\n                    name=\"optionalToMandatory\"\r\n                    color=\"primary\"\r\n                    size=\"medium\"\r\n                    label=\"Optional To Mandatory\"\r\n                    checked={values?.optionalToMandatory}\r\n                    // value={values?.optionalToMandatory}\r\n                  />\r\n                  <Button\r\n                    className={classes.saveButton}\r\n                    size=\"small\"\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<SaveIcon fontSize=\"large\" />}\r\n                  >\r\n                    Save\r\n                  </Button>\r\n                </div>\r\n              </Paper>\r\n            </FormControl>\r\n            <Divider />\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"flex-start\",\r\n                width: \"100%\",\r\n              }}\r\n            >\r\n              <FormControl style={{ width: \"100%\" }}>\r\n                <StringToPattern resetForm={resetForm} />\r\n                <Paper style={{ padding: \"0.5rem\", margin: \"0.5rem 0.2rem\" }}>\r\n                  <AppRadioButton\r\n                    name=\"stringTo\"\r\n                    type=\"radio\"\r\n                    value=\"list\"\r\n                    label=\"String To Enumerated List\"\r\n                  />\r\n\r\n                  <Collapse\r\n                    onExit={() =>\r\n                      resetForm({ values: { ...values, enumerations: [] } })\r\n                    }\r\n                    in={values.stringTo === \"list\"}\r\n                  >\r\n                    <div style={{ width: \"100%\" }}>\r\n                      <StringToListHeader />\r\n                      <FieldArray name=\"enumerations\">\r\n                        {(arrayHelper) => {\r\n                          return (\r\n                            <div className={classes.enumeratedList}>\r\n                              {values.enumerations.map((e, idx) => {\r\n                                return (\r\n                                  <StringToListBody\r\n                                    key={`${e[\"name\"]}-`}\r\n                                    idx={idx}\r\n                                    remove={arrayHelper.remove}\r\n                                    name={e[\"name\"]}\r\n                                    definition={e[\"definition\"]}\r\n                                  />\r\n                                );\r\n                              })}\r\n                            </div>\r\n                          );\r\n                        }}\r\n                      </FieldArray>\r\n                    </div>\r\n                  </Collapse>\r\n                </Paper>\r\n              </FormControl>\r\n            </div>\r\n            <ExcerptDocumentation />\r\n          </Paper>\r\n          {/* <pre>{JSON.stringify(values, null, 2)}</pre>\r\n          <pre>{JSON.stringify(lixiItem?.path, null, 2)}</pre>\r\n          <pre>{JSON.stringify(errors, null, 2)}</pre> */}\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nStringTypeAttribute.defaultProps = {\r\n  type: \"stringType\",\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      // backgroundColor: \"#333\",\r\n      width: \"max-content\",\r\n      alignItems: \"right\",\r\n      margin: theme.spacing(0.5, 0, 0, 0),\r\n    },\r\n    attributes: {\r\n      margin: theme.spacing(1.5, 0, 0, 0),\r\n      padding: \"0.1rem 1rem\",\r\n      display: \"flex\",\r\n      // width: \"100%\",\r\n      justifyContent: \"flex-end\",\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        display: \"inline-block\",\r\n      },\r\n    },\r\n    typeAttribute: {\r\n      cursor: \"pointer\",\r\n\r\n      \"&:hover\": {\r\n        color: theme.palette.primary.light,\r\n      },\r\n    },\r\n    otherAttribute: {\r\n      cursor: \"not-allowed\",\r\n    },\r\n    table: {\r\n      width: \"max-content\",\r\n    },\r\n  })\r\n);\r\n","import Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React from \"react\";\r\nimport { useAction } from \"../../../hooks/useActions\";\r\nimport { LixiBase } from \"../../../models/LixiBase\";\r\nimport { useStyles } from \"./attributesTransactionsStyle\";\r\n\r\ninterface IAttributeTransaction {\r\n  lixiItem: LixiBase | undefined;\r\n  type: string | undefined;\r\n}\r\n\r\nexport const ItemAttributes: React.FC<IAttributeTransaction> = ({\r\n  lixiItem,\r\n  type,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { searchItem } = useAction();\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.attributes}>\r\n        <TableContainer component={Paper}>\r\n          <Table\r\n            className={classes.table}\r\n            size=\"small\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <TableBody>\r\n              {lixiItem?.element.getAttributeNames().map((att, idx) => {\r\n                return (\r\n                  <TableRow key={att}>\r\n                    <TableCell size=\"small\" align=\"right\">\r\n                      <Typography\r\n                        color=\"textSecondary\"\r\n                        align=\"right\"\r\n                        variant=\"body1\"\r\n                      >\r\n                        {`${att}:`}\r\n                      </Typography>\r\n                    </TableCell>\r\n                    <TableCell size=\"small\" align=\"center\">\r\n                      <Typography\r\n                        className={\r\n                          att === \"type\"\r\n                            ? classes.typeAttribute\r\n                            : classes.otherAttribute\r\n                        }\r\n                        color=\"textPrimary\"\r\n                        align=\"left\"\r\n                        variant=\"body2\"\r\n                        onClick={() =>\r\n                          att === \"type\" && type ? searchItem(type) : undefined\r\n                        }\r\n                      >\r\n                        <strong>{lixiItem?.element.getAttribute(att)}</strong>\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" color=\"secondary\">\r\n                        <em>\r\n                          {att === \"type\" && /^[a-zA-Z]+List$/.test(type || \"\")\r\n                            ? \"Customisable\"\r\n                            : null}\r\n                        </em>\r\n                      </Typography>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n              {lixiItem?.baseRestriction ? (\r\n                <TableRow key={lixiItem?.baseRestriction}>\r\n                  <TableCell size=\"small\" align=\"right\">\r\n                    <Typography\r\n                      color=\"textSecondary\"\r\n                      align=\"right\"\r\n                      variant=\"body1\"\r\n                    >\r\n                      base:\r\n                    </Typography>\r\n                  </TableCell>\r\n                  <TableCell size=\"small\" align=\"center\">\r\n                    <Typography\r\n                      className={classes.otherAttribute}\r\n                      color=\"textPrimary\"\r\n                      align=\"left\"\r\n                      variant=\"body2\"\r\n                    >\r\n                      <strong>{lixiItem?.baseRestriction}</strong>\r\n                    </Typography>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ) : null}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      // backgroundColor: \"#333\",\r\n      width: \"max-content\",\r\n      alignItems: \"right\",\r\n      margin: theme.spacing(1.5, 0, 0, 0),\r\n    },\r\n    transactions: {\r\n      margin: theme.spacing(1.5, 0, 0, 0),\r\n      padding: \"0.1rem 1rem\",\r\n      display: \"flex\",\r\n      // width: \"100%\",\r\n      justifyContent: \"flex-start\",\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        display: \"inline-block\",\r\n      },\r\n    },\r\n  })\r\n);\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport React from \"react\";\r\nimport { LixiBase } from \"../../../models/LixiBase\";\r\nimport { SubSchema } from \"../../../redux/actions/customiser-actions\";\r\nimport { useStyles } from \"./transactionsStyle\";\r\n\r\ninterface ITransactions {\r\n  lixiItem: LixiBase | undefined;\r\n  subSchema: SubSchema | undefined;\r\n}\r\n\r\nexport const Transactions: React.FC<ITransactions> = ({\r\n  lixiItem,\r\n  subSchema,\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.transactions}>\r\n      {subSchema &&\r\n        lixiItem?.transactions?.sort().map((t, idx) => {\r\n          if (subSchema?.transactionType && subSchema.transactionType !== t) {\r\n            return (\r\n              <span style={{ paddingInline: \"0.1rem\" }} key={t}>\r\n                <Chip\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  variant=\"outlined\"\r\n                  // clickable\r\n                  label={t}\r\n                />\r\n              </span>\r\n            );\r\n          } else {\r\n            return (\r\n              <span style={{ paddingInline: \"0.1rem\" }} key={t}>\r\n                <Chip\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  variant=\"default\"\r\n                  // clickable\r\n                  label={t}\r\n                  avatar={<Avatar>{t[0]}</Avatar>}\r\n                />\r\n              </span>\r\n            );\r\n          }\r\n        })}\r\n    </div>\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    itemLabel: {\r\n      padding: \"0.1rem\",\r\n      margin: \"0.5rem\",\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      alignItems: \"center\",\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        display: \"inline-block\",\r\n      },\r\n    },\r\n    itemDescription: {\r\n       maxWidth: \"75ch\", \r\n       marginBottom: \"1rem\", \r\n       [theme.breakpoints.down(\"sm\")]: {\r\n        width: \"100%\",\r\n      },\r\n    },\r\n  })\r\n);\r\n","import Badge from \"@material-ui/core/Badge\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React from \"react\";\r\nimport { LixiBase } from \"../../../models/LixiBase\";\r\nimport { SubSchema } from \"../../../redux/actions/customiser-actions\";\r\nimport { Transactions } from \"../lixi-item-transactions/Transactions\";\r\nimport { useStyles } from \"./labelDescriptionStyle\";\r\n\r\ninterface ILabelDescription {\r\n  lixiItem: LixiBase | undefined;\r\n  localName: string | undefined;\r\n  subSchema: SubSchema | undefined;\r\n}\r\n\r\nexport const LabelDescription: React.FC<ILabelDescription> = ({\r\n  lixiItem,\r\n  localName,\r\n  subSchema,\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div>\r\n      <div className={classes.itemLabel}>\r\n        <Badge\r\n          color=\"primary\"\r\n          badgeContent={localName}\r\n          anchorOrigin={{\r\n            vertical: \"top\",\r\n            horizontal: \"right\",\r\n          }}\r\n        >\r\n          <Typography color=\"primary\" variant=\"h4\">\r\n            {lixiItem?.label}\r\n          </Typography>\r\n        </Badge>\r\n      </div>\r\n\r\n      <div className={classes.itemDescription}>\r\n        <Typography\r\n          style={{ padding: \"0.1rem 1rem\" }}\r\n          color=\"textPrimary\"\r\n          variant=\"body1\"\r\n        >\r\n          {lixiItem?.documentation}\r\n        </Typography>\r\n        <Divider />\r\n        <Transactions lixiItem={lixiItem} subSchema={subSchema} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {},\r\n    saveButton: {\r\n      width: \"max-content\",\r\n      height: \"max-content\",\r\n    },\r\n  })\r\n);\r\n","import { Customiser } from \"./Customiser\";\r\nimport { IntegerTypeAttributeType } from \"./customisationTypes\";\r\n\r\nexport class ListTypeAttributeCustomiser extends Customiser {\r\n  object = {} as IntegerTypeAttributeType;\r\n\r\n  constructor(\r\n    customisation: Element | undefined = undefined,\r\n    path?: string,\r\n    values?: IntegerTypeAttributeType\r\n  ) {\r\n    super(customisation, path);\r\n    this.object = values || {\r\n      optionalToMandatory: false,\r\n      excerpt: \"\",\r\n      heading: \"\",\r\n      documentation: \"\",\r\n    };\r\n  }\r\n\r\n  customise() {\r\n    const {\r\n      optionalToMandatory,\r\n      documentation,\r\n      excerpt,\r\n      minInteger,\r\n      maxInteger,\r\n    } = this.object;\r\n    if (\r\n      !optionalToMandatory &&\r\n      !minInteger &&\r\n      !maxInteger &&\r\n      !documentation &&\r\n      !excerpt\r\n    ) {\r\n      this.removeCustomisedItem();\r\n      return;\r\n    }\r\n    this.excerpt = excerpt ? excerpt : \"\";\r\n    this.documentation = documentation ? documentation : \"\";\r\n    this.removeCustomisedItem();\r\n    this.itemPath();\r\n    this.setInLineAttributes();\r\n    this.customExcerpt();\r\n    this.customDocumentation();\r\n\r\n    this.customisation.append(this.customiseItem);\r\n  }\r\n\r\n  setInLineAttributes() {\r\n    const { optionalToMandatory, heading } = this.object;\r\n    if (heading) {\r\n      this.customiseItem.setAttribute(\"customHeading\", heading);\r\n    }\r\n    if (optionalToMandatory) {\r\n      this.customiseItem.setAttribute(\"OptionalToMandatory\", \"Yes\");\r\n    }\r\n  }\r\n\r\n  customisedObject() {\r\n    const customisedAttr = this.getCustomisedItem()?.parentElement;\r\n    if (!customisedAttr) return this.object;\r\n    customisedAttr.getAttributeNames().forEach((att, idx) => {\r\n      switch (att) {\r\n        case \"customHeading\": {\r\n          this.object.heading =\r\n            customisedAttr.getAttribute(\"customHeading\") || \"\";\r\n          break;\r\n        }\r\n        case \"OptionalToMandatory\": {\r\n          this.object.optionalToMandatory = true;\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n\r\n    Array.prototype.forEach.call(customisedAttr.children, (child: Element) => {\r\n      switch (child.localName) {\r\n        case \"CustomExcerpt\":\r\n          const excerpt = child.textContent?.trim();\r\n          this.object.excerpt = excerpt ? excerpt : \"\";\r\n          break;\r\n        case \"CustomDocumentation\":\r\n          const documentation = child.textContent?.trim();\r\n          this.object.documentation = documentation ? documentation : \"\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    return this.object;\r\n  }\r\n}\r\n","import Button from \"@material-ui/core/Button\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { Form, Formik } from \"formik\";\r\nimport React from \"react\";\r\nimport { useAction } from \"../../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../../hooks/useTypeSelector\";\r\nimport { LixiBase } from \"../../../models/LixiBase\";\r\nimport { ExcerptDocumentation } from \"../../excerpt-documentation/ExcerptDocumentation\";\r\nimport { AppCheckBox } from \"../../formik-mterial-ui/AppCheckBox\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport { useStyles } from \"./listTypeAttributeStyle\";\r\nimport { ListTypeAttributeType } from \"../../../models/customisationTypes\";\r\nimport { ListTypeAttributeCustomiser } from \"../../../models/ListTypeAttributeCustomiser\";\r\n\r\ninterface ICustomiseListTypeAttribute {\r\n  lixiItem: LixiBase | undefined;\r\n  type?: \"listType\";\r\n}\r\n\r\nexport const ListTypeAttribute: React.FC<ICustomiseListTypeAttribute> = ({\r\n  lixiItem,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { updateCustomisation } = useAction();\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n  const [initialValue, setInitialValue] = React.useState<ListTypeAttributeType>(\r\n    {\r\n      optionalToMandatory: false,\r\n      excerpt: \"\",\r\n      documentation: \"\",\r\n      heading: \"\",\r\n    }\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (!lixiItem?.path) return;\r\n    const newCustomisation = new ListTypeAttributeCustomiser(\r\n      customization,\r\n      lixiItem?.path\r\n    );\r\n    const instruction = newCustomisation.customisedObject();\r\n    setInitialValue(instruction);\r\n  }, [customization, lixiItem?.path]);\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={initialValue}\r\n      enableReinitialize\r\n      // validationSchema={integerTypeSchema}\r\n      onSubmit={(values, { setSubmitting }) => {\r\n        if (!lixiItem?.path) return;\r\n        setSubmitting(true);\r\n        const attCustomiser = new ListTypeAttributeCustomiser(\r\n          customization,\r\n          lixiItem?.path,\r\n          values\r\n        );\r\n        attCustomiser.customise();\r\n        // console.log(\"ci\", attCustomiser.customisation);\r\n        updateCustomisation(attCustomiser.customisation);\r\n        setTimeout(() => {\r\n          alert(JSON.stringify(values, null, 2));\r\n          setSubmitting(false);\r\n        }, 400);\r\n      }}\r\n    >\r\n      {({ isSubmitting, values, errors, touched, resetForm }) => (\r\n        <Form>\r\n          <Paper style={{ padding: \"0.5rem\" }}>\r\n            <FormControl style={{ width: \"100%\" }}>\r\n              <Paper style={{ padding: \"0.5rem\", margin: \"0.5rem 0.2rem\" }}>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    alignItems: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                  }}\r\n                >\r\n                  <AppCheckBox\r\n                    name=\"optionalToMandatory\"\r\n                    color=\"primary\"\r\n                    size=\"medium\"\r\n                    label=\"Optional To Mandatory\"\r\n                    checked={values?.optionalToMandatory}\r\n                  />\r\n                  <Button\r\n                    className={classes.saveButton}\r\n                    size=\"small\"\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<SaveIcon fontSize=\"large\" />}\r\n                  >\r\n                    Save\r\n                  </Button>\r\n                </div>\r\n              </Paper>\r\n            </FormControl>\r\n            <Divider />\r\n            <ExcerptDocumentation />\r\n          </Paper>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nListTypeAttribute.defaultProps = {\r\n  type: \"listType\",\r\n};\r\n","import { Theme, createStyles, makeStyles, darken } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {},\r\n    list: {\r\n      height: \"40vh\",\r\n      overflowY: \"scroll\",\r\n      width: \"100%\",\r\n      margin: theme.spacing(\"0.5rem\", 0),\r\n      // border: \"solid red 0.1rem\",\r\n      paddingTop: \"0\",\r\n    },\r\n    subItemHeader: {\r\n      zIndex: 2,\r\n      display: \"flex\",\r\n      width: \"100%\",\r\n      justifyContent: \"space-between\",\r\n      backgroundColor: \"#fff8e1\",\r\n      borderRadius: \"0.2rem\",\r\n      maxHeight: \"5rem\",\r\n      color: theme.palette.primary.main,\r\n      cursor: \"pointer\",\r\n      \"&:hover\": {\r\n        backgroundColor: darken(\"#fff8e1\", 0.1),\r\n        color: theme.palette.text.primary,\r\n      },\r\n    },\r\n    item: {\r\n      cursor: \"pointer\",\r\n      \"&:hover\": {\r\n        backgroundColor: theme.palette.action.hover,\r\n        color: theme.palette.primary.dark,\r\n      },\r\n    },\r\n\r\n    selectAllText: {},\r\n  })\r\n);\r\n","import { Customiser } from \"./Customiser\";\r\nimport { tokenType } from \"./customisationTypes\";\r\n\r\nexport class TokenTypeCustomiser extends Customiser {\r\n  object = {} as tokenType;\r\n\r\n  constructor(\r\n    customisation: Element | undefined = undefined,\r\n    path?: string,\r\n    values?: tokenType\r\n  ) {\r\n    super(customisation, path);\r\n    this.object = values || {\r\n      tokens: [],\r\n    };\r\n  }\r\n\r\n  customise() {\r\n    const { tokens, documentation, excerpt, heading } = this.object;\r\n    if (!tokens.length && !documentation && !excerpt && !heading) {\r\n      this.removeCustomisedItem();\r\n      return;\r\n    }\r\n    this.excerpt = excerpt ? excerpt : \"\";\r\n    this.documentation = documentation ? documentation : \"\";\r\n    this.removeCustomisedItem();\r\n    this.itemPath();\r\n    this.setInLineAttributes();\r\n    this.tokens();\r\n    this.customExcerpt();\r\n    this.customDocumentation();\r\n\r\n    this.customisation.append(this.customiseItem);\r\n  }\r\n\r\n  setInLineAttributes() {\r\n    const { tokens, heading } = this.object;\r\n    if (heading) {\r\n      this.customiseItem.setAttribute(\"customHeading\", heading);\r\n    }\r\n    if (tokens.length) {\r\n      this.customiseItem.setAttribute(\"Include\", \"Yes\");\r\n    }\r\n  }\r\n\r\n  tokens() {\r\n    if (!this.object.tokens.length) return;\r\n    this.object.tokens.forEach((token: string, idx) => {\r\n      const doc = Customiser.docStub();\r\n      const tokenEle = doc.createElement(\"Enumeration\");\r\n      tokenEle.textContent = token;\r\n      this.customiseItem.append(tokenEle);\r\n    });\r\n  }\r\n\r\n  customisedObject() {\r\n    const customisedAttr = this.getCustomisedItem()?.parentElement;\r\n    if (!customisedAttr) return this.object;\r\n    customisedAttr.getAttributeNames().forEach((att, idx) => {\r\n      switch (att) {\r\n        case \"customHeading\": {\r\n          this.object.heading =\r\n            customisedAttr.getAttribute(\"customHeading\") || \"\";\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n\r\n    Array.prototype.forEach.call(customisedAttr.children, (child: Element) => {\r\n      switch (child.localName) {\r\n        case \"CustomExcerpt\":\r\n          const excerpt = child.textContent?.trim();\r\n          this.object.excerpt = excerpt ? excerpt : \"\";\r\n          break;\r\n        case \"CustomDocumentation\":\r\n          const documentation = child.textContent?.trim();\r\n          this.object.documentation = documentation ? documentation : \"\";\r\n          break;\r\n        case \"Enumeration\":\r\n          const token = child.textContent?.trim();\r\n          if (token) {\r\n            this.object.tokens.push(token);\r\n          }\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    return this.object;\r\n  }\r\n}\r\n","import Button from \"@material-ui/core/Button\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { FieldArray, Form, Formik } from \"formik\";\r\nimport React from \"react\";\r\nimport { tokenType } from \"../../../models/customisationTypes\";\r\nimport { LixiBase } from \"../../../models/LixiBase\";\r\nimport { AppCheckBox } from \"../../formik-mterial-ui/AppCheckBox\";\r\nimport CloseOutlinedIcon from \"@material-ui/icons/CloseOutlined\";\r\nimport DoneOutlinedIcon from \"@material-ui/icons/DoneOutlined\";\r\nimport { useStyles } from \"./simpleTokenTypeStyle\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport IndeterminateCheckBoxTwoToneIcon from \"@material-ui/icons/IndeterminateCheckBoxTwoTone\";\r\nimport { ExcerptDocumentation } from \"../../excerpt-documentation/ExcerptDocumentation\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { TokenTypeCustomiser } from \"../../../models/TokenTypeCustomiser\";\r\nimport { useAction } from \"../../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../../hooks/useTypeSelector\";\r\ninterface ISimpleTokenType {\r\n  lixiItem: LixiBase | undefined;\r\n  baseRestriction?: \"xs:token\";\r\n}\r\n\r\nexport const SimpleTokenType: React.FC<ISimpleTokenType> = ({ lixiItem }) => {\r\n  const classes = useStyles();\r\n  const { updateCustomisation } = useAction();\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n\r\n  const [initialValue, setInitialValue] = React.useState<tokenType>({\r\n    tokens: [],\r\n  });\r\n\r\n  const enumerations = React.useMemo(() => {\r\n    if (!lixiItem?.enumeration?.length) return;\r\n    const result: string[] = [];\r\n    lixiItem.enumeration.forEach((e: Element | undefined) => {\r\n      if (e) {\r\n        const enumItem = new LixiBase(e).path?.split(\".\").pop();\r\n        if (!enumItem) return;\r\n        result.push(enumItem);\r\n      }\r\n    });\r\n    return result;\r\n  }, [lixiItem?.enumeration]);\r\n\r\n  const enumerationAddRemove = (el: string | undefined) => {\r\n    console.log(initialValue);\r\n    if (!el) return;\r\n    const copyOfTokens = [...initialValue.tokens];\r\n    if (copyOfTokens.includes(el)) {\r\n      copyOfTokens.splice(copyOfTokens.indexOf(el), 1);\r\n    } else {\r\n      copyOfTokens.push(el);\r\n    }\r\n    setInitialValue((pre) => ({ ...pre, tokens: copyOfTokens.sort() }));\r\n  };\r\n\r\n  const toggle = () => {\r\n    const copyToken = [...initialValue.tokens];\r\n    if (copyToken.length) {\r\n      setInitialValue((pre) => ({ ...pre, tokens: [] }));\r\n      return;\r\n    }\r\n    if (enumerations?.length) {\r\n      setInitialValue((pre) => ({ ...pre, tokens: [...enumerations] }));\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!lixiItem?.path) return;\r\n    const newCustomisation = new TokenTypeCustomiser(\r\n      customization,\r\n      lixiItem.path\r\n    );\r\n    const instruction = newCustomisation.customisedObject();\r\n    setInitialValue(instruction);\r\n  }, [customization, lixiItem?.path]);\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={initialValue}\r\n      enableReinitialize\r\n      onSubmit={(values, { setSubmitting }) => {\r\n        if (!lixiItem?.path) return;\r\n        setSubmitting(true);\r\n        const tokeCustomiser = new TokenTypeCustomiser(\r\n          customization,\r\n          lixiItem.path,\r\n          values\r\n        );\r\n        tokeCustomiser.customise();\r\n        updateCustomisation(tokeCustomiser.customisation);\r\n        // setTimeout(() => {\r\n        //   alert(JSON.stringify(values, null, 2));\r\n        //   setSubmitting(false);\r\n        // }, 400);\r\n      }}\r\n    >\r\n      {({ values }) => (\r\n        <Form>\r\n          <Paper style={{ padding: \"0.5rem\" }}>\r\n            <Grid container spacing={1}>\r\n              <Grid item xs={12}>\r\n                <Paper>\r\n                  <List dense className={classes.list}>\r\n                    <ListSubheader\r\n                      title=\"Click To Select All Items\"\r\n                      className={classes.subItemHeader}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"flex-start\",\r\n                        alignItems: \"center\",\r\n                      }}\r\n                    >\r\n                      <ListItemIcon>\r\n                        <AppCheckBox\r\n                          name=\"allSelected\"\r\n                          checked={\r\n                            values.tokens.length === enumerations?.length\r\n                          }\r\n                          value={\r\n                            values.tokens.length === enumerations?.length\r\n                              ? \"all\"\r\n                              : \"\"\r\n                          }\r\n                          disableRipple\r\n                          onClick={() => toggle()}\r\n                          checkedIcon={\r\n                            <DoneOutlinedIcon style={{ color: \"green\" }} />\r\n                          }\r\n                          icon={<CloseOutlinedIcon style={{ color: \"red\" }} />}\r\n                          indeterminateIcon={\r\n                            <IndeterminateCheckBoxTwoToneIcon color=\"primary\" />\r\n                          }\r\n                          indeterminate={\r\n                            initialValue.tokens.length > 0 &&\r\n                            initialValue.tokens.length <\r\n                              (enumerations?.length || 0)\r\n                          }\r\n                        />\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        onClick={() => toggle()}\r\n                        primary=\"Select All Enumerations\"\r\n                      />\r\n                      <Button\r\n                        style={{ alignItems: \"flex-end\" }}\r\n                        variant=\"contained\"\r\n                        size=\"small\"\r\n                        color=\"primary\"\r\n                        type=\"submit\"\r\n                      >\r\n                        save\r\n                      </Button>\r\n                    </ListSubheader>\r\n                    <FieldArray\r\n                      name=\"tokens\"\r\n                      render={(arrayHelper) => {\r\n                        if (!enumerations?.length) return <></>;\r\n                        return enumerations?.map((el: string | undefined) => {\r\n                          if (!el) return <></>;\r\n                          return (\r\n                            <ListItem\r\n                              className={classes.item}\r\n                              divider\r\n                              onClick={() => enumerationAddRemove(el)}\r\n                              key={el}\r\n                            >\r\n                              <ListItemIcon>\r\n                                <AppCheckBox\r\n                                  name=\"tokens\"\r\n                                  checked={values?.tokens.includes(el)}\r\n                                  disableRipple\r\n                                  value={values?.tokens.includes(el) ? el : \"\"}\r\n                                  checkedIcon={\r\n                                    <DoneOutlinedIcon\r\n                                      style={{ color: \"green\" }}\r\n                                      fontSize=\"small\"\r\n                                    />\r\n                                  }\r\n                                  icon={\r\n                                    <CloseOutlinedIcon\r\n                                      fontSize=\"small\"\r\n                                      style={{ color: \"red\" }}\r\n                                    />\r\n                                  }\r\n                                />\r\n                              </ListItemIcon>\r\n                              <ListItemText>{el}</ListItemText>\r\n                            </ListItem>\r\n                          );\r\n                        });\r\n                      }}\r\n                    />\r\n                  </List>\r\n                </Paper>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <ExcerptDocumentation />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Box\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"flex-end\",\r\n                    margin: \"0.5rem\",\r\n                  }}\r\n                ></Box>\r\n              </Grid>\r\n            </Grid>\r\n          </Paper>\r\n          {/* <pre>{JSON.stringify(values, null, 2)}</pre> */}\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nSimpleTokenType.defaultProps = {\r\n  baseRestriction: \"xs:token\",\r\n};\r\n","import React from \"react\";\r\ninterface ISwitchSimpleType {\r\n  switchBase: string;\r\n  children: React.ReactElement<{\r\n    baseRestriction: \"xs:token\";\r\n  }>[];\r\n}\r\nexport const SwitchSimpleType: React.FC<ISwitchSimpleType> = ({\r\n  children,\r\n  switchBase,\r\n}) => {\r\n  const child = children.find(({ props }) => {\r\n    const { baseRestriction } = props;\r\n    return switchBase === baseRestriction;\r\n  });\r\n  return child || <></>;\r\n};\r\n","import {\r\n  Badge,\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  Chip,\r\n\r\n  Divider,\r\n  FormControlLabel,\r\n  List,\r\n  ListItem,\r\n  ListSubheader,\r\n  Typography\r\n} from \"@material-ui/core\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\r\nimport DoneOutlinedIcon from \"@material-ui/icons/DoneOutlined\";\r\nimport SettingsOutlinedIcon from \"@material-ui/icons/SettingsOutlined\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport { useAction } from \"../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\nimport { Customiser } from \"../../models/Customiser\";\r\nimport { ElementCustomiser } from \"../../models/ElementCustomiser\";\r\nimport { LixiBase } from \"../../models/LixiBase\";\r\n// import { CustomiseAttribute } from \"../customise-attribute/CustomiseAttribute\";\r\nimport { CustomiseElement } from \"../customise-element/CustomiseElement\";\r\nimport { useStyles } from \"./lixiItemStyle\";\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { IntegerTypeAttribute } from \"../customise-attribute/integer-type-attribute/IntegerTypeAttribute\";\r\nimport { SwitchAttributeType } from \"./AttributeSwitchType\";\r\nimport { StringTypeAttribute } from \"../customise-attribute/string-type-attribute/StringTypeAttribute\";\r\nimport { ItemAttributes } from \"./lixi-item-attributes/ItemAttributes\";\r\nimport { LabelDescription } from \"./lixi-item-label-description/LabelDescription\";\r\nimport { ListTypeAttribute } from \"../customise-attribute/list-type-attribute/ListTypeAttribute\";\r\nimport { SimpleTokenType } from \"../customise-simple-type/simple-token-type/SimpleTokenType\";\r\nimport { SwitchSimpleType } from \"./SimpleTypeSwitchType\";\r\n\r\n\r\ninterface ItemType {\r\n  item: Element | null | undefined;\r\n}\r\nexport const LixiItem: React.FC<ItemType | undefined> = ({ item }) => {\r\n  const classes = useStyles();\r\n\r\n  const [openToCustomise, setOpenToCustomise] = useState<boolean>(false);\r\n  const [alert, setAlert] = useState<{ included: boolean; path: string }>();\r\n  const [lixiItem, setLixiItem] = useState<LixiBase>();\r\n  const [exclude, setExclude] = useState(false);\r\n  const { customization, subSchema } = useTypedSelector(\r\n    (state) => state.customizer\r\n  );\r\n  const { searchItem, updateCustomisation } = useAction();\r\n\r\n  const localName = React.useMemo(() => {\r\n    return lixiItem?.element?.localName;\r\n  }, [lixiItem]);\r\n\r\n  const type = React.useMemo(() => {\r\n    return lixiItem?.element?.getAttribute(\"type\")||\"\";\r\n  }, [lixiItem]);\r\n  const baseRestriction = React.useMemo(() => {\r\n    return lixiItem?.baseRestriction || \"\";\r\n  }, [lixiItem]);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (item) {\r\n      const ele: LixiBase = new LixiBase(item);\r\n      setLixiItem(ele);\r\n      return\r\n    }\r\n    \r\n  }, [item, customization]);\r\n\r\n  const onExclude = () => {\r\n    if (!lixiItem?.path) return;\r\n    const excluded = !exclude;\r\n    setExclude(excluded);\r\n    const newCustomisation = new Customiser(customization, lixiItem?.path);\r\n    if (excluded) {\r\n      newCustomisation.exclude();\r\n    } else {\r\n      newCustomisation.include();\r\n    }\r\n    updateCustomisation(newCustomisation.customisation);\r\n  };\r\n\r\n  useEffect(()=>{\r\n    if (lixiItem?.path === \"Package\"){\r\n      setOpenToCustomise(true)\r\n    }\r\n  },[lixiItem?.path])\r\n\r\n  useEffect(() => {\r\n    if (exclude) return;\r\n    if (lixiItem?.path) {\r\n      const customiser = new Customiser(customization, lixiItem?.path);\r\n      setExclude(!!customiser.ExcludedItem());\r\n    }\r\n  }, [customization, lixiItem?.path, exclude]);\r\n\r\n  useEffect(() => {\r\n    if (!lixiItem?.element.localName || !lixiItem?.path || !customization)\r\n      return;\r\n    const parentCustomised = ElementCustomiser.parentCustomised(\r\n      lixiItem?.path,\r\n      customization,\r\n      lixiItem.element.localName\r\n    );\r\n    if (parentCustomised) {\r\n      setAlert(parentCustomised);\r\n    }\r\n  }, [customization, lixiItem?.path, lixiItem?.element.localName]);\r\n\r\n  return (\r\n    <Grid container spacing={2}>\r\n      <Grid item xs={12}>\r\n        <Paper style={{ marginTop: \"0.5rem\", padding: \"0.5rem 0.5rem\" }}>\r\n          <Grid item xs={12}>\r\n            <Paper>\r\n              {!alert || alert?.included ? (\r\n                <div className={classes.header}>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        icon={\r\n                          <DoneOutlinedIcon\r\n                            style={{ color: \"green\" }}\r\n                            fontSize=\"small\"\r\n                          />\r\n                        }\r\n                        checkedIcon={<CloseOutlinedIcon fontSize=\"small\" />}\r\n                        onChange={onExclude}\r\n                        checked={exclude}\r\n                        disabled={alert?.included}\r\n                        name=\"checkedI\"\r\n                      />\r\n                    }\r\n                    label={exclude ? \"Excluded\" : \"Include\"}\r\n                  />\r\n\r\n                  <Button\r\n                    disabled={exclude}\r\n                    style={{ height: \"max-content\", width: \"min-content\" }}\r\n                    onClick={() => setOpenToCustomise((pre) => !pre)}\r\n                    startIcon={<SettingsOutlinedIcon />}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    size=\"small\"\r\n                  >\r\n                    Customise\r\n                  </Button>\r\n                </div>\r\n              ) : (\r\n                <Alert\r\n                  variant=\"standard\"\r\n                  severity=\"warning\"\r\n                  action={\r\n                    <Button\r\n                      className={classes.alert}\r\n                      variant=\"contained\"\r\n                      size=\"small\"\r\n                      onClick={() => searchItem(alert?.path || \"\")}\r\n                    >\r\n                      see parent\r\n                    </Button>\r\n                  }\r\n                >\r\n                  This item excluded via its parent:{\" \"}\r\n                  {\r\n                    <em>\r\n                      <strong>{alert?.path.split(\".\").pop()}</strong>\r\n                    </em>\r\n                  }\r\n                </Alert>\r\n              )}\r\n            </Paper>\r\n          </Grid>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignContent: \"center\",\r\n            }}\r\n          >\r\n            <LabelDescription\r\n              lixiItem={lixiItem}\r\n              localName={item?.localName}\r\n              subSchema={subSchema}\r\n            />\r\n            <ItemAttributes lixiItem={lixiItem} type={type} />\r\n          </div>\r\n\r\n          {lixiItem?.references ? (\r\n            <div>\r\n              <Divider />\r\n              <List dense subheader={<ListSubheader>References</ListSubheader>}>\r\n                <Divider />\r\n                {lixiItem.references.map((r, idx) => {\r\n                  return (\r\n                    <Fragment key={`${idx}_${r}`}>\r\n                      <ListItem component=\"li\">\r\n                        <Typography variant=\"body1\">{r}</Typography>\r\n                      </ListItem>\r\n                    </Fragment>\r\n                  );\r\n                })}\r\n              </List>\r\n            </div>\r\n          ) : undefined}\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Collapse in={!exclude && openToCustomise}>\r\n          {localName === \"element\" ? (\r\n            <CustomiseElement lixiItem={lixiItem} />\r\n          ) : undefined}\r\n\r\n          {localName === \"attribute\" ? (\r\n            <SwitchAttributeType switchType={type}>\r\n              <IntegerTypeAttribute lixiItem={lixiItem} />\r\n              <StringTypeAttribute lixiItem={lixiItem} />\r\n              <ListTypeAttribute lixiItem={lixiItem} />\r\n            </SwitchAttributeType>\r\n          ) : null}\r\n\r\n          {localName === \"simpleType\" ? (\r\n            <SwitchSimpleType switchBase={baseRestriction}>\r\n              <div></div>\r\n              <SimpleTokenType lixiItem={lixiItem} />\r\n            </SwitchSimpleType>\r\n          ) : null}\r\n        </Collapse>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n","import { makeStyles, Theme, createStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      // display: \"flex\",\r\n      // justifyContent: \"center\",\r\n      paddingLeft: \"0.5rem\",\r\n      borderLeft: \"solid 0.5rem #3f51b5\",\r\n      borderRadius: \"0.2rem\",\r\n    },\r\n    link: {\r\n      display: \"flex\",\r\n      cursor: \"pointer\",\r\n      color: theme.palette.primary.dark,\r\n      \"&:hover\": {\r\n        backgroundColor: \"#fff8e1\",\r\n        borderBottom: \"solid 0.1rem #3f51b5\",\r\n      },\r\n    },\r\n    icon: {\r\n      marginRight: theme.spacing(0.25),\r\n      color: theme.palette.primary.dark,\r\n      width: 20,\r\n      height: 20,\r\n    },\r\n    leafLink: {\r\n      color: theme.palette.primary.main,\r\n      \"&:hover\": {\r\n        backgroundColor: \"#fff8e1\",\r\n      },\r\n    },\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\n\r\nimport { useStyles } from \"./breadCrumbsStyle\";\r\nimport { useAction } from \"../../hooks/useActions\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport FindInPageIcon from \"@material-ui/icons/FindInPage\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\ninterface BreadCrumbsType {\r\n  pathSections: string[] | undefined;\r\n  iconClickHandler: () => void;\r\n}\r\n\r\nexport const IconBreadcrumbs: React.FC<BreadCrumbsType> = (\r\n  props: BreadCrumbsType\r\n) => {\r\n  const classes = useStyles();\r\n  const { searchItem } = useAction();\r\n  const handleClick = (\r\n    event: React.MouseEvent<HTMLParagraphElement, MouseEvent>\r\n  ) => {\r\n    event.preventDefault();\r\n    if (!props.pathSections?.length) return;\r\n    const pathArr = [...props.pathSections];\r\n    const index = props.pathSections.indexOf(event.currentTarget.innerHTML);\r\n    if (index === 0) {\r\n      searchItem(\"Package\");\r\n      return;\r\n    }\r\n    if (!index) return;\r\n    for (let i = pathArr.length; i > index + 1; i--) {\r\n      pathArr?.pop();\r\n    }\r\n    searchItem(pathArr?.join(\".\"));\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Breadcrumbs\r\n          separator={<ArrowForwardIosIcon className={classes.icon} />}\r\n          aria-label=\"breadcrumb\"\r\n        >\r\n          {props.pathSections?.map((section, idx) => {\r\n            return (\r\n              <Typography\r\n                onClick={(\r\n                  e: React.MouseEvent<HTMLParagraphElement, MouseEvent>\r\n                ) => handleClick(e)}\r\n                color=\"textSecondary\"\r\n                key={idx}\r\n                className={classes.link}\r\n              >\r\n                {section}\r\n              </Typography>\r\n            );\r\n          })}\r\n          <IconButton\r\n            onClick={props.iconClickHandler}\r\n            aria-label=\"delete\"\r\n            className={classes.leafLink}\r\n            size=\"medium\"\r\n          >\r\n            <FindInPageIcon fontSize=\"inherit\" />\r\n          </IconButton>\r\n        </Breadcrumbs>\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n","import { useTheme, useMediaQuery, ListSubheader } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { ListChildComponentProps, VariableSizeList } from \"react-window\";\r\n\r\nconst LISTBOX_PADDING = 8; // px\r\n\r\nfunction renderRow(props: ListChildComponentProps) {\r\n  const { data, index, style } = props;\r\n  return React.cloneElement(data[index], {\r\n    style: {\r\n      ...style,\r\n      top: (style.top as number) + LISTBOX_PADDING,\r\n    },\r\n  });\r\n}\r\n\r\nconst OuterElementContext = React.createContext({});\r\n\r\nconst OuterElementType = React.forwardRef<HTMLDivElement>((props, ref) => {\r\n  const outerProps = React.useContext(OuterElementContext);\r\n  return <div ref={ref} {...props} {...outerProps} />;\r\n});\r\n\r\nfunction useResetCache(data: any) {\r\n  const ref = React.useRef<VariableSizeList>(null);\r\n  React.useEffect(() => {\r\n    if (ref.current != null) {\r\n      ref.current.resetAfterIndex(0, true);\r\n    }\r\n  }, [data]);\r\n  return ref;\r\n}\r\n\r\n// Adapter for react-window\r\nexport const ListboxComponent = React.forwardRef<HTMLDivElement>(\r\n  function ListboxComponent(props, ref) {\r\n    const { children, ...other } = props;\r\n    const itemData = React.Children.toArray(children);\r\n    const theme = useTheme();\r\n    const smUp = useMediaQuery(theme.breakpoints.up(\"sm\"), { noSsr: true });\r\n    const itemCount = itemData.length;\r\n    const itemSize = smUp ? 36 : 48;\r\n\r\n    const getChildSize = (child: React.ReactNode) => {\r\n      if (React.isValidElement(child) && child.type === ListSubheader) {\r\n        return 48;\r\n      }\r\n\r\n      return itemSize;\r\n    };\r\n\r\n    const getHeight = () => {\r\n      if (itemCount > 8) {\r\n        return 8 * itemSize;\r\n      }\r\n      return itemData.map(getChildSize).reduce((a, b) => a + b, 0);\r\n    };\r\n\r\n    const gridRef = useResetCache(itemCount);\r\n\r\n    return (\r\n      <div ref={ref}>\r\n        <OuterElementContext.Provider value={other}>\r\n          <VariableSizeList\r\n            itemData={itemData}\r\n            height={getHeight() + 2 * LISTBOX_PADDING}\r\n            width=\"100%\"\r\n            ref={gridRef}\r\n            outerElementType={OuterElementType}\r\n            innerElementType=\"ul\"\r\n            itemSize={(index) => getChildSize(itemData[index])}\r\n            overscanCount={5}\r\n            itemCount={itemCount}\r\n          >\r\n            {renderRow}\r\n          </VariableSizeList>\r\n        </OuterElementContext.Provider>\r\n      </div>\r\n    );\r\n  }\r\n);\r\n","import { makeStyles, createStyles, Theme } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    listbox: {\r\n      boxSizing: \"border-box\",\r\n\r\n      \"& ul\": {\r\n        padding: 0,\r\n        margin: 0,\r\n        \"& li:hover\": {\r\n          borderBottom: \"solid #444 0.05rem\",\r\n          backgroundColor: theme.palette.primary.light,\r\n          color: theme.palette.primary.contrastText,\r\n        },\r\n       \r\n      },\r\n    },\r\n    root: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      width: \"100%\",\r\n      marginTop: \"0rem\",\r\n    },\r\n   \r\n  })\r\n);\r\n","import { CircularProgress, Typography } from \"@material-ui/core\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useAction } from \"../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\nimport { LixiBase } from \"../../models/LixiBase\";\r\nimport { XmlUtil } from \"../../util/nameSpaces\";\r\nimport { IconBreadcrumbs } from \"../breadCrumbs/breadCrumbsComponent\";\r\nimport { ListboxComponent } from \"./listBoxComponent\";\r\nimport { useStyles } from \"./searchPathStyle\";\r\n\r\nexport const SearchPath: React.FC = () => {\r\n  const classes = useStyles();\r\n  const { searchItem } = useAction();\r\n  // const [path, setPath] = useState<string>();\r\n  const [options, setOptions] = useState<string[] | null>([]);\r\n  const [showSearchBox, setShowSearchBox] = useState<boolean>(true);\r\n  const {  schema } = useTypedSelector((state) => state.schema);\r\n  const { data,loading } = useTypedSelector((state) => state.item);\r\n  const { subSchema } = useTypedSelector((state) => state.customizer);\r\n  const [pathsCount, setPathsCount] = useState(0);\r\n\r\n  const _loading = loading || options?.length === 0;\r\n\r\n  const path = React.useMemo(() => {\r\n    if (!data) return;\r\n    const newItem = new LixiBase(data);\r\n    return newItem?.path;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data && !loading && schema) {\r\n      searchItem(\"Package\");\r\n      return;\r\n    }\r\n  }, [data, loading, schema, searchItem]);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      setShowSearchBox(false);\r\n    }\r\n  },  [data]);\r\n\r\n  useEffect(() => {\r\n    const lixiItems = (): Promise<string[]> => {\r\n      return new Promise((resolves, rejects) => {\r\n        if (!schema) return;\r\n        const xmlUtile = new XmlUtil(schema);\r\n        if (subSchema?.transactionType) {\r\n          const allPath = xmlUtile.getPathOfAllItemsInATransaction(\r\n            subSchema.transactionType\r\n          );\r\n          resolves(allPath);\r\n        }\r\n      });\r\n    };\r\n\r\n    (async () => {\r\n      setOptions([]);\r\n      const paths = await lixiItems();\r\n      setPathsCount(paths.length);\r\n      setOptions(paths);\r\n    })();\r\n  }, [subSchema?.transactionType, schema]);\r\n\r\n  const onSubmit = (\r\n    event: React.ChangeEvent<{}> | React.FormEvent<HTMLFormElement>,\r\n    searchText: string | null\r\n  ) => {\r\n    event.preventDefault();\r\n\r\n    if (searchText) {\r\n      searchItem(searchText);\r\n      setShowSearchBox(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        {!data || showSearchBox ? (\r\n          <Slide\r\n            // direction=\"up\"\r\n            in={showSearchBox}\r\n            mountOnEnter\r\n            unmountOnExit\r\n            {...(showSearchBox ? { timeout: 500 } : {})}\r\n          >\r\n            <Paper className={classes.root}>\r\n              <Autocomplete\r\n                id=\"virtualize-demo\"\r\n                onChange={(event, option) => onSubmit(event, option)}\r\n                disableListWrap\r\n                classes={classes}\r\n                autoComplete={true}\r\n                includeInputInList\r\n                loading={_loading}\r\n                ListboxComponent={\r\n                  ListboxComponent as React.ComponentType<\r\n                    React.HTMLAttributes<HTMLElement>\r\n                  >\r\n                }\r\n                options={options || []}\r\n                renderInput={(params) => (\r\n                  <TextField\r\n                    {...params}\r\n                    style={{ alignItems: \"center\" }}\r\n                    variant=\"outlined\"\r\n                    label=\"LIXI Item Path\"\r\n                    InputProps={{\r\n                      ...params.InputProps,\r\n                      fullWidth: true,\r\n                      endAdornment: (\r\n                        <React.Fragment>\r\n                          <Typography color=\"textSecondary\">\r\n                            <em>{`${pathsCount} Paths`}</em>\r\n                          </Typography>\r\n                          {loading ? (\r\n                            <CircularProgress color=\"inherit\" size={20} />\r\n                          ) : null}\r\n                          {params.InputProps.endAdornment}\r\n                        </React.Fragment>\r\n                      ),\r\n                    }}\r\n                  />\r\n                )}\r\n                renderOption={(option) => (\r\n                  <Typography noWrap>{option}</Typography>\r\n                )}\r\n              />\r\n            </Paper>\r\n          </Slide>\r\n        ) : (\r\n          <IconBreadcrumbs\r\n            iconClickHandler={() => setShowSearchBox(true)}\r\n            pathSections={path?.split(\".\")}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import Box from \"@material-ui/core/Box\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React from \"react\";\r\nimport { useAction } from \"../../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../../hooks/useTypeSelector\";\r\nimport { Customiser } from \"../../../models/Customiser\";\r\nimport { LixiBase } from \"../../../models/LixiBase\";\r\nimport { ItemXMLViewer } from \"../../itemXMLViewer/ItemXMLViewer\";\r\nimport { LixiItem } from \"../../lixi-item/LixiItem\";\r\nimport { SearchPath } from \"../../search/SearchPath\";\r\n\r\ninterface TabPanelProps {\r\n  children?: React.ReactNode;\r\n  index: any;\r\n  value: any;\r\n}\r\n\r\nexport const CreateInstructionTab: React.FC<TabPanelProps> = (\r\n  props: TabPanelProps\r\n) => {\r\n  const { children, value, index, ...other } = props;\r\n  const { data } = useTypedSelector((state) => state.item);\r\n\r\n  const [itemInstruction, setItemInstruction] = React.useState<Element>();\r\n  const { customization } = useTypedSelector((state) => state.customizer);\r\n\r\n  React.useEffect(() => {\r\n    if (!data) return;\r\n    const path = new LixiBase(data)?.path;\r\n    if (path) {\r\n      const newCustomiser = new Customiser(customization, path);\r\n      const customisedItem = newCustomiser?.getCustomisedItem()?.parentElement;\r\n      if (!customisedItem) {\r\n        setItemInstruction(undefined);\r\n        return;\r\n      }\r\n      setItemInstruction(customisedItem);\r\n    }\r\n  }, [customization, data]);\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3}>\r\n          <Typography component=\"div\">\r\n            <SearchPath />\r\n            <Collapse key=\"lixiItem\" in={!!data}>\r\n              {data ? <LixiItem item={data} /> : undefined}\r\n            </Collapse>\r\n            <Collapse key=\"lixiItemXML\" in={!!itemInstruction}>\r\n              {<ItemXMLViewer role=\"view\" itemXML={itemInstruction} />}\r\n            </Collapse>\r\n          </Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useStyles } from \"./navTabsStyle\";\r\ninterface TabPanelProps {\r\n  children?: React.ReactNode;\r\n  index: any;\r\n  value: any;\r\n}\r\n\r\nexport const TabPanel: React.FC<TabPanelProps> = (props: TabPanelProps) => {\r\n  const classes = useStyles();\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      className={classes.root}\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box className={classes.tabPanelChildren}>\r\n          <Typography component=\"div\">{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    menuButton: {\r\n      // width: \"max-content\",\r\n      // color: theme.palette.getContrastText(theme.palette.primary.main),\r\n      minWidth: \"10rem\",\r\n      height: \"inherit\",\r\n      marginLeft: \"0.05rem\",\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n    },\r\n  })\r\n);\r\n","import Button from \"@material-ui/core/Button\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\r\nimport React, { useMemo } from \"react\";\r\nimport { useAction } from \"../../hooks/useActions\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\nimport { SubSchema } from \"../../redux/actions/customiser-actions\";\r\nimport { useStyles } from \"./subSchemaMenuStyle\";\r\n\r\n\r\ninterface SubSchemaMenuProps {\r\n  transactionList: SubSchema[];\r\n}\r\n\r\nexport const SubSchemaMenu: React.FC<SubSchemaMenuProps> = ({\r\n  transactionList,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { customizeSubSchema,  resetCustomization,  resetItem } = useAction();\r\n  const { subSchema } = useTypedSelector((state) => state.customizer);\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n\r\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const sortedTransactionList = useMemo(\r\n    () =>\r\n      transactionList?.sort((a, b) => {\r\n        if (a && b && a.transactionType && b.transactionType) {\r\n          return a?.transactionType > b?.transactionType ? 1 : -1;\r\n        }\r\n        return 0;\r\n      }),\r\n    [transactionList]\r\n  );\r\n\r\n  const handleClose = (e: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\r\n    const s = e.currentTarget.innerText.split(\" \");\r\n    const subSchema: SubSchema = {\r\n      transactionType: s[0],\r\n      transactionVersion: s[1],\r\n    };\r\n    customizeSubSchema(subSchema);\r\n    resetCustomization();\r\n    resetItem();\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.menuButton}\r\n        color=\"primary\"\r\n        // disableRipple\r\n        aria-controls=\"simple-menu\"\r\n        fullWidth\r\n        aria-haspopup=\"true\"\r\n        onClick={handleClick}\r\n        variant=\"contained\"\r\n        disabled={transactionList.length ? false : true}\r\n        endIcon={<KeyboardArrowDownIcon />}\r\n      >\r\n        {subSchema?.transactionType && subSchema?.transactionVersion\r\n          ? `${subSchema.transactionType} ${subSchema.transactionVersion}`\r\n          : \"Transaction\"}\r\n      </Button>\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        {sortedTransactionList.map(\r\n          ({ transactionType, transactionVersion }) => {\r\n            return (\r\n              <MenuItem\r\n                id={`${transactionType}_${transactionVersion}`}\r\n                key={`${transactionType}_${transactionVersion}`}\r\n                onClick={handleClose}\r\n              >{`${transactionType} ${transactionVersion}`}</MenuItem>\r\n            );\r\n          }\r\n        )}\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n","import { Theme, makeStyles, createStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      backgroundColor: \"transparent\",\r\n    },\r\n\r\n    paper: {\r\n      // backgroundColor: \"transparent\",\r\n      boxShadow: \"1px 1px 3px #BDBDBD\",\r\n      overflow: \"hidden\",\r\n      padding: theme.spacing(0),\r\n    },\r\n    alert: {\r\n      color: \"#c43e00\",\r\n      \"&:hover\": {\r\n        color: \"#ff8f00\",\r\n      },\r\n    },\r\n    button: {\r\n      color: \"orange\",\r\n      backgroundColor: \"#333\",\r\n      \"&:hover\": {\r\n        color: \"#333\",\r\n        backgroundColor: \"orange\",\r\n      },\r\n    },\r\n  })\r\n);\r\n","import React from \"react\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport CancelPresentationTwoToneIcon from \"@material-ui/icons/CancelPresentationTwoTone\";\r\n// import {CssBaseline} from \"@material-ui/core\"\r\nimport { Formik, Form } from \"formik\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline/CssBaseline\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport * as Yup from \"yup\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\nimport { SubSchemaMenu } from \"../sub-schema-menu/SubSchemaMenu\";\r\nimport { useStyles } from \"./selectTransactionDialogStyle\";\r\nimport { SubSchema } from \"../../redux/actions/customiser-actions\";\r\n\r\ninterface IConfirmRemoveItem {\r\n  open: boolean;\r\n  handleClose: () => void;\r\n  transactionList: SubSchema[];\r\n}\r\n\r\nexport const SelectTransactionDialog: React.FC<IConfirmRemoveItem> = ({\r\n  open,\r\n  transactionList,\r\n  handleClose,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { subSchema } = useTypedSelector((state) => state.customizer);\r\n  const [preSubSchema, setPreSubSchema] = React.useState(subSchema);\r\n\r\n  React.useEffect(() => {\r\n    if (subSchema?.transactionType !== preSubSchema?.transactionType) {\r\n      setPreSubSchema(subSchema);\r\n      handleClose();\r\n    }\r\n  }, [\r\n    handleClose,\r\n    preSubSchema?.transactionType,\r\n    subSchema,\r\n    subSchema?.transactionType,\r\n  ]);\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={{ agree: false }}\r\n      validationSchema={Yup.object().shape({\r\n        agree: Yup.boolean().oneOf([true]),\r\n      })}\r\n      enableReinitialize\r\n      onSubmit={(values, { setSubmitting, resetForm }) => {\r\n        setTimeout(() => {\r\n          setSubmitting(true);\r\n          alert(JSON.stringify(values, null, 2));\r\n          setSubmitting(false);\r\n          handleClose();\r\n        }, 400);\r\n      }}\r\n    >\r\n      {({ isSubmitting, values, errors, touched, resetForm }) => (\r\n        <div>\r\n          <Dialog\r\n            draggable\r\n            BackdropProps={{ classes: { root: classes.root } }}\r\n            PaperProps={{ classes: { root: classes.paper, elevation2: \"5\" } }}\r\n            style={{ boxShadow: \"none\" }}\r\n            open={open}\r\n            onClose={resetForm}\r\n            aria-labelledby=\"form-dialog-title\"\r\n          >\r\n            <CssBaseline />\r\n            <DialogTitle\r\n              style={{\r\n                backgroundColor: \"cornsilk\",\r\n                padding: 0,\r\n                boxShadow: \"0.1rem 0.1rem 0.1rem orange\",\r\n              }}\r\n              id=\"form-dialog-title\"\r\n            >\r\n              {subSchema?.transactionType ? (\r\n                <Alert\r\n                  style={{ width: \"100%\" }}\r\n                  variant=\"standard\"\r\n                  severity=\"warning\"\r\n                  action={\r\n                    <Tooltip title=\"Cancel\" placement=\"top\">\r\n                      <IconButton\r\n                        onClick={handleClose}\r\n                        aria-label=\"delete\"\r\n                        className={classes.alert}\r\n                        size=\"small\"\r\n                        disableRipple\r\n                      >\r\n                        <CancelPresentationTwoToneIcon fontSize=\"default\" />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  }\r\n                >\r\n                  Changing the transaction will reset the customisation file\r\n                </Alert>\r\n              ) : (\r\n                <Alert\r\n                  style={{ width: \"100%\" }}\r\n                  variant=\"standard\"\r\n                  severity=\"info\"\r\n                  action={\r\n                    <Tooltip title=\"Cancel\" placement=\"top\">\r\n                      <IconButton\r\n                        onClick={handleClose}\r\n                        aria-label=\"delete\"\r\n                        className={classes.alert}\r\n                        size=\"small\"\r\n                        disableRipple\r\n                      >\r\n                        <CancelPresentationTwoToneIcon fontSize=\"default\" />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  }\r\n                >\r\n                  Target transaction schema must be selected.\r\n                </Alert>\r\n              )}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <Typography variant=\"subtitle1\">\r\n                Select the transaction from the dropdown list\r\n              </Typography>\r\n\r\n              <DialogContentText></DialogContentText>\r\n            </DialogContent>\r\n            <Divider />\r\n            <Form>\r\n              <DialogActions>\r\n                <SubSchemaMenu transactionList={transactionList} />\r\n              </DialogActions>\r\n            </Form>\r\n          </Dialog>\r\n        </div>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport { useStyles } from \"./navTabsStyle\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { VerticalLinearStepper } from \"../vertical-stepper/VerticalStepper\";\r\nimport { ItemXMLViewer } from \"../itemXMLViewer/ItemXMLViewer\";\r\nimport { useTypedSelector } from \"../../hooks/useTypeSelector\";\r\n// import { SearchPath } from \"../search/SearchPath\";\r\n// import { LixiItem } from \"../lixi-item/LixiItem\";\r\n// import { Customiser } from \"../../models/Customiser\";\r\n// import { LixiBase } from \"../../models/LixiBase\";\r\nimport { CreateInstructionTab } from \"./create-instruction/CreateInstruction\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport { TabPanel } from \"./NavTabPanel\";\r\n// import { SubSchemaMenu } from \"../sub-schema-menu/SubSchemaMenu\";\r\nimport { SelectTransactionDialog } from \"../select-transaction-dialog/SelectTransactionDialog\";\r\nimport { XmlUtil } from \"../../util/nameSpaces\";\r\nimport { useAction } from \"../../hooks/useActions\";\r\nimport { SubSchema } from \"../../redux/actions/customiser-actions\";\r\n\r\n\r\nfunction a11yProps(index: any) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    \"aria-controls\": `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nexport const NavTabs: React.FC = () => {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n  const [preSubSchema, setPreSubSchema]= React.useState<SubSchema>()\r\n  const { customization, subSchema } = useTypedSelector(\r\n    (state) => state.customizer\r\n  );\r\n  const { customizeSubSchema,resetCustomization,resetItem } = useAction();\r\n  const { schema } = useTypedSelector((state) => state.schema);\r\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const trs = React.useMemo(() => {\r\n    if (!schema) return;\r\n    const schemaDoc = new XmlUtil(schema);\r\n    return schemaDoc.getTransactions();\r\n  }, [schema]);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  React.useEffect(() => {\r\n    if (trs && trs?.length === 1) {\r\n      if (!subSchema?.transactionType) {\r\n        customizeSubSchema(trs[0]);\r\n        resetCustomization();\r\n        resetItem();\r\n        return;\r\n      }\r\n      if (trs[0].transactionType !== preSubSchema?.transactionType) {\r\n        resetCustomization();\r\n        resetItem();\r\n        customizeSubSchema(trs[0]);\r\n        setPreSubSchema(trs[0]);\r\n        return;\r\n      }\r\n    }\r\n    if (!subSchema?.transactionType && schema && !open) {\r\n      setOpen(true);\r\n    }\r\n  }, [\r\n    customizeSubSchema,\r\n    open,\r\n    preSubSchema?.transactionType,\r\n    resetCustomization,\r\n    resetItem,\r\n    schema,\r\n    subSchema?.transactionType,\r\n    trs,\r\n  ]);\r\n\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {trs?.length && (\r\n        <SelectTransactionDialog\r\n          transactionList={trs}\r\n          open={open}\r\n          handleClose={handleClose}\r\n        />\r\n      )}\r\n      <AppBar \r\n        className={classes.appBar} \r\n        position=\"sticky\"\r\n        >\r\n        <Toolbar style={{alignItems:\"center\",alignContent:\"center\"}}>\r\n        <img style={{flexGrow: 1,maxWidth:40,marginRight:\"1em\"}} src=\"https://cdn.lixi.org.au/assets/lixi-logo-white-mac-smaller.gif\" alt=\"LIXI\"/>\r\n          {subSchema?.transactionType ? (\r\n            <Typography\r\n              onClick={() =>\r\n                trs && trs?.length > 1 ? setOpen(true) : undefined\r\n              }\r\n              noWrap\r\n              variant=\"h6\"\r\n              style={{ flexGrow: 1, cursor: \"pointer\" }}\r\n            >\r\n              <em>{`${subSchema?.transactionType} - ${subSchema?.transactionVersion}`}</em>\r\n            </Typography>\r\n          ) : (\r\n            <Typography\r\n              onClick={() =>\r\n                trs && trs?.length > 1 ? setOpen(true) : undefined\r\n              }\r\n              noWrap\r\n              color=\"secondary\"\r\n              variant=\"h6\"\r\n              style={{ flexGrow: 1, cursor: \"pointer\" }}\r\n            >\r\n              Transaction?\r\n            </Typography>\r\n          )}\r\n\r\n          <Tabs\r\n            centered\r\n            value={value}\r\n            onChange={handleChange}\r\n            aria-label=\"simple tabs example\"\r\n          >\r\n            <Tab label=\"Instruction set up\" {...a11yProps(0)} />\r\n            <Tab label=\"Create Instruction\" {...a11yProps(1)} />\r\n            <Tab label=\"View Instruction\" {...a11yProps(2)} />\r\n          </Tabs>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <TabPanel value={value} index={0}>\r\n        <Box>\r\n          <VerticalLinearStepper />\r\n        </Box>\r\n      </TabPanel>\r\n\r\n      <CreateInstructionTab value={value} index={1} />\r\n\r\n      <TabPanel value={value} index={2}>\r\n        {<ItemXMLViewer itemXML={customization} />}\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n};\r\n","import { Theme, createStyles, makeStyles } from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100%\",\r\n      minHeight: \"100vh\",\r\n      backgroundColor: \"#333\",\r\n      padding: \"1rem\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        padding: \"0.5\",\r\n      },\r\n    },\r\n    main: {\r\n      backgroundColor: \"#fff\",\r\n      width: \"50%\",\r\n      margin: \"auto\",\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        width: \"100%\",\r\n        margin:   \"0\"\r\n      },\r\n      [theme.breakpoints.up(\"md\")]: {\r\n        width: \"70%\",\r\n      },\r\n    },\r\n  })\r\n);\r\n","import React from 'react';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport { NavTabs } from \"./components/nav-taps/NavTabs\";\r\nimport {useStyles}from \"./appStyle\"\r\n\r\n\r\nfunction App() {\r\n  const classes = useStyles()\r\n  \r\n  return (\r\n    <div className={classes.root}>\r\n    <div\r\n      className={classes.main}\r\n    >\r\n      <CssBaseline />\r\n      <NavTabs  />\r\n     \r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { Theme } from \"@material-ui/core\";\r\nimport { lightTheme } from \"./light\";\r\nimport { darkTheme } from \"./dark\";\r\n\r\nexport function getThemeByName(theme: string): Theme {\r\n  return themeMap[theme];\r\n}\r\n\r\nconst themeMap: { [key: string]: Theme } = {\r\n  lightTheme,\r\n  darkTheme,\r\n};\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport const lightTheme = createMuiTheme({\r\n  palette: {\r\n    type: \"light\",\r\n  },\r\n});\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport const darkTheme = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n  },\r\n});\r\n","import React, { useState } from \"react\";\r\nimport { MuiThemeProvider } from \"@material-ui/core/styles\";\r\nimport { getThemeByName } from \"./themes/getThem\";\r\n\r\nexport const ThemeContext = React.createContext(\r\n  (themeName: string): void => {}\r\n);\r\n// export const ThemeContext = React.createContext((themeName: string): void => { });\r\n\r\nconst ThemeProvider: React.FC = (props) => {\r\n  // State to hold the selected theme name\r\n  const [themeName, _setThemeName] = useState(\"lightTheme\");\r\n  // const [theme, setTheme] = useState(getThemeByName(\"darkTheme\"))\r\n\r\n  // Retrieve the theme object by theme name\r\n  const theme = getThemeByName(themeName);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={_setThemeName}>\r\n      <MuiThemeProvider theme={theme}>{props.children}</MuiThemeProvider>\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ThemeProvider;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport ThemProvider from \"./themeProvider\";\r\nimport { store } from \"./redux\";\r\nimport { Provider } from \"react-redux\";\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <ThemProvider>\r\n    <React.StrictMode>\r\n      <Provider store={store}>\r\n      <App />\r\n      </Provider>\r\n    </React.StrictMode>\r\n  </ThemProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}